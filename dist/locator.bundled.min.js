/**
 * locator - In browser locator map generator
 * @version v0.0.2
 * @link https://github.com/datanews/locator#readme
 * @license MIT
 * @notes External libraries may be bundled here and their respective, original license applies.
 */
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Locator=t()}}(function(){var t;return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({html2canvas:[function(t,e,n){e.exports=t("UzntfK")},{}],UzntfK:[function(t,e,n){(function(t){(function(t,e,n,i){!function(t,e,n){"use strict";function i(t,e,n){var i,o=t.runtimeStyle&&t.runtimeStyle[e],r=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=r.left,o&&(t.runtimeStyle.left=t.currentStyle.left),r.left="fontSize"===e?"1em":n||0,n=r.pixelLeft+"px",r.left=i,o&&(t.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function o(t){return parseInt(t,10)}function r(t,e,o,r){if(t=(t||"").split(","),t=t[r||0]||t[0]||"auto",t=c.Util.trimText(t).split(" "),"backgroundSize"!==o||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=t[0].indexOf("%")===-1?i(e,o+"X",t[0]):t[0],t[1]===n){if("backgroundSize"===o)return t[1]="auto",t;t[1]=t[0]}t[1]=t[1].indexOf("%")===-1?i(e,o+"Y",t[1]):t[1]}else;return t}function s(t,e,n,i,o,r){var s,a,h,l,u=c.Util.getCSS(e,t,o);if(1===u.length&&(l=u[0],u=[],u[0]=l,u[1]=l),u[0].toString().indexOf("%")!==-1)h=parseFloat(u[0])/100,a=n.width*h,"backgroundSize"!==t&&(a-=(r||i).width*h);else if("backgroundSize"===t)if("auto"===u[0])a=i.width;else if(/contain|cover/.test(u[0])){var d=c.Util.resizeBounds(i.width,i.height,n.width,n.height,u[0]);a=d.width,s=d.height}else a=parseInt(u[0],10);else a=parseInt(u[0],10);return"auto"===u[1]?s=a/i.width*i.height:u[1].toString().indexOf("%")!==-1?(h=parseFloat(u[1])/100,s=n.height*h,"backgroundSize"!==t&&(s-=(r||i).height*h)):s=parseInt(u[1],10),[a,s]}function a(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return n.push({type:"variable",name:t,arguments:e}),e}}}function h(t){return{zindex:t,children:[]}}var l,u,c={};c.Util={},c.Util.log=function(e){c.logging&&t.console&&t.console.log&&t.console.log(e)},c.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),c.Util.asFloat=function(t){return parseFloat(t)},function(){var t=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,e=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;c.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var i=n.match(t),o=[],r=0;i&&r<i.length;r++){var s=i[r].match(e);o.push({color:s[0],offsetX:s[1]?s[1].replace("px",""):0,offsetY:s[2]?s[2].replace("px",""):0,blur:s[3]?s[3].replace("px",""):0})}return o}}(),c.Util.parseBackgroundImage=function(t){var e,n,i,o,r,s,a,h,l=" \r\n\t",u=[],c=0,d=0,p=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&h.push(n),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(i=e.substr(0,o),e=e.substr(o)),u.push({prefix:i,method:e.toLowerCase(),value:r,args:h})),h=[],e=i=n=r=""};p();for(var f=0,m=t.length;f<m;f++)if(s=t[f],!(0===c&&l.indexOf(s)>-1)){switch(s){case'"':a?a===s&&(a=null):a=s;break;case"(":if(a)break;if(0===c){c=1,r+=s;continue}d++;break;case")":if(a)break;if(1===c){if(0===d){c=0,r+=s,p();continue}d--}break;case",":if(a)break;if(0===c){p();continue}if(1===c&&0===d&&!e.match(/^url$/i)){h.push(n),n="",r+=s;continue}}r+=s,0===c?e+=s:n+=s}return p(),u},c.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=Math.floor(e.top),n.bottom=Math.floor(e.bottom||e.top+e.height),n.left=Math.floor(e.left),n.width=Math.floor(t.offsetWidth),n.height=Math.floor(t.offsetHeight)),n},c.Util.OffsetBounds=function(t){var e=t.offsetParent?c.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},c.Util.getCSS=function(t,n,i){l!==t&&(u=e.defaultView.getComputedStyle(t,null));var s=u[n];if(/^background(Size|Position)$/.test(n))return r(s,t,n,i);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var a=s.split(" ");return a.length<=1&&(a[1]=a[0]),a.map(o)}return s},c.Util.resizeBounds=function(t,e,n,i,o){var r,s,a=n/i,h=t/e;return o&&"auto"!==o?a<h^"contain"===o?(s=i,r=i*h):(r=n,s=n/h):(r=n,s=i),{width:r,height:s}},c.Util.BackgroundPosition=function(t,e,n,i,o){var r=s("backgroundPosition",t,e,n,i,o);return{left:r[0],top:r[1]}},c.Util.BackgroundSize=function(t,e,n,i){var o=s("backgroundSize",t,e,n,i);return{width:o[0],height:o[1]}},c.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&!function(t,e){var i=t.length,o=0;if("number"==typeof e.length)for(var r=e.length;o<r;o++)t[i++]=e[o];else for(;e[o]!==n;)t[i++]=e[o++];return t.length=i,t}(e,t),e}(t.childNodes)}catch(i){c.Util.log("html2canvas.Util.Children failed with exception: "+i.message),e=[]}return e},c.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},c.Util.Font=function(){var t={};return function(e,i,o){if(t[e+"-"+i]!==n)return t[e+"-"+i];var r,s,a,h=o.createElement("div"),l=o.createElement("img"),u=o.createElement("span"),c="Hidden Text";return h.style.visibility="hidden",h.style.fontFamily=e,h.style.fontSize=i,h.style.margin=0,h.style.padding=0,o.body.appendChild(h),l.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",l.width=1,l.height=1,l.style.margin=0,l.style.padding=0,l.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=i,u.style.margin=0,u.style.padding=0,u.appendChild(o.createTextNode(c)),h.appendChild(u),h.appendChild(l),r=l.offsetTop-u.offsetTop+1,h.removeChild(u),h.appendChild(o.createTextNode(c)),h.style.lineHeight="normal",l.style.verticalAlign="super",s=l.offsetTop-h.offsetTop+1,a={baseline:r,lineWidth:1,middle:s},t[e+"-"+i]=a,o.body.removeChild(h),a}}(),function(){function t(t){return function(e){try{t.addColorStop(e.stop,e.color)}catch(i){n.log(["failed to add color stop: ",i,"; tried to add: ",e])}}}var n=c.Util,i={};c.Generate=i;var o=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];i.parseGradient=function(t,e){var n,i,r,s,a,h,l,u,c,d,p,f,m=o.length;for(i=0;i<m&&!(r=t.match(o[i]));i+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},a=r[2].match(/\w+/g))for(h=a.length,i=0;i<h;i+=1)switch(a[i]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),a=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(h=a.length,l=1/Math.max(h-1,1),i=0;i<h;i+=1)u=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(s=parseFloat(u[2]),s/="%"===u[3]?100:e.width):s=i*l,n.colorStops.push({color:u[1],stop:s});break;case"-webkit-gradient":if(n={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),a&&(n.x0=a[1]*e.width/100,n.y0=a[2]*e.height/100,n.x1=a[3]*e.width/100,n.y1=a[4]*e.height/100),a=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(h=a.length,i=0;i<h;i+=1)u=a[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),s=parseFloat(u[2]),"from"===u[1]&&(s=0),"to"===u[1]&&(s=1),n.colorStops.push({color:u[3],stop:s});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(n.x0=a[1]*e.width/100,n.y0=a[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),a=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(h=a.length,l=1/Math.max(h-1,1),i=0;i<h;i+=1)u=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),u[2]?(s=parseFloat(u[2]),u[3]&&(s/=100)):s=i*l,n.colorStops.push({color:u[1],stop:s});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},a=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(n.cx=a[1]*e.width/100,n.cy=a[2]*e.height/100),a=r[3].match(/\w+/),u=r[4].match(/[a-z\-]*/),a&&u)switch(u[0]){case"farthest-corner":case"cover":case"":c=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(c,d,p,f);break;case"closest-corner":c=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(c,d,p,f);break;case"farthest-side":"circle"===a[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=a[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===a[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=a[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(a=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(h=a.length,l=1/Math.max(h-1,1),i=0;i<h;i+=1)u=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(s=parseFloat(u[2]),s/="%"===u[3]?100:e.width):s=i*l,n.colorStops.push({color:u[1],stop:s})}return n},i.Gradient=function(n,i){if(0!==i.width&&0!==i.height){var o,r,s=e.createElement("canvas"),a=s.getContext("2d");if(s.width=i.width,s.height=i.height,o=c.Generate.parseGradient(n,i))switch(o.type){case"linear":r=a.createLinearGradient(o.x0,o.y0,o.x1,o.y1),o.colorStops.forEach(t(r)),a.fillStyle=r,a.fillRect(0,0,i.width,i.height);break;case"circle":r=a.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx),o.colorStops.forEach(t(r)),a.fillStyle=r,a.fillRect(0,0,i.width,i.height);break;case"ellipse":var h=e.createElement("canvas"),l=h.getContext("2d"),u=Math.max(o.rx,o.ry),d=2*u;h.width=h.height=d,r=l.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,u),o.colorStops.forEach(t(r)),l.fillStyle=r,l.fillRect(0,0,d,d),a.fillStyle=o.colorStops[o.colorStops.length-1].color,a.fillRect(0,0,s.width,s.height),a.drawImage(h,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry)}return s}},i.ListAlpha=function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t>26);return n},i.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",r=n.length;if(t<=0||t>=4e3)return t;for(e=0;e<r;e+=1)for(;t>=i[e];)t-=i[e],o+=n[e];return o}}(),c.Parse=function(i,o){function r(){return Math.max(Math.max(ut.body.scrollWidth,ut.documentElement.scrollWidth),Math.max(ut.body.offsetWidth,ut.documentElement.offsetWidth),Math.max(ut.body.clientWidth,ut.documentElement.clientWidth))}function s(){return Math.max(Math.max(ut.body.scrollHeight,ut.documentElement.scrollHeight),Math.max(ut.body.offsetHeight,ut.documentElement.offsetHeight),Math.max(ut.body.clientHeight,ut.documentElement.clientHeight))}function l(t,e){var n=parseInt(mt(t,e),10);return isNaN(n)?0:n}function u(t,e,n,i,o,r){"transparent"!==r&&(t.setVariable("fillStyle",r),t.fillRect(e,n,i,o),lt+=1)}function d(t,e,n){if(t.length>0)return e+n.toUpperCase()}function p(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,d);case"uppercase":return t.toUpperCase();default:return t}}function f(t){return/^(normal|none|0px)$/.test(t)}function m(t,e,n,i){null!==t&&ct.trimText(t).length>0&&(i.fillText(t,e,n),lt+=1)}function g(t,e,n,i){var o=!1,r=mt(e,"fontWeight"),s=mt(e,"fontFamily"),a=mt(e,"fontSize"),h=ct.parseTextShadows(mt(e,"textShadow"));switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}if(t.setVariable("fillStyle",i),t.setVariable("font",[mt(e,"fontStyle"),mt(e,"fontVariant"),r,a,s].join(" ")),t.setVariable("textAlign",o?"right":"left"),h.length&&(t.setVariable("shadowColor",h[0].color),t.setVariable("shadowOffsetX",h[0].offsetX),t.setVariable("shadowOffsetY",h[0].offsetY),t.setVariable("shadowBlur",h[0].blur)),"none"!==n)return ct.Font(s,a,ut)}function v(t,e,n,i,o){switch(e){case"underline":u(t,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,o);break;case"overline":u(t,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":u(t,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,o)}}function _(t,e,n,i,o){var r;if(dt.rangeBounds&&!o)"none"===n&&0===ct.trimText(e).length||(r=y(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var s=i?t.node.splitText(e.length):null;r=w(t.node,o),t.node=s}return r}function y(t,e,n){var i=ut.createRange();return i.setStart(e,n),i.setEnd(e,n+t.length),i.getBoundingClientRect()}function w(t,e){var n=t.parentNode,i=ut.createElement("wrapper"),o=t.cloneNode(!0);i.appendChild(t.cloneNode(!0)),n.replaceChild(i,t);var r=e?ct.OffsetBounds(i):ct.Bounds(i);return n.replaceChild(o,i),r}function b(t,e,n){var i,r,s=n.ctx,a=mt(t,"color"),h=mt(t,"textDecoration"),l=mt(t,"textAlign"),u={node:e,textOffset:0};ct.trimText(e.nodeValue).length>0&&(e.nodeValue=p(e.nodeValue,mt(t,"textTransform")),l=l.replace(["-webkit-auto"],["auto"]),r=!o.letterRendering&&/^(left|right|justify|auto)$/.test(l)&&f(mt(t,"letterSpacing"))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),i=g(s,t,h,a),o.chinese&&r.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),r.splice.apply(r,t))}),r.forEach(function(t,e){var o=_(u,t,h,e<r.length-1,n.transform.matrix);o&&(m(t,o.left,o.bottom,s),v(s,h,o,i,a))}))}function L(t,e){var n,i,o=ut.createElement("boundelement");return o.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",o.appendChild(ut.createTextNode(e)),t.insertBefore(o,t.firstChild),i=ct.Bounds(o),t.removeChild(o),t.style.listStyleType=n,i}function x(t){var e=-1,n=1,i=t.parentNode.childNodes;if(t.parentNode){for(;i[++e]!==t;)1===i[e].nodeType&&n++;return n}return-1}function k(t,e){var n,i=x(t);switch(e){case"decimal":n=i;break;case"decimal-leading-zero":n=1===i.toString().length?i="0"+i.toString():i.toString();break;case"upper-roman":n=c.Generate.ListRoman(i);break;case"lower-roman":n=c.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=c.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=c.Generate.ListAlpha(i)}return n+". "}function E(t,e,n){var i,o,r,s=e.ctx,a=mt(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(a)){if(o=k(t,a),r=L(t,o),g(s,t,"none",mt(t,"color")),"inside"!==mt(t,"listStylePosition"))return;s.setVariable("textAlign","left"),i=n.left,m(o,i,r.bottom,s)}}function M(t){var e=i[t];return!(!e||e.succeeded!==!0)&&e.img}function P(t,e){var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height);return{left:n,top:i,width:o-n,height:r-i}}function C(t,e,n){var i,o="static"!==e.cssPosition,r=o?mt(t,"zIndex"):"auto",s=mt(t,"opacity"),a="none"!==mt(t,"cssFloat");e.zIndex=i=h(r),i.isPositioned=o,i.isFloated=a,i.opacity=s,i.ownStacking="auto"!==r||s<1,n&&n.zIndex.children.push(e)}function T(t,e,n,i,o){var r=l(e,"paddingLeft"),s=l(e,"paddingTop"),a=l(e,"paddingRight"),h=l(e,"paddingBottom");j(t,n,0,0,n.width,n.height,i.left+r+o[3].width,i.top+s+o[0].width,i.width-(o[1].width+o[3].width+r+a),i.height-(o[0].width+o[2].width+s+h))}function S(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:l(t,"border"+e+"Width"),color:mt(t,"border"+e+"Color")}})}function D(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return mt(t,"border"+e+"Radius")})}function A(t,e,n,i){var o=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(r){var s=o(t,e,r),a=o(e,n,r),h=o(n,i,r),l=o(s,a,r),u=o(a,h,r),c=o(l,u,r);return[A(t,s,l,c),A(c,u,h,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function O(t,e,n,i,o,r,s){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",r,s]),(n[0]>0||n[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function I(t,e,n,i,o,r,s){var a=[];return e[0]>0||e[1]>0?(a.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(a.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(a.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function R(t,e,n){var i=t.left,o=t.top,r=t.width,s=t.height,a=e[0][0],h=e[0][1],l=e[1][0],u=e[1][1],c=e[2][0],d=e[2][1],p=e[3][0],f=e[3][1],m=r-l,g=s-d,v=r-c,_=s-f;return{topLeftOuter:_t(i,o,a,h).topLeft.subdivide(.5),topLeftInner:_t(i+n[3].width,o+n[0].width,Math.max(0,a-n[3].width),Math.max(0,h-n[0].width)).topLeft.subdivide(.5),topRightOuter:_t(i+m,o,l,u).topRight.subdivide(.5),topRightInner:_t(i+Math.min(m,r+n[3].width),o+n[0].width,m>r+n[3].width?0:l-n[3].width,u-n[0].width).topRight.subdivide(.5),bottomRightOuter:_t(i+v,o+g,c,d).bottomRight.subdivide(.5),bottomRightInner:_t(i+Math.min(v,r+n[3].width),o+Math.min(g,s+n[0].width),Math.max(0,c-n[1].width),Math.max(0,d-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:_t(i,o+_,p,f).bottomLeft.subdivide(.5),bottomLeftInner:_t(i+n[3].width,o+_,Math.max(0,p-n[3].width),Math.max(0,f-n[2].width)).bottomLeft.subdivide(.5)}}function z(t,e,n,i,o){var r=mt(t,"backgroundClip"),s=[];switch(r){case"content-box":case"padding-box":O(s,i[0],i[1],e.topLeftInner,e.topRightInner,o.left+n[3].width,o.top+n[0].width),O(s,i[1],i[2],e.topRightInner,e.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),O(s,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),O(s,i[3],i[0],e.bottomLeftInner,e.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:O(s,i[0],i[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),O(s,i[1],i[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),O(s,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),O(s,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return s}function U(t,e,n){var i,o,r,s,a,h,l=e.left,u=e.top,c=e.width,d=e.height,p=D(t),f=R(e,p,n),m={clip:z(t,f,n,p,e),borders:[]};for(i=0;i<4;i++)if(n[i].width>0){switch(o=l,r=u,s=c,a=d-n[2].width,i){case 0:a=n[0].width,h=I({c1:[o,r],c2:[o+s,r],c3:[o+s-n[1].width,r+a],c4:[o+n[3].width,r+a]},p[0],p[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:o=l+c-n[1].width,s=n[1].width,h=I({c1:[o+s,r],c2:[o+s,r+a+n[2].width],c3:[o,r+a],c4:[o,r+n[0].width]},p[1],p[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:r=r+d-n[2].width,a=n[2].width,h=I({c1:[o+s,r+a],c2:[o,r+a],c3:[o+n[3].width,r],c4:[o+s-n[3].width,r]},p[2],p[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:s=n[3].width,h=I({c1:[o,r+a+n[2].width],c2:[o,r],c3:[o+s,r+n[0].width],c4:[o+s,r+a]},p[3],p[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}m.borders.push({args:h,color:n[i].color})}return m}function B(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function N(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),B(t,e),t.fill(),lt+=1)}function F(t,e,n){var i,o,r=ut.createElement("valuewrap"),s=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];s.forEach(function(e){try{r.style[e]=mt(t,e)}catch(n){ct.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(r.style.lineHeight=mt(t,"height")),r.style.top=e.top+"px",r.style.left=e.left+"px",i="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,i||(i=t.placeholder),o=ut.createTextNode(i),r.appendChild(o),ft.appendChild(r),b(t,o,n),ft.removeChild(r)}function j(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),lt+=1}function Z(n,i){var o=t.getComputedStyle(n,i);if(o&&o.content&&"none"!==o.content&&"-moz-alt-content"!==o.content&&"none"!==o.display){var r=o.content+"",s=r.substr(0,1);s===r.substr(r.length-1)&&s.match(/'|"/)&&(r=r.substr(1,r.length-2));var a="url"===r.substr(0,3),h=e.createElement(a?"img":"span");return h.className=gt+"-before "+gt+"-after",Object.keys(o).filter(W).forEach(function(t){try{h.style[t]=o[t]}catch(e){ct.log(["Tried to assign readonly property ",t,"Error:",e])}}),a?h.src=ct.parseBackgroundImage(r)[0].args[0]:h.innerHTML=r,h}}function W(e){return isNaN(t.parseInt(e,10))}function H(t,e){var n=Z(t,":before"),i=Z(t,":after");(n||i)&&(n&&(t.className+=" "+gt+"-before",t.parentNode.insertBefore(n,t),rt(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(gt+"-before","").trim()),i&&(t.className+=" "+gt+"-after",t.appendChild(i),rt(i,e,!0),t.removeChild(i),t.className=t.className.replace(gt+"-after","").trim()))}function G(t,e,n,i){var o=Math.round(i.left+n.left),r=Math.round(i.top+n.top);t.createPattern(e),t.translate(o,r),t.fill(),t.translate(-o,-r)}function V(t,e,n,i,o,r,s,a){var h=[];h.push(["line",Math.round(o),Math.round(r)]),h.push(["line",Math.round(o+s),Math.round(r)]),h.push(["line",Math.round(o+s),Math.round(a+r)]),h.push(["line",Math.round(o),Math.round(a+r)]),B(t,h),t.save(),t.clip(),G(t,e,n,i),t.restore()}function q(t,e,n){u(t,e.left,e.top,e.width,e.height,n)}function Y(t,e,n,i,o){var r=ct.BackgroundSize(t,e,i,o),s=ct.BackgroundPosition(t,e,i,o,r),a=mt(t,"backgroundRepeat").split(",").map(ct.trimText);switch(i=J(i,r),a=a[o]||a[0]){case"repeat-x":V(n,i,s,e,e.left,e.top+s.top,99999,i.height);break;case"repeat-y":V(n,i,s,e,e.left+s.left,e.top,i.width,99999);break;case"no-repeat":V(n,i,s,e,e.left+s.left,e.top+s.top,i.width,i.height);break;default:G(n,i,s,{top:e.top,left:e.left,width:i.width,height:i.height})}}function $(t,e,n){for(var i,o=mt(t,"backgroundImage"),r=ct.parseBackgroundImage(o),s=r.length;s--;)if(o=r[s],o.args&&0!==o.args.length){var a="url"===o.method?o.args[0]:o.value;i=M(a),i?Y(t,e,n,i,s):ct.log("html2canvas: Error loading background:",o)}}function J(t,e){if(t.width===e.width&&t.height===e.height)return t;var n,i=ut.createElement("canvas");return i.width=e.width,i.height=e.height,n=i.getContext("2d"),j(n,t,0,0,t.width,t.height,0,0,e.width,e.height),i}function K(t,e,n){return t.setVariable("globalAlpha",mt(e,"opacity")*(n?n.opacity:1))}function Q(t){return t.replace("px","")}function X(t,e){var n=mt(t,"transform")||mt(t,"-webkit-transform")||mt(t,"-moz-transform")||mt(t,"-ms-transform")||mt(t,"-o-transform"),i=mt(t,"transform-origin")||mt(t,"-webkit-transform-origin")||mt(t,"-moz-transform-origin")||mt(t,"-ms-transform-origin")||mt(t,"-o-transform-origin")||"0px 0px";i=i.split(" ").map(Q).map(ct.asFloat);var o;if(n&&"none"!==n){var r=n.match(yt);if(r)switch(r[1]){case"matrix":o=r[2].split(",").map(ct.trimText).map(ct.asFloat)}}return{origin:i,matrix:o}}function tt(t,e,n,i){var h=a(e?n.width:r(),e?n.height:s()),l={ctx:h,opacity:K(h,t,e),cssPosition:mt(t,"position"),borders:S(t),transform:i,clip:e&&e.clip?ct.Extend({},e.clip):null};return C(t,l,e),o.useOverflow===!0&&/(hidden|scroll|auto)/.test(mt(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(l.clip=l.clip?P(l.clip,n):n),l}function et(t,e,n){var i={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(i=P(i,n)),i}function nt(t,e){var n=e.matrix?ct.OffsetBounds(t):ct.Bounds(t);return e.origin[0]+=n.left,e.origin[1]+=n.top,n}function it(t,e,n,i){var o,r=X(t,e),s=nt(t,r),a=tt(t,e,s,r),h=a.borders,l=a.ctx,u=et(h,s,a.clip),c=U(t,s,h),d=pt.test(t.nodeName)?"#efefef":mt(t,"backgroundColor");switch(B(l,c.clip),l.save(),l.clip(),u.height>0&&u.width>0&&!i?(q(l,s,d),$(t,u,l)):i&&(a.backgroundColor=d),l.restore(),c.borders.forEach(function(t){N(l,t.args,t.color)}),n||H(t,a),t.nodeName){case"IMG":(o=M(t.getAttribute("src")))?T(l,t,o,s,h):ct.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder||"").length>0&&F(t,s,a);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&F(t,s,a);break;case"SELECT":(t.options||t.placeholder||"").length>0&&F(t,s,a);break;case"LI":E(t,a,u);break;case"CANVAS":T(l,t,t,s,h)}return a}function ot(t){return"none"!==mt(t,"display")&&"hidden"!==mt(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function rt(t,e,n){ot(t)&&(e=it(t,e,n,!1)||e,pt.test(t.nodeName)||st(t,e,n))}function st(t,e,n){ct.Children(t).forEach(function(i){i.nodeType===i.ELEMENT_NODE?rt(i,e,n):i.nodeType===i.TEXT_NODE&&b(t,i,e)})}function at(){var t=mt(e.documentElement,"backgroundColor"),n=ct.isTransparent(t)&&ht===e.body,i=it(ht,null,!1,n);return st(ht,i),n&&(t=i.backgroundColor),ft.removeChild(vt),{backgroundColor:t,stack:i}}t.scroll(0,0);var ht=o.elements===n?e.body:o.elements[0],lt=0,ut=ht.ownerDocument,ct=c.Util,dt=ct.Support(o,ut),pt=new RegExp("("+o.ignoreElements+")"),ft=ut.body,mt=ct.getCSS,gt="___html2canvas___pseudoelement",vt=ut.createElement("style");vt.innerHTML="."+gt+'-before:before { content: "" !important; display: none !important; }.'+gt+'-after:after { content: "" !important; display: none !important; }',ft.appendChild(vt),i=i||{};var _t=function(t){return function(e,n,i,o){var r=i*t,s=o*t,a=e+i,h=n+o;return{topLeft:A({x:e,y:h},{x:e,y:h-s},{x:a-r,y:n},{x:a,y:n}),topRight:A({x:e,y:n},{x:e+r,y:n},{x:a,y:h-s},{x:a,y:h}),bottomRight:A({x:a,y:n},{x:a,y:n+s},{x:e+r,y:h},{x:e,y:h}),bottomLeft:A({x:a,y:h},{x:a-r,y:h},{x:e,y:n+s},{x:e,y:n})}}}(4*((Math.sqrt(2)-1)/3)),yt=/(matrix)\((.+)\)/;return at()},c.Preload=function(i){function o(t){M.href=t,M.href=M.href;var e=M.protocol+M.host;return e===m}function r(){w.log("html2canvas: start: images: "+y.numLoaded+" / "+y.numTotal+" (failed: "+y.numFailed+")"),!y.firstRun&&y.numLoaded>=y.numTotal&&(w.log("Finished loading images: # "+y.numTotal+" (failed: "+y.numFailed+")"),"function"==typeof i.complete&&i.complete(y))}function s(e,o,s){var a,h,l=i.proxy;M.href=e,e=M.href,a="html2canvas_"+b++,s.callbackname=a,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(e)+"&callback="+a,h=x.createElement("script"),t[a]=function(e){"error:"===e.substring(0,6)?(s.succeeded=!1,y.numLoaded++,y.numFailed++,r()):(f(o,s),o.src=e),t[a]=n;try{delete t[a]}catch(i){}h.parentNode.removeChild(h),h=null,delete s.script,delete s.callbackname},h.setAttribute("type","text/javascript"),h.setAttribute("src",l),s.script=h,t.document.body.appendChild(h)}function a(e,n){var i=t.getComputedStyle(e,n),o=i.content;"url"===o.substr(0,3)&&g.loadImage(c.Util.parseBackgroundImage(o)[0].args[0]),d(i.backgroundImage,e)}function h(t){a(t,":before"),a(t,":after")}function l(t,e){var i=c.Generate.Gradient(t,e);i!==n&&(y[t]={img:i,succeeded:!0},y.numTotal++,y.numLoaded++,r())}function u(t){return t&&t.method&&t.args&&t.args.length>0}function d(t,e){var i;c.Util.parseBackgroundImage(t).filter(u).forEach(function(t){"url"===t.method?g.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(i===n&&(i=c.Util.Bounds(e)),l(t.value,i))})}function p(t){var e=!1;try{w.Children(t).forEach(p)}catch(i){}try{e=t.nodeType}catch(o){e=!1,w.log("html2canvas: failed to access some element's nodeType - Exception: "+o.message)}if(1===e||e===n){h(t);try{d(w.getCSS(t,"backgroundImage"),t)}catch(i){w.log("html2canvas: failed to get background-image - Exception: "+i.message)}d(t)}}function f(e,o){e.onload=function(){o.timer!==n&&t.clearTimeout(o.timer),y.numLoaded++,o.succeeded=!0,e.onerror=e.onload=null,r()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(t.clearTimeout(o.timer),i.proxy)){var n=e.src;return e=new Image,o.img=e,e.src=n,void s(e.src,e,o)}y.numLoaded++,y.numFailed++,o.succeeded=!1,e.onerror=e.onload=null,r()}}var m,g,v,_,y={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},w=c.Util,b=0,L=i.elements[0]||e.body,x=L.ownerDocument,k=L.getElementsByTagName("img"),E=k.length,M=x.createElement("a"),P=function(t){return t.crossOrigin!==n}(new Image);for(M.href=t.location.href,m=M.protocol+M.host,g={loadImage:function(t){var e,r;t&&y[t]===n&&(e=new Image,t.match(/data:image\/.*;base64,/i)?(e.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),r=y[t]={img:e},y.numTotal++,f(e,r)):o(t)||i.allowTaint===!0?(r=y[t]={img:e},y.numTotal++,f(e,r),e.src=t):P&&!i.allowTaint&&i.useCORS?(e.crossOrigin="anonymous",r=y[t]={img:e},y.numTotal++,f(e,r),e.src=t):i.proxy&&(r=y[t]={img:e},y.numTotal++,s(t,e,r)))},cleanupDOM:function(o){var s,a;if(!y.cleanupDone){o&&"string"==typeof o?w.log("html2canvas: Cleanup because: "+o):w.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms.");for(a in y)if(y.hasOwnProperty(a)&&(s=y[a],"object"==typeof s&&s.callbackname&&s.succeeded===n)){t[s.callbackname]=n;
try{delete t[s.callbackname]}catch(h){}s.script&&s.script.parentNode&&(s.script.setAttribute("src","about:blank"),s.script.parentNode.removeChild(s.script)),y.numLoaded++,y.numFailed++,w.log("html2canvas: Cleaned up failed img: '"+a+"' Steps: "+y.numLoaded+" / "+y.numTotal)}t.stop!==n?t.stop():e.execCommand!==n&&e.execCommand("Stop",!1),e.close!==n&&e.close(),y.cleanupDone=!0,o&&"string"==typeof o||r()}},renderingDone:function(){_&&t.clearTimeout(_)}},i.timeout>0&&(_=t.setTimeout(g.cleanupDOM,i.timeout)),w.log("html2canvas: Preload starts: finding background-images"),y.firstRun=!0,p(L),w.log("html2canvas: Preload: Finding images"),v=0;v<E;v+=1)g.loadImage(k[v].getAttribute("src"));return y.firstRun=!1,w.log("html2canvas: Preload: Done."),y.numTotal===y.numLoaded&&r(),g},c.Renderer=function(t,i){function o(t){function e(t){Object.keys(t).sort().forEach(function(n){var i=[],r=[],s=[],a=[];t[n].forEach(function(t){t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?s.push(t):t.node.zIndex.isFloated?r.push(t):i.push(t)}),function h(t){t.forEach(function(t){a.push(t),t.children&&h(t.children)})}(i.concat(r,s)),a.forEach(function(t){t.context?e(t.context):o.push(t.node)})})}var i,o=[];return i=function(t){function e(t,i,o){var r="auto"===i.zIndex.zindex?0:Number(i.zIndex.zindex),s=t,a=i.zIndex.isPositioned,h=i.zIndex.isFloated,l={node:i},u=o;i.zIndex.ownStacking?(s=l.context={"!":[{node:i,children:[]}]},u=n):(a||h)&&(u=l.children=[]),0===r&&o?o.push(l):(t[r]||(t[r]=[]),t[r].push(l)),i.zIndex.children.forEach(function(t){e(s,t,u)})}var i={};return e(i,t),i}(t),e(i),o}function r(t){var e;if("string"==typeof i.renderer&&c.Renderer[t]!==n)e=c.Renderer[t](i);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(i)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}return r(i.renderer)(t,i,e,o(t.stack),c)},c.Util.Support=function(t,e){function i(){var t=new Image,i=e.createElement("canvas"),o=i.getContext!==n&&i.getContext("2d");if(o===!1)return!1;i.width=i.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{o.drawImage(t,0,0),i.toDataURL()}catch(r){return!1}return c.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function o(){var t,n,i,o,r=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),i=t.getBoundingClientRect(),o=i.height,123===o&&(r=!0),e.body.removeChild(n))),r}return{rangeBounds:o(),svgRendering:t.svgRendering&&i()}},t.html2canvas=function(e,n){e=e.length?e:[e];var i,o,r={logging:!1,elements:e,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return r=c.Util.Extend(n,r),c.logging=r.logging,r.complete=function(t){"function"==typeof r.onpreloaded&&r.onpreloaded(t)===!1||(i=c.Parse(t,r),"function"==typeof r.onparsed&&r.onparsed(i)===!1||(o=c.Renderer(i,r),"function"==typeof r.onrendered&&r.onrendered(o)))},t.setTimeout(function(){c.Preload(r)},0),{render:function(t,e){return c.Renderer(t,c.Util.Extend(e,r))},parse:function(t,e){return c.Parse(t,c.Util.Extend(e,r))},preload:function(t){return c.Preload(c.Util.Extend(t,r))},log:c.Util.log}},t.html2canvas.log=c.Util.log,t.html2canvas.Renderer={Canvas:n},c.Renderer.Canvas=function(t){function i(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function o(t){if(a.indexOf(t.arguments[0].src)===-1){l.drawImage(t.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(e){return h=s.createElement("canvas"),l=h.getContext("2d"),!1}a.push(t.arguments[0].src)}return!0}function r(e,n){switch(n.type){case"variable":e[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{e.fillStyle=e.createPattern(n.arguments[0],"repeat")}catch(r){u.log("html2canvas: Renderer: Error creating pattern",r.message)}break;case"drawShape":i(e,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!t.taintTest||t.taintTest&&o(n))&&e.drawImage.apply(e,n.arguments);break;default:e[n.name].apply(e,n.arguments)}}}t=t||{};var s=e,a=[],h=e.createElement("canvas"),l=h.getContext("2d"),u=c.Util,d=t.canvas||s.createElement("canvas");return function(t,e,i,o,s){var a,h,l,c=d.getContext("2d"),p=t.stack;return d.width=d.style.width=e.width||p.ctx.width,d.height=d.style.height=e.height||p.ctx.height,l=c.fillStyle,c.fillStyle=u.isTransparent(p.backgroundColor)&&e.background!==n?e.background:t.backgroundColor,c.fillRect(0,0,d.width,d.height),c.fillStyle=l,o.forEach(function(t){c.textBaseline="bottom",c.save(),t.transform.matrix&&(c.translate(t.transform.origin[0],t.transform.origin[1]),c.transform.apply(c,t.transform.matrix),c.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(c.beginPath(),c.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),c.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){r(c,t)}),c.restore()}),u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(h=s.Util.Bounds(e.elements[0]),a=i.createElement("canvas"),a.width=Math.ceil(h.width),a.height=Math.ceil(h.height),c=a.getContext("2d"),c.drawImage(d,h.left,h.top,h.width,h.height,0,0,h.width,h.height),d=null,a):d}}}(window,document),i("undefined"!=typeof html2canvas?html2canvas:window.html2canvas)}).call(t,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){var i=t("leaflet"),o=i.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(t,e){i.Util.setOptions(this,e),this._key=t,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(t,e,n){for(var i="",o=n;o>0;o--){var r=0,s=1<<o-1;0!==(t&s)&&(r+=1),0!==(e&s)&&(r+=2),i+=r}return i},getTileUrl:function(t){var e=this._getZoomForUrl(),n=this.options.subdomains,i=this.options.subdomains[Math.abs((t.x+t.y)%n.length)];return this._url.replace("{subdomain}",i).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var t=this,e="_bing_metadata_"+i.Util.stamp(this);window[e]=function(n){window[e]=void 0;var i=document.getElementById(e);if(i.parentNode.removeChild(i),n.errorDetails)throw new Error(n.errorDetails);t.initMetadata(n)};var n="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),o=n+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._key+"&UriScheme="+n,r=document.createElement("script");r.type="text/javascript",r.src=o,r.id=e,document.getElementsByTagName("head")[0].appendChild(r)}},initMetadata:function(t){var e=t.resourceSets[0].resources[0];if(this.options.subdomains=e.imageUrlSubdomains,this._url=e.imageUrl,e.imageryProviders)for(var n=0;n<e.imageryProviders.length;n++)for(var o=e.imageryProviders[n],r=0;r<o.coverageAreas.length;r++){var s=o.coverageAreas[r],a={zoomMin:s.zoomMin,zoomMax:s.zoomMax,active:!1},h=new i.LatLngBounds(new i.LatLng(s.bbox[0]+.01,s.bbox[1]+.01),new i.LatLng(s.bbox[2]-.01,s.bbox[3]-.01));a.bounds=h,a.attrib=o.attribution,this._providers.push(a)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),i.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=i.latLngBounds(this._map.getBounds().getSouthWest().wrap(),this._map.getBounds().getNorthEast().wrap()),e=this._map.getZoom(),n=0;n<this._providers.length;n++){var o=this._providers[n];e<=o.zoomMax&&e>=o.zoomMin&&t.intersects(o.bounds)?(!o.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(o.attrib),o.active=!0):(o.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(o.attrib),o.active=!1)}},onAdd:function(t){this.loadMetadata(),i.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var e=0;e<this._providers.length;e++){var n=this._providers[e];n.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(n.attrib),n.active=!1)}i.TileLayer.prototype.onRemove.apply(this,[t])}}),r=function(t,e){return new o(t,e)};e.exports={BingLayer:o,bingLayer:r}},{leaflet:7}],4:[function(e,n,i){!function(i,o){"use strict";if("undefined"!=typeof n&&n.exports&&"function"==typeof e)o(e("ractive"));else if("function"==typeof t&&t.amd)t(["ractive"],o);else{if(!i.Ractive)throw new Error("Could not find Ractive! It must be loaded before the ractive-transitions-slide plugin");o(i.Ractive)}}("undefined"!=typeof window?window:this,function(t){"use strict";var e,n,i,o;o={duration:300,easing:"easeInOut"},n=["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","marginTop","marginBottom"],i={height:0,borderTopWidth:0,borderBottomWidth:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0},e=function(t,e){var r;e=t.processParams(e,o),t.isIntro?(r=t.getStyle(n),t.setStyle(i)):(t.setStyle(t.getStyle(n)),r=i),t.setStyle("overflowY","hidden"),t.animateStyle(r,e).then(t.complete)},t.transitions.slide=e})},{ractive:10}],5:[function(t,e,n){!function(t,e,n){L.drawVersion="0.3.0-dev",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire("draw:drawstop",{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire("draw:created",{layer:t,layerType:this.type})},_cancelDrawing:function(t){this._map.fire("draw:canceled",{layerType:this.type}),27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),L.Browser.touch||this._map.on("mouseup",this._onMouseUp,this),this._mouseMarker.on("mousedown",this._onMouseDown,this).on("mouseout",this._onMouseOut,this).on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("click",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=this._poly.spliceLatLngs(e.getLatLngs().length-1,1)[0];this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(n,!1)}},addVertex:function(t){var e=this._markers.length;return e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[this._poly.getLatLngs().length-1]);return!this.options.allowIntersection&&t||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire("draw:drawvertex",{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(e){if(this._mouseDownOrigin){var n=L.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(this._mouseDownOrigin);Math.abs(n)<9*(t.devicePixelRatio||1)&&this.addVertex(e.latlng)}this._mouseDownOrigin=null},_onTouch:function(t){L.Browser.touch&&(this._onMouseDown(t),this._onMouseUp(t))},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,o,r=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,a=this.options.maxGuideLineLength,h=r>a?r-a:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));r>h;h+=this.options.guidelineDistance)n=h/r,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),o.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;n>e;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=o-(e?2:1),i=t.distanceTo(this._markers[n].getLatLng()),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(n),L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape;return o&&(t=this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=L.GeometryUtil.readableArea(e,this.options.metric)),{text:i.text,subtext:n}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,o=this.options.metric;this._tooltip.updatePosition(n),this._isDrawing&&(this._drawShape(n),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:i?L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o,this.options.feet):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).off("click",this._onTouch,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire("draw:editmove",{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{},initialize:function(t,e){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,L.setOptions(this,e),this._poly.on("revert-edited",this._updateLatLngs,this)},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this.options))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},addHooks:function(){var t=this._poly;t instanceof L.Polygon||(t.options.fill=!1),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,o=this._latlngs;for(t=0,n=o.length;n>t;t++)i=this._createMarker(o[t],t),i.on("click",this._onMarkerClick,this),this._markers.push(i);var r,s;for(t=0,e=n-1;n>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(r=this._markers[e],s=this._markers[t],this._createMiddleMarker(r,s),this._updatePrevNext(r,s))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._poly._convertLatLngs(this._latlngs,!0),this._poly.redraw(),t},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),
this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire("draw:editvertex",{layers:this._markerGroup})},_onMarkerDrag:function(t){var e=t.target,n=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),n.options.poly){var i=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var o=n.options.color;n.setStyle({color:this.options.drawError.color}),i&&i.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:o}),i&&i.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3),this._onMarkerClick(t)}}this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._latlngs.length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,o,r=this._getMiddleLatLng(t,e),s=this._createMarker(r);s.setOpacity(.6),t._middleRight=e._middleLeft=s,i=function(){s.off("touchmove",i,this);var o=e._index;s._index=o,s.off("click",n,this).on("click",this._onMarkerClick,this),r.lat=s.getLatLng().lat,r.lng=s.getLatLng().lng,this._spliceLatLngs(o,0,r),this._markers.splice(o,0,s),s.setOpacity(1),this._updateIndexes(o,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire("editstart")},o=function(){s.off("dragstart",i,this),s.off("dragend",o,this),s.off("touchmove",i,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},n=function(){i.call(this),o.call(this),this._fireEdit()},s.on("click",n,this).on("dragstart",i,this).on("dragend",o,this).on("touchmove",i,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),o=n.project(e.getLatLng());return n.unproject(i._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this,this.options.poly),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;n>e;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){var e=t.target;e.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){var e=t.target;e.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;return i===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){var e=t.target;e.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;n>e;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target,i=n._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,n,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds(),n=e.getCenter(),i.setLatLng(n)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape.getLatLngs(),i=this._shape.getBounds(),o=i.getCenter(),r=[],s=0,a=n.length;a>s;s++)e=[n[s].lat-o.lat,n[s].lng-o.lng],r.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(r),this._repositionCornerMarkers(),this._map.fire("draw:editmove",{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire("draw:editresize",{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds(),e=t.getNorthWest(),n=t.getNorthEast(),i=t.getSouthEast(),o=t.getSouthWest();return[e,n,i,o]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;n>e;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;n>e;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t),this._map.fire("draw:editmove",{layer:this._shape})},_resize:function(t){var e=this._moveMarker.getLatLng(),n=e.distanceTo(t);this._shape.setRadius(n),this._map.fire("draw:editresize",{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var n={};if("undefined"!=typeof t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var i=this._map.mouseEventToContainerPoint(n),o=this._map.mouseEventToLayerPoint(n),r=this._map.layerPointToLatLng(o);this._map.fire(e,{latlng:r,layerPoint:o,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&n>100&&500>n||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){if(this._map._loaded){var e="touchstart";this._touchEvent(t,e)}},_onTouchEnd:function(t){if(this._map._loaded){var e="touchend";this._touchEvent(t,e)}},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){if(this._map._loaded){var e="touchleave";this._touchEvent(t,e)}},_onTouchMove:function(t){if(this._map._loaded){var e="touchmove";this._touchEvent(t,e)}},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);var i=e.indexOf("Trident/");if(i>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);var i=e.indexOf("Trident/");if(i>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,o=0,r=L.LatLng.DEG_TO_RAD;if(i>2){for(var s=0;i>s;s++)e=t[s],n=t[(s+1)%i],o+=(n.lng-e.lng)*r*(2+Math.sin(e.lat*r)+Math.sin(n.lat*r));o=6378137*o*6378137/2}return Math.abs(o)},readableArea:function(t,e){var n;return e?n=t>=1e4?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":(t/=.836127,n=t>=3097600?(t/3097600).toFixed(2)+" mi&sup2;":t>=4840?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"),n},readableDistance:function(t,e,n){var i;if(e)i=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m";else if(t*=1.09361,t>1760)i=(t/1760).toFixed(2)+" miles";else{var o=" yd";n&&(t=3*t,o=" ft"),i=Math.ceil(t)+o}return i}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._originalPoints,o=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._originalPoints,i=n?n.length:0,o=n?n[i-1]:null,r=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,r,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,n=e?e.length:0;return n+=t||0,!this._originalPoints||3>=n},_lineSegmentsIntersectsRange:function(t,e,n,i){var o,r,s=this._originalPoints;i=i||0;for(var a=n;a>i;a--)if(o=s[a-1],r=s[a],L.LineUtil.segmentsIntersect(t,e,o,r))return!0;return!1}}),L.Polygon.include({intersects:function(){var t,e,n,i,o,r=this._originalPoints;return!this._tooFewPointsForIntersection()&&(!!(t=L.Polyline.prototype.intersects.call(this))||(e=r.length,n=r[0],i=r[e-1],o=e-2,this._lineSegmentsIntersectsRange(i,n,o,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,o="leaflet-draw-toolbar-top";for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&(e=this._toolbars[r].addToolbar(t),e&&(i||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),i=!0),n.appendChild(e)));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,o=this._toolbarClass||"",r=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<r.length;e++)r[e].enabled&&this._initModeHandler(r[e].handler,this._toolbarContainer,i++,o,r[e].title);return i?(this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n):void 0},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;n>e;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,o){var r=t.type;this._modes[r]={},this._modes[r].handler=t,this._modes[r].button=this._createButton({type:r,title:o,className:i+"-"+r,container:e,callback:this._modes[r].handler.enable,context:this._modes[r].handler}),this._modes[r].buttonIndex=n,this._modes[r].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container);return e.href="#",t.text&&(e.innerHTML=t.text),t.title&&(e.title=t.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,o,r=this._actionsContainer,s=this.getActions(t),a=s.length;for(n=0,i=this._actionButtons.length;i>n;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];r.firstChild;)r.removeChild(r.firstChild);for(var h=0;a>h;h++)"enabled"in s[h]&&!s[h].enabled||(e=L.DomUtil.create("li","",r),o=this._createButton({title:s[h].title,text:s[h].text,container:e,callback:s[h].callback,context:s[h].context}),this._actionButtons.push({button:o,callback:s[h].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(n.style.visibility="inherit",L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,n=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:editstop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on("click",this._editStyle,this).on("draw:editvertex",this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off("click",this._editStyle,this).off("draw:editvertex",this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,i=t.layer||t.target||t;this._backupLayer(i),this.options.poly&&(n=L.Util.extend({},this.options.poly),i.options.poly=n),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),this.isMarker?(i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),
delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),i=this._map.layerPointToLatLng(n);t.target.setLatLng(i)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:deletestart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:deletestop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(t){var e=t.layer||t.target||t;e.on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)},{}],6:[function(e,n,i){!function(o,r){"function"==typeof t&&t.amd?t(["leaflet"],o):"object"==typeof i&&(n.exports=o(e("leaflet"))),"undefined"!=typeof r&&r.L&&(r.L.Control.MiniMap=o(L),r.L.control.minimap=function(t,e){return new r.L.Control.MiniMap(t,e)})}(function(t){var e=t.Control.extend({includes:t.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(e,n){t.Util.setOptions(this,n),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=e},onAdd:function(e){this._mainMap=e,this._container=t.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",t.DomEvent.disableClickPropagation(this._container),t.DomEvent.on(this._container,"mousewheel",t.DomEvent.stopPropagation);var n={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:e.options.crs};return n=t.Util.extend(this.options.mapOptions,n),this._miniMap=new t.Map(this._container,n),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(t.Util.bind(function(){this._aimingRect=t.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=t.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(e){t.Control.prototype.addTo.call(this,e);var n=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(n,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(e,n,i,o,r,s){var a=t.DomUtil.create("a",i,o);a.innerHTML=e,a.href="#",a.title=n;var h=t.DomEvent.stopPropagation;return t.DomEvent.on(a,"click",h).on(a,"mousedown",h).on(a,"dblclick",h).on(a,"click",t.DomEvent.preventDefault).on(a,"click",r,s),a},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){if(this._miniMapMoving)this._miniMapMoving=!1;else{var e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),n=this._miniMap.latLngToContainerPoint(e.getSouthWest()),i=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:n,ne:i}}},_onMiniMapMoving:function(e){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new t.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,n=this._miniMap.getZoom()-this._mainMap.getZoom(),i=this._miniMap.getZoom()-this.options.zoomLevelOffset;return n>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=i,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return"undefined"!=typeof t},_onToggle:function(){t.Util.requestAnimFrame(function(){t.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),t.Browser.any3d||t.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){t.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var e={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",e),this.fire("toggle",e)}});return t.Map.mergeOptions({miniMapControl:!1}),t.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new e).addTo(this))}),e},window)},{leaflet:7}],7:[function(e,n,i){!function(e,i,o){var r=e.L,s={};s.version="0.7.7","object"==typeof n&&"object"==typeof n.exports?n.exports=s:"function"==typeof t&&t.amd&&t(s),s.noConflict=function(){return e.L=r,this},e.L=s,s.Util={extend:function(t){var e,n,i,o,r=Array.prototype.slice.call(arguments,1);for(n=0,i=r.length;n<i;n++){o=r[n]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var i,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(i in t)e.apply(n,[i,t[i]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,n){var i,o;return function r(){var s=arguments;return i?void(o=!0):(i=!0,setTimeout(function(){i=!1,o&&(r.apply(n,s),o=!1)},e),void t.apply(n,s))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return s.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=s.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var i=e[n];if(i===o)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var n,i,o=["webkit","moz","o","ms"];for(n=0;n<o.length&&!i;n++)i=e[o[n]+t];return i}function n(t){var n=+new Date,o=Math.max(0,16-(n-i));return i=n+o,e.setTimeout(t,o)}var i=0,o=e.requestAnimationFrame||t("RequestAnimationFrame")||n,r=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};s.Util.requestAnimFrame=function(t,i,r,a){return t=s.bind(t,i),r&&o===n?void t():o.call(e,t,a)},s.Util.cancelAnimFrame=function(t){t&&r.call(e,t)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=e,e.prototype=i;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(s.extend(e,t.statics),delete t.statics),t.includes&&(s.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=s.extend({},i.options,t.options)),s.extend(i,t),i._initHooks=[];var r=this;return e.__super__=r.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},s.Class.include=function(t){s.extend(this.prototype,t)},s.Class.mergeOptions=function(t){s.extend(this.prototype.options,t)},s.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var a="_leaflet_events";s.Mixin={},s.Mixin.Events={addEventListener:function(t,e,n){if(s.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,o,r,h,l,u,c,d=this[a]=this[a]||{},p=n&&n!==this&&s.stamp(n);for(t=s.Util.splitWords(t),i=0,o=t.length;i<o;i++)r={action:e,context:n||this},h=t[i],p?(l=h+"_idx",u=l+"_len",c=d[l]=d[l]||{},c[p]||(c[p]=[],d[u]=(d[u]||0)+1),c[p].push(r)):(d[h]=d[h]||[],d[h].push(r));return this},hasEventListeners:function(t){var e=this[a];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[a])return this;if(!t)return this.clearAllEventListeners();if(s.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,o,r,h,l,u,c,d,p,f=this[a],m=n&&n!==this&&s.stamp(n);for(t=s.Util.splitWords(t),i=0,o=t.length;i<o;i++)if(r=t[i],u=r+"_idx",c=u+"_len",d=f[u],e){if(h=m&&d?d[m]:f[r]){for(l=h.length-1;l>=0;l--)h[l].action!==e||n&&h[l].context!==n||(p=h.splice(l,1),p[0].action=s.Util.falseFn);n&&d&&0===h.length&&(delete d[m],f[c]--)}}else delete f[r],delete f[u],delete f[c];return this},clearAllEventListeners:function(){return delete this[a],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,o,r,h,l=s.Util.extend({},e,{type:t,target:this}),u=this[a];if(u[t])for(n=u[t].slice(),i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,l);r=u[t+"_idx"];for(h in r)if(n=r[h].slice())for(i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,l);return this},addOneTimeEventListener:function(t,e,n){if(s.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=s.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},s.Mixin.Events.on=s.Mixin.Events.addEventListener,s.Mixin.Events.off=s.Mixin.Events.removeEventListener,s.Mixin.Events.once=s.Mixin.Events.addOneTimeEventListener,s.Mixin.Events.fire=s.Mixin.Events.fireEvent,function(){var t="ActiveXObject"in e,n=t&&!i.addEventListener,r=navigator.userAgent.toLowerCase(),a=r.indexOf("webkit")!==-1,h=r.indexOf("chrome")!==-1,l=r.indexOf("phantom")!==-1,u=r.indexOf("android")!==-1,c=r.search("android [23]")!==-1,d=r.indexOf("gecko")!==-1,p=typeof orientation!=o+"",f=!e.PointerEvent&&e.MSPointerEvent,m=e.PointerEvent&&e.navigator.pointerEnabled||f,g="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,v=i.documentElement,_=t&&"transition"in v.style,y="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!c,w="MozPerspective"in v.style,b="OTransition"in v.style,L=!e.L_DISABLE_3D&&(_||y||w||b)&&!l,x=!e.L_NO_TOUCH&&!l&&(m||"ontouchstart"in e||e.DocumentTouch&&i instanceof e.DocumentTouch);s.Browser={ie:t,ielt9:n,webkit:a,gecko:d&&!a&&!e.opera&&!t,android:u,android23:c,chrome:h,ie3d:_,webkit3d:y,gecko3d:w,opera3d:b,any3d:L,mobile:p,mobileWebkit:p&&a,mobileWebkit3d:p&&y,mobileOpera:p&&e.opera,touch:x,msPointer:f,pointer:m,retina:g}}(),s.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(t){return this.clone()._add(s.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(s.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=s.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=s.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=s.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(t,e,n){return t instanceof s.Point?t:s.Util.isArray(t)?new s.Point(t[0],t[1]):t===o||null===t?t:new s.Point(t,e,n)},s.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},s.Bounds.prototype={extend:function(t){return t=s.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof s.Point?s.point(t):s.bounds(t),t instanceof s.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=s.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(t,e){return!t||t instanceof s.Bounds?t:new s.Bounds(t,e)},s.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},s.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new s.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},s.DomUtil={get:function(t){return"string"==typeof t?i.getElementById(t):t},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle&&(n=t.currentStyle[e]),(!n||"auto"===n)&&i.defaultView){var o=i.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n},getViewportOffset:function(t){var e,n=0,o=0,r=t,a=i.body,h=i.documentElement;do{if(n+=r.offsetTop||0,o+=r.offsetLeft||0,n+=parseInt(s.DomUtil.getStyle(r,"borderTopWidth"),10)||0,o+=parseInt(s.DomUtil.getStyle(r,"borderLeftWidth"),10)||0,e=s.DomUtil.getStyle(r,"position"),r.offsetParent===a&&"absolute"===e)break;if("fixed"===e){n+=a.scrollTop||h.scrollTop||0,o+=a.scrollLeft||h.scrollLeft||0;break}if("relative"===e&&!r.offsetLeft){var l=s.DomUtil.getStyle(r,"width"),u=s.DomUtil.getStyle(r,"max-width"),c=r.getBoundingClientRect();"none"===l&&"none"===u||(o+=c.left+r.clientLeft),n+=c.top+(a.scrollTop||h.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===a)break;n-=r.scrollTop||0,o-=r.scrollLeft||0,r=r.parentNode}while(r);return new s.Point(o,n)},documentIsLtr:function(){return s.DomUtil._docIsLtrCached||(s.DomUtil._docIsLtrCached=!0,s.DomUtil._docIsLtr="ltr"===s.DomUtil.getStyle(i.body,"direction")),s.DomUtil._docIsLtr},create:function(t,e,n){var o=i.createElement(t);return o.className=e,n&&n.appendChild(o),o},hasClass:function(t,e){if(t.classList!==o)return t.classList.contains(e);var n=s.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==o)for(var n=s.Util.splitWords(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!s.DomUtil.hasClass(t,e)){var a=s.DomUtil._getClass(t);s.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==o?t.classList.remove(e):s.DomUtil._setClass(t,s.Util.trim((" "+s.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===o?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===o?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(o){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var e=i.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},getTranslateString:function(t){var e=s.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){var n=s.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),i=" scale("+t+") ";return n+i},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&s.Browser.any3d?t.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),s.DomUtil.TRANSITION_END="webkitTransition"===s.DomUtil.TRANSITION||"OTransition"===s.DomUtil.TRANSITION?s.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in i)s.extend(s.DomUtil,{disableTextSelection:function(){s.DomEvent.on(e,"selectstart",s.DomEvent.preventDefault)},enableTextSelection:function(){s.DomEvent.off(e,"selectstart",s.DomEvent.preventDefault)}});else{var t=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.extend(s.DomUtil,{disableTextSelection:function(){if(t){var e=i.documentElement.style;this._userSelect=e[t],e[t]="none"}},enableTextSelection:function(){t&&(i.documentElement.style[t]=this._userSelect,delete this._userSelect)}})}s.extend(s.DomUtil,{disableImageDrag:function(){s.DomEvent.on(e,"dragstart",s.DomEvent.preventDefault)},enableImageDrag:function(){s.DomEvent.off(e,"dragstart",s.DomEvent.preventDefault)}})}(),s.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==o&&(this.alt=parseFloat(n))},s.extend(s.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),s.LatLng.prototype={equals:function(t){if(!t)return!1;t=s.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=s.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+s.Util.formatNum(this.lat,t)+", "+s.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=s.latLng(t);var e=6378137,n=s.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,o=(t.lng-this.lng)*n,r=this.lat*n,a=t.lat*n,h=Math.sin(i/2),l=Math.sin(o/2),u=h*h+l*l*Math.cos(r)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(n<t||n===e?e:t),new s.LatLng(this.lat,n)}},s.latLng=function(t,e){return t instanceof s.LatLng?t:s.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new s.LatLng(t[0],t[1],t[2]):null:t===o||null===t?t:"object"==typeof t&&"lat"in t?new s.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===o?null:new s.LatLng(t,e)},s.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},s.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=s.latLng(t);return t=null!==e?e:s.latLngBounds(t),t instanceof s.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new s.LatLng(t.lat,t.lng),this._northEast=new s.LatLng(t.lat,t.lng)):t instanceof s.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new s.LatLngBounds(new s.LatLng(e.lat-i,e.lng-o),new s.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof s.LatLng?s.latLng(t):s.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof s.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=s.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=s.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(t,e){return!t||t instanceof s.LatLngBounds?t:new s.LatLngBounds(t,e)},s.Projection={},s.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=s.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=t.lng*e,r=i*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new s.Point(o,r)},unproject:function(t){var e=s.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new s.LatLng(i,n)}},s.Projection.LonLat={project:function(t){return new s.Point(t.lng,t.lat)},unproject:function(t){return new s.LatLng(t.y,t.x)}},s.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return s.point(e,e)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,(-1),0),scale:function(t){return Math.pow(2,t)}}),s.CRS.EPSG3857=s.extend({},s.CRS,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:new s.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/360,.5,-1/360,.5)}),s.Map=s.Class.extend({includes:s.Mixin.Events,options:{crs:s.CRS.EPSG3857,fadeAnimation:s.DomUtil.TRANSITION&&!s.Browser.android23,trackResize:!0,markerZoomAnimation:s.DomUtil.TRANSITION&&s.Browser.any3d},initialize:function(t,e){e=s.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==o&&this.setView(s.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===o?this.getZoom():e,this._resetView(s.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof s.Point?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/i),h=this.containerPointToLatLng(o.add(a));return this.setView(h,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():s.latLngBounds(t);var n=s.point(e.paddingTopLeft||e.padding||[0,0]),i=s.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o=e.maxZoom?Math.min(e.maxZoom,o):o;var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),h=this.project(t.getNorthEast(),o),l=this.unproject(a.add(h).divideBy(2).add(r),o);return this.setView(l,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(s.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=s.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=s.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=s.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{
layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return!!t&&s.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=s.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=o}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new s.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===o?this._layersMinZoom===o?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===o?this._layersMaxZoom===o?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=s.latLngBounds(t);var i,o=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),a=this.getSize(),h=t.getNorthWest(),l=t.getSouthEast(),u=!0;n=s.point(n||[0,0]);do o++,i=this.project(l,o).subtract(this.project(h,o)).add(n),u=e?i.x<a.x||i.y<a.y:a.contains(i);while(u&&o<=r);return u&&e?null:e?o:o-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new s.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new s.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===o?this._zoom:e,this.options.crs.latLngToPoint(s.latLng(t),e)},unproject:function(t,e){return e=e===o?this._zoom:e,this.options.crs.pointToLatLng(s.point(t),e)},layerPointToLatLng:function(t){var e=s.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(s.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return s.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return s.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(s.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(t)))},mouseEventToContainerPoint:function(t){return s.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=s.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;s.DomUtil.addClass(t,"leaflet-container"+(s.Browser.touch?" leaflet-touch":"")+(s.Browser.retina?" leaflet-retina":"")+(s.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=s.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(s.DomUtil.addClass(t.markerPane,e),s.DomUtil.addClass(t.shadowPane,e),s.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return s.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?s.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var o=this._zoom!==e;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-(1/0),i=this._getZoomSpan();for(t in this._zoomBoundLayers){var r=this._zoomBoundLayers[t];isNaN(r.options.minZoom)||(e=Math.min(e,r.options.minZoom)),isNaN(r.options.maxZoom)||(n=Math.max(n,r.options.maxZoom))}t===o?this._layersMaxZoom=this._layersMinZoom=o:(this._layersMaxZoom=n,this._layersMinZoom=e),i!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(s.DomEvent){t=t||"on",s.DomEvent[t](this._container,"click",this._onMouseClick,this);var n,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=o.length;n<i;n++)s.DomEvent[t](this._container,o[n],this._fireMouseEvent,this);this.options.trackResize&&s.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||s.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!s.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&s.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(e,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new s.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new s.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),o=this.project(e.getSouthEast(),n).subtract(t.max),r=this._rebound(i.x,-o.x),a=this._rebound(i.y,-o.y);return new s.Point(r,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),s.map=function(t,e){return new s.Map(t,e)},s.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=s.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=this.R_MAJOR,r=this.R_MINOR,a=t.lng*e*o,h=i*e,l=r/o,u=Math.sqrt(1-l*l),c=u*Math.sin(h);c=Math.pow((1-c)/(1+c),.5*u);var d=Math.tan(.5*(.5*Math.PI-h))/c;return h=-o*Math.log(d),new s.Point(a,h)},unproject:function(t){for(var e,n=s.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,r=t.x*n/i,a=o/i,h=Math.sqrt(1-a*a),l=Math.exp(-t.y/i),u=Math.PI/2-2*Math.atan(l),c=15,d=1e-7,p=c,f=.1;Math.abs(f)>d&&--p>0;)e=h*Math.sin(u),f=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*h))-u,u+=f;return new s.LatLng(u*n,r)}},s.CRS.EPSG3395=s.extend({},s.CRS,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:function(){var t=s.Projection.Mercator,e=t.R_MAJOR,n=.5/(Math.PI*e);return new s.Transformation(n,.5,(-n),.5)}()}),s.TileLayer=s.Class.extend({includes:s.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:s.Browser.mobile,updateWhenIdle:s.Browser.mobile},initialize:function(t,e){e=s.setOptions(this,e),e.detectRetina&&s.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=s.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=s.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==o&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,r=t.children,s=-e(1/0,-(1/0));for(i=0,o=r.length;i<o;i++)r[i]!==this._container&&(n=parseInt(r[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(s.Browser.ielt9)for(t in e)s.DomUtil.setOpacity(e[t],this.options.opacity);else s.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=s.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=s.DomUtil.create("div",e,this._container),this._tileContainer=s.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&e>n&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=s.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var e,n,o,r=[],a=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(n=t.min.x;n<=t.max.x;n++)o=new s.Point(n,e),this._tileShouldBeLoaded(o)&&r.push(o);var h=r.length;if(0!==h){r.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var l=i.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=h,n=0;n<h;n++)this._addTile(r[n],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=this._getTileSize(),o=t.multiplyBy(i),r=o.add([i,i]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(s.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),s.Browser.android||(e.onload=null,e.src=s.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();s.DomUtil.setPosition(i,n,s.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return s.Util.template(this._url,s.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=s.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity!==o&&s.DomUtil.setOpacity(t,this.options.opacity),s.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&s.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(s.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==s.Util.emptyImageUrl&&(s.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),s.tileLayer=function(t,e){return new s.TileLayer(t,e)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=s.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;e.detectRetina&&s.Browser.retina?n.width=n.height=2*i:n.width=n.height=i;for(var o in e)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=e[o]);this.wmsParams=n,s.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),o=i.add([n,n]),r=this._crs.project(e.unproject(i,t.z)),a=this._crs.project(e.unproject(o,t.z)),h=this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[a.y,r.x,r.y,a.x].join(","):[r.x,a.y,a.x,r.y].join(","),l=s.Util.template(this._url,{s:this._getSubdomain(t)});return l+s.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+h},setParams:function(t,e){return s.extend(this.wmsParams,t),e||this.redraw(),this}}),s.tileLayer.wms=function(t,e){return new s.TileLayer.WMS(t,e)},s.TileLayer.Canvas=s.TileLayer.extend({options:{async:!1},initialize:function(t){s.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=s.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=s.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),s.tileLayer.canvas=function(t){return new s.TileLayer.Canvas(t)},s.ImageOverlay=s.Class.extend({includes:s.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=s.latLngBounds(e),s.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&s.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=s.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&s.Browser.any3d?s.DomUtil.addClass(this._image,"leaflet-zoom-animated"):s.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),s.extend(this._image,{galleryimg:"no",onselectstart:s.Util.falseFn,onmousemove:s.Util.falseFn,onload:s.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(o,t.zoom,t.center),h=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(a),l=a._add(h._multiplyBy(.5*(1-1/i)));n.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);s.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(t,e,n){return new s.ImageOverlay(t,e,n)},s.Icon=s.Class.extend({options:{className:""},initialize:function(t){s.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n,i=this.options,o=s.point(i[e+"Size"]);n="shadow"===e?s.point(i.shadowAnchor||i.iconAnchor):s.point(i.iconAnchor),!n&&o&&(n=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||i.createElement("img"),e.src=t,e},_getIconUrl:function(t){return s.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),s.icon=function(t){return new s.Icon(t)},s.Icon.Default=s.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];s.Browser.retina&&"icon"===t&&(t+="-2x");var n=s.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),s.Icon.Default.imagePath=function(){var t,e,n,o,r,s=i.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=s.length;t<e;t++)if(n=s[t].src,o=n.match(a))return r=n.split(a)[0],(r?r+"/":"")+"images"}(),s.Marker=s.Class.extend({includes:s.Mixin.Events,options:{icon:new s.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){s.setOptions(this,e),this._latlng=s.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",o=t.icon.createIcon(this._icon),r=!1;o!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(o.title=t.title),t.alt&&(o.alt=t.alt)),s.DomUtil.addClass(o,i),t.keyboard&&(o.tabIndex="0"),this._icon=o,this._initInteraction(),t.riseOnHover&&s.DomEvent.on(o,"mouseover",this._bringToFront,this).on(o,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),h=!1;a!==this._shadow&&(this._removeShadow(),h=!0),a&&s.DomUtil.addClass(a,i),this._shadow=a,t.opacity<1&&this._updateOpacity();var l=this._map._panes;r&&l.markerPane.appendChild(this._icon),a&&h&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&s.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){s.DomUtil.setPosition(this._icon,t),this._shadow&&s.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];s.DomUtil.addClass(t,"leaflet-clickable"),s.DomEvent.on(t,"click",this._onMouseClick,this),s.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)s.DomEvent.on(t,e[n],this._fireMouseEvent,this);s.Handler.MarkerDrag&&(this.dragging=new s.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&s.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&s.DomEvent.preventDefault(t),"mousedown"!==t.type?s.DomEvent.stopPropagation(t):s.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){s.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&s.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),s.marker=function(t,e){return new s.Marker(t,e)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:i.createElement("div"),n=this.options;return n.html!==!1?e.innerHTML=n.html:e.innerHTML="",n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),s.divIcon=function(t){return new s.DivIcon(t)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Popup=s.Class.extend({includes:s.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){s.setOptions(this,t),this._source=e,this._animated=s.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&s.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&s.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),s.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&s.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=s.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=s.DomUtil.create("a",e+"-close-button",i),t.href="#close",t.innerHTML="&#215;",s.DomEvent.disableClickPropagation(t),s.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=s.DomUtil.create("div",e+"-content-wrapper",i);s.DomEvent.disableClickPropagation(o),this._contentNode=s.DomUtil.create("div",e+"-content",o),s.DomEvent.disableScrollPropagation(this._contentNode),s.DomEvent.on(o,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",e+"-tip-container",i),this._tip=s.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);
this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",s.DomUtil.addClass(t,r)):s.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=s.point(this.options.offset);e&&s.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);s.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new s.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(s.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(i),r=s.point(this.options.autoPanPadding),a=s.point(this.options.autoPanPaddingTopLeft||r),h=s.point(this.options.autoPanPaddingBottomRight||r),l=t.getSize(),u=0,c=0;o.x+n+h.x>l.x&&(u=o.x+n-l.x+h.x),o.x-u-a.x<0&&(u=o.x-a.x),o.y+e+h.y>l.y&&(c=o.y+e-l.y+h.y),o.y-c-a.y<0&&(c=o.y-a.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),s.DomEvent.stop(t)}}),s.popup=function(t,e){return new s.Popup(t,e)},s.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof s.Popup)){var i=t;t=new s.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),s.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=s.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(s.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=s.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof s.Popup?(s.setOptions(t,e),this._popup=t,t._source=this):this._popup=new s.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),s.LayerGroup=s.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s.stamp(t)}}),s.layerGroup=function(t){return new s.LayerGroup(t)},s.FeatureGroup=s.LayerGroup.extend({includes:s.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new s.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof s.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=s.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),s.featureGroup=function(t){return new s.FeatureGroup(t)},s.Path=s.Class.extend({includes:[s.Mixin.Events],statics:{CLIP_PADDING:function(){var t=s.Browser.mobile?1280:2e3,n=(t/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){s.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,s.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return s.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),s.Map.include({_updatePathViewport:function(){var t=s.Path.CLIP_PADDING,e=this.getSize(),n=s.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),o=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new s.Bounds(i,o)}}),s.Path.SVG_NS="http://www.w3.org/2000/svg",s.Browser.svg=!(!i.createElementNS||!i.createElementNS(s.Path.SVG_NS,"svg").createSVGRect),s.Path=s.Path.extend({statics:{SVG:s.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return i.createElementNS(s.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&s.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!s.Browser.svg&&s.Browser.vml||s.DomUtil.addClass(this._path,"leaflet-clickable"),s.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)s.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),o=e.layerPointToLatLng(i);this.fire(t.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&s.DomEvent.preventDefault(t),"mousemove"!==t.type&&s.DomEvent.stopPropagation(t)}}}),s.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=s.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&s.Browser.any3d?(s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,o=n.y-e.y,r=this._pathRoot,a=this._panes.overlayPane;s.Browser.mobileWebkit&&a.removeChild(r),s.DomUtil.setPosition(r,e),r.setAttribute("width",i),r.setAttribute("height",o),r.setAttribute("viewBox",[e.x,e.y,i,o].join(" ")),s.Browser.mobileWebkit&&a.appendChild(r)}}}),s.Path.include({bindPopup:function(t,e){return t instanceof s.Popup?this._popup=t:(this._popup&&!e||(this._popup=new s.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),s.Browser.vml=!s.Browser.svg&&function(){try{var t=i.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),s.Path=s.Browser.svg||!s.Browser.vml?s.Path:s.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return i.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return i.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return i.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");s.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&s.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=s.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),s.Map.include(s.Browser.svg||!s.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=i.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),s.Browser.canvas=function(){return!!i.createElement("canvas").getContext}(),s.Path=s.Path.SVG&&!e.L_PREFER_CANVAS||!s.Browser.canvas?s.Path:s.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return s.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!s.Path._updateRequest&&(s.Path._updateRequest=s.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){s.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,n,i,o,r;for(this._ctx.beginPath(),t=0,n=this._parts.length;t<n;t++){for(e=0,i=this._parts[t].length;e<i;e++)o=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](o.x,o.y);this instanceof s.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),s.Map.include(s.Path.SVG&&!e.L_PREFER_CANVAS||!s.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=i.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;s.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),s.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=typeof Uint8Array!=o+""?Uint8Array:Array,r=new i(n);r[0]=r[n-1]=1,this._simplifyDPStep(t,r,e,0,n-1);var s,a=[];for(s=0;s<n;s++)r[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,n,i,o){var r,s,a,h=0;for(s=i+1;s<=o-1;s++)a=this._sqClosestPointOnSegment(t[s],t[i],t[o],!0),a>h&&(r=s,h=a);h>n&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i){var o,r,s,a=i?this._lastCode:this._getBitCode(t,n),h=this._getBitCode(e,n);for(this._lastCode=h;;){if(!(a|h))return[t,e];if(a&h)return!1;o=a||h,r=this._getEdgeIntersection(t,e,o,n),s=this._getBitCode(r,n),o===a?(t=r,a=s):(e=r,h=s)}},_getEdgeIntersection:function(t,e,n,i){var o=e.x-t.x,r=e.y-t.y,a=i.min,h=i.max;return 8&n?new s.Point(t.x+o*(h.y-t.y)/r,h.y):4&n?new s.Point(t.x+o*(a.y-t.y)/r,a.y):2&n?new s.Point(h.x,t.y+r*(h.x-t.x)/o):1&n?new s.Point(a.x,t.y+r*(a.x-t.x)/o):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,r=e.x,a=e.y,h=n.x-r,l=n.y-a,u=h*h+l*l;return u>0&&(o=((t.x-r)*h+(t.y-a)*l)/u,o>1?(r=n.x,a=n.y):o>0&&(r+=h*o,a+=l*o)),h=t.x-r,l=t.y-a,i?h*h+l*l:new s.Point(r,a)}},s.Polyline=s.Path.extend({initialize:function(t,e){s.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";t<e;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(s.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,o=this._parts,r=null,a=0,h=o.length;a<h;a++)for(var l=o[a],u=1,c=l.length;u<c;u++){e=l[u-1],n=l[u];var d=s.LineUtil._sqClosestPointOnSegment(t,e,n,!0);d<i&&(i=d,r=s.LineUtil._sqClosestPointOnSegment(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getBounds:function(){return new s.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,o=e?t:[];for(n=0,i=t.length;n<i;n++){if(s.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;o[n]=s.latLng(t[n])}return o},_initEvents:function(){s.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=s.Path.VML,i=0,o=t.length,r="";i<o;i++)e=t[i],n&&e._round(),r+=(i?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,n,i=this._originalPoints,o=i.length;if(this.options.noClip)return void(this._parts=[i]);this._parts=[];var r=this._parts,a=this._map._pathViewport,h=s.LineUtil;for(t=0,e=0;t<o-1;t++)n=h.clipSegment(i[t],i[t+1],a,t),n&&(r[e]=r[e]||[],r[e].push(n[0]),n[1]===i[t+1]&&t!==o-2||(r[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=s.LineUtil,n=0,i=t.length;n<i;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),s.Path.prototype._updatePath.call(this))}}),s.polyline=function(t,e){return new s.Polyline(t,e)},s.PolyUtil={},s.PolyUtil.clipPolygon=function(t,e){var n,i,o,r,a,h,l,u,c,d=[1,4,2,8],p=s.LineUtil;for(i=0,l=t.length;i<l;i++)t[i]._code=p._getBitCode(t[i],e);for(r=0;r<4;r++){for(u=d[r],n=[],i=0,l=t.length,o=l-1;i<l;o=i++)a=t[i],h=t[o],a._code&u?h._code&u||(c=p._getEdgeIntersection(h,a,u,e),c._code=p._getBitCode(c,e),n.push(c)):(h._code&u&&(c=p._getEdgeIntersection(h,a,u,e),c._code=p._getBitCode(c,e),n.push(c)),n.push(a));t=n}return t},s.Polygon=s.Polyline.extend({options:{fill:!0},initialize:function(t,e){s.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;e<n;e++)i=this._holes[e]=this._convertLatLngs(this._holes[e]),i[0].equals(i[i.length-1])&&i.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(s.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,i;for(t=0,n=this._holes.length;t<n;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;e<i;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):s.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;n<i;n++){var o=s.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){var e=s.Polyline.prototype._getPathPartStr.call(this,t);return e+(s.Browser.svg?"z":"x")}}),s.polygon=function(t,e){return new s.Polygon(t,e)},function(){function t(t){return s.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){n<i?t.setLatLngs(e[n++]):this.removeLayer(t)},this);n<i;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}s.MultiPolyline=t(s.Polyline),s.MultiPolygon=t(s.Polygon),s.multiPolyline=function(t,e){return new s.MultiPolyline(t,e)},s.multiPolygon=function(t,e){return new s.MultiPolygon(t,e)}}(),s.Rectangle=s.Polygon.extend({initialize:function(t,e){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=s.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),s.rectangle=function(t,e){return new s.Rectangle(t,e)},s.Circle=s.Path.extend({initialize:function(t,e,n){s.Path.prototype.initialize.call(this,n),this._latlng=s.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=s.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new s.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":s.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(s.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),s.circle=function(t,e,n){return new s.Circle(t,e,n)},s.CircleMarker=s.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){s.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){s.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return s.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),s.circleMarker=function(t,e){return new s.CircleMarker(t,e)},s.Polyline.include(s.Path.CANVAS?{_containsPoint:function(t,e){var n,i,o,r,a,h,l,u=this.options.weight/2;for(s.Browser.touch&&(u+=10),n=0,r=this._parts.length;n<r;n++)for(l=this._parts[n],i=0,a=l.length,o=a-1;i<a;o=i++)if((e||0!==i)&&(h=s.LineUtil.pointToSegmentDistance(t,l[o],l[i]),h<=u))return!0;return!1}}:{}),s.Polygon.include(s.Path.CANVAS?{_containsPoint:function(t){var e,n,i,o,r,a,h,l,u=!1;if(s.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,h=this._parts.length;o<h;o++)for(e=this._parts[o],r=0,l=e.length,a=l-1;r<l;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u}}:{}),s.Circle.include(s.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),s.CircleMarker.include(s.Path.CANVAS?{_updateStyle:function(){s.Path.prototype._updateStyle.call(this)}}:{}),s.GeoJSON=s.FeatureGroup.extend({initialize:function(t,e){s.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=s.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)i=o[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[e]);return this}var r=this.options;if(!r.filter||r.filter(t)){var a=s.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return a.feature=s.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(s.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),s.extend(s.GeoJSON,{geometryToLayer:function(t,e,n,i){var o,r,a,h,l="Feature"===t.type?t.geometry:t,u=l.coordinates,c=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return o=n(u),e?e(t,o):new s.Marker(o);case"MultiPoint":for(a=0,h=u.length;a<h;a++)o=n(u[a]),c.push(e?e(t,o):new s.Marker(o));return new s.FeatureGroup(c);case"LineString":return r=this.coordsToLatLngs(u,0,n),new s.Polyline(r,i);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(u,1,n),new s.Polygon(r,i);case"MultiLineString":return r=this.coordsToLatLngs(u,1,n),new s.MultiPolyline(r,i);case"MultiPolygon":return r=this.coordsToLatLngs(u,2,n),new s.MultiPolygon(r,i);case"GeometryCollection":for(a=0,h=l.geometries.length;a<h;a++)c.push(this.geometryToLayer({geometry:l.geometries[a],type:"Feature",properties:t.properties},e,n,i));return new s.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new s.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,o,r,s=[];for(o=0,r=t.length;o<r;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),s.push(i);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==o&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(s.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?s.extend({},t.feature,{geometry:e}):s.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var h={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(h),s.Circle.include(h),s.CircleMarker.include(h),s.Polyline.include({toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"LineString",coordinates:s.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),s.Polygon.include({toGeoJSON:function(){var t,e,n,i=[s.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)n=s.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),i.push(n);return s.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:t,coordinates:e})}}s.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),s.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),s.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var o=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),i.push(o?e.geometry:s.GeoJSON.asFeature(e)))}),o?s.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),s.geoJson=function(t,e){return new s.GeoJSON(t,e)},s.DomEvent={addListener:function(t,e,n,i){var o,r,a,h=s.stamp(n),l="_leaflet_"+e+h;return t[l]?this:(o=function(e){return n.call(i||t,e||s.DomEvent._getEvent())},s.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,o,h):(s.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,o,h),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(r=o,a="mouseenter"===e?"mouseover":"mouseout",o=function(e){if(s.DomEvent._checkMouse(t,e))return r(e)},t.addEventListener(a,o,!1)):"click"===e&&s.Browser.android?(r=o,o=function(t){return s.DomEvent._filterClick(t,r)},t.addEventListener(e,o,!1)):t.addEventListener(e,o,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[l]=o,this))},removeListener:function(t,e,n){var i=s.stamp(n),o="_leaflet_"+e+i,r=t[o];
return r?(s.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):s.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,s.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=s.DomEvent.stopPropagation;return s.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=s.DomEvent.stopPropagation,n=s.Draggable.START.length-1;n>=0;n--)s.DomEvent.on(t,s.Draggable.START[n],e);return s.DomEvent.on(t,"click",s.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return s.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new s.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new s.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){s.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var t=e.event;if(!t)for(var n=arguments.callee.caller;n&&(t=n.arguments[0],!t||e.Event!==t.constructor);)n=n.caller;return t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=s.DomEvent._lastClick&&n-s.DomEvent._lastClick;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?void s.DomEvent.stop(t):(s.DomEvent._lastClick=n,e(t))}},s.DomEvent.on=s.DomEvent.addListener,s.DomEvent.off=s.DomEvent.removeListener,s.Draggable=s.Class.extend({includes:s.Mixin.Events,statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.on(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.off(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(s.DomEvent.stopPropagation(t),!s.Draggable._disabled&&(s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new s.Point(e.clientX,e.clientY),this._startPos=this._newPos=s.DomUtil.getPosition(this._element),s.DomEvent.on(i,s.Draggable.MOVE[t.type],this._onMove,this).on(i,s.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new s.Point(e.clientX,e.clientY),o=n.subtract(this._startPoint);(o.x||o.y)&&(s.Browser.touch&&Math.abs(o.x)+Math.abs(o.y)<3||(s.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(o),s.DomUtil.addClass(i.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,s.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){s.DomUtil.removeClass(i.body,"leaflet-dragging"),this._lastTarget&&(s.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in s.Draggable.MOVE)s.DomEvent.off(i,s.Draggable.MOVE[t],this._onMove).off(i,s.Draggable.END[t],this._onUp);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&this._moving&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),s.Handler=s.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:s.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new s.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,h=n.easeLinearity,l=r.multiplyBy(h/a),u=l.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),d=l.multiplyBy(c/u),p=c/(n.inertiaDeceleration*h),f=d.multiplyBy(-p/2).round();f.x&&f.y?(f=e._limitOffset(f,e.options.maxBounds),s.Util.requestAnimFrame(function(){e.panBy(f,{duration:p,easeLinearity:h,noMoveStart:!0})})):e.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),s.DomEvent.on(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),s.DomEvent.off(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=s.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),n),s.DomEvent.preventDefault(t),s.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){function o(t){var e;if(s.Browser.pointer?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(a||n);h=t.touches?t.touches[0]:t,l=i>0&&i<=u,a=n}}function r(t){if(s.Browser.pointer){var n=f.indexOf(t.pointerId);if(n===-1)return;f.splice(n,1)}if(l){if(s.Browser.pointer){var i,o={};for(var r in h)i=h[r],"function"==typeof i?o[r]=i.bind(h):o[r]=i;h=o}h.type="dblclick",e(h),a=null}}var a,h,l=!1,u=250,c="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[c+d+n]=o,t[c+p+n]=r;var m=s.Browser.pointer?i.documentElement:t;return t.addEventListener(d,o,!1),m.addEventListener(p,r,!1),s.Browser.pointer&&m.addEventListener(s.DomEvent.POINTER_CANCEL,r,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+e],!1),(s.Browser.pointer?i.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+e],!1),s.Browser.pointer&&i.documentElement.removeEventListener(s.DomEvent.POINTER_CANCEL,t[n+this._touchend+e],!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,n,o){var r="_leaflet_",a=this._pointers,h=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&s.DomEvent.preventDefault(t);for(var e=!1,i=0;i<a.length;i++)if(a[i].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],n(t)};if(t[r+"touchstart"+o]=h,t.addEventListener(this.POINTER_DOWN,h,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};i.documentElement.addEventListener(this.POINTER_UP,l,!1),i.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s[e]=t;break}t.touches=s.slice(),t.changedTouches=[t],n(t)}}var r="_leaflet_",s=this._pointers;return t[r+"touchmove"+i]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,n,i){var o="_leaflet_",r=this._pointers,s=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}t.touches=r.slice(),t.changedTouches=[t],n(t)};return t[o+"touchend"+i]=s,t.addEventListener(this.POINTER_UP,s,!1),t.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(t,e,n){var i="_leaflet_",o=t[i+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]),r=e._getCenterLayerPoint();this._startCenter=n.add(o)._divideBy(2),this._startDist=n.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=r.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),s.DomEvent.on(i,"touchmove",this._onTouchMove,this).on(i,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1)||(this._moved||(s.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),s.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,s.DomUtil.removeClass(t._mapPane,"leaflet-touching"),s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(i,"touchmove",this._onTouchMove).off(i,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),o=t.getZoom(),r=t.getScaleZoom(this._scale)-o,a=r>0?Math.ceil(r):Math.floor(r),h=t._limitZoom(o+a),l=t.getZoomScale(h)/this._scale;t._animateZoom(n,h,e,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(s.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new s.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&s.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),s.DomEvent.on(i,"touchmove",this._onMove,this).on(i,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),s.DomEvent.off(i,"touchmove",this._onMove,this).off(i,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&s.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new s.Point(e.clientX,e.clientY)},_simulateEvent:function(t,n){var o=i.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(t,!0,!0,e,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!(!t.shiftKey||1!==t.which&&1!==t.button)&&(s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void s.DomEvent.on(i,"mousemove",this._onMouseMove,this).on(i,"mouseup",this._onMouseUp,this).on(i,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=s.DomUtil.create("div","leaflet-zoom-box",this._pane),s.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),o=i.subtract(e),r=new s.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));s.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(i,"mousemove",this._onMouseMove).off(i,"mouseup",this._onMouseUp).off(i,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new s.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;t.tabIndex===-1&&(t.tabIndex="0"),s.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;s.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var t=i.body,n=i.documentElement,o=t.scrollTop||n.scrollTop,r=t.scrollLeft||n.scrollLeft;this._map._container.focus(),e.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){s.DomEvent.on(i,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(i,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}s.DomEvent.stop(t)}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),s.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),s.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=s.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&s.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(t){s.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return s.DomUtil.addClass(e,"leaflet-control"),n.indexOf("bottom")!==-1?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),s.control=function(t){return new s.Control(t)},s.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,o){var r=n+t+" "+n+o;e[t+o]=s.DomUtil.create("div",r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=s.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=s.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,o,r){var a=s.DomUtil.create("a",n,i);a.innerHTML=t,a.href="#",a.title=e;var h=s.DomEvent.stopPropagation;return s.DomEvent.on(a,"click",h).on(a,"mousedown",h).on(a,"dblclick",h).on(a,"click",s.DomEvent.preventDefault).on(a,"click",o,r).on(a,"click",this._refocusOnMap,r),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";s.DomUtil.removeClass(this._zoomInButton,e),s.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&s.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&s.DomUtil.addClass(this._zoomInButton,e)}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(t){return new s.Control.Zoom(t)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){s.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=s.DomUtil.create("div","leaflet-control-attribution"),s.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new s.Control.Attribution).addTo(this))}),s.control.attribution=function(t){return new s.Control.Attribution(t)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=s.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=s.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=s.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),i=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),r=this.options,s=0;o.x>0&&(s=i*(r.maxWidth/o.x)),this._updateScales(r,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,r=this._iScale;o>5280?(e=o/5280,n=this._getRoundNum(e),r.style.width=this._getScaleWidth(n/e)+"px",r.innerHTML=n+" mi"):(i=this._getRoundNum(o),r.style.width=this._getScaleWidth(i/o)+"px",r.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),s.control.scale=function(t){return new s.Control.Scale(t)},s.Control.Layers=s.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){s.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=s.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=s.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(e,"click",s.DomEvent.stopPropagation):s.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=s.DomUtil.create("form",t+"-list");if(this.options.collapsed){s.Browser.android||s.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=s.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",s.Browser.touch?s.DomEvent.on(i,"click",s.DomEvent.stop).on(i,"click",this._expand,this):s.DomEvent.on(i,"focus",this._expand,this),s.DomEvent.on(n,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=s.DomUtil.create("div",t+"-base",n),this._separator=s.DomUtil.create("div",t+"-separator",n),this._overlaysList=s.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=s.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[s.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(n+=' checked="checked"'),n+="/>";var o=i.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var e,n=i.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=i.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=s.stamp(t.layer),s.DomEvent.on(e,"click",this._onInputClick,this);var r=i.createElement("span");r.innerHTML=" "+t.name,n.appendChild(e),n.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),n},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;t<o;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){s.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),s.control.layers=function(t,e,n){return new s.Control.Layers(t,e,n)},s.PosAnimation=s.Class.extend({includes:s.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[s.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",
s.DomEvent.on(t,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),s.DomUtil.setPosition(t,e),s.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(s.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(s.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),s.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,n,i,o=this._el,r=e.getComputedStyle(o);if(s.Browser.any3d){if(i=r[s.DomUtil.TRANSFORM].match(this._transformRe),!i)return;t=parseFloat(i[1]),n=parseFloat(i[2])}else t=parseFloat(r.left),n=parseFloat(r.top);return new s.Point(t,n,(!0))},_onTransitionEnd:function(){s.DomEvent.off(this._el,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[s.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),s.Map.include({setView:function(t,e,n){if(e=e===o?this._zoom:this._limitZoom(e),t=this._limitCenter(s.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==o&&(n.zoom=s.extend({animate:n.animate},n.zoom),n.pan=s.extend({animate:n.animate},n.pan));var i=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=s.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){s.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)}}),s.PosAnimation=s.DomUtil.TRANSITION?s.PosAnimation:s.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=s.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));s.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),s.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),s.DomUtil.TRANSITION&&s.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.android23&&!s.Browser.mobileOpera,this._zoomAnimated&&s.DomEvent.on(this._mapPane,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),s.Map.include(s.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),r=this._getCenterLayerPoint()._add(o);return!(n.animate!==!0&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,i,null,!0),!0)},_animateZoom:function(t,e,n,i,o,r,a){a||(this._animatingZoom=!0),s.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,s.Draggable&&(s.Draggable._disabled=!0),s.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:o,backwards:r}),setTimeout(s.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,s.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),s.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),s.Draggable&&(s.Draggable._disabled=!1)},this))}}:{}),s.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=s.DomUtil.TRANSFORM,i=t.delta?s.DomUtil.getTranslateString(t.delta):e.style[n],o=s.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),s.Util.falseFn(e.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[s.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&n>.5&&i<.5?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[s.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;e<n;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=o.length;e<n;e++)i=o[e],i.complete||(i.onload=s.Util.falseFn,i.onerror=s.Util.falseFn,i.src=s.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),s.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=s.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s.bind(this._handleGeolocationResponse,this),n=s.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new s.LatLng(e,n),o=180*t.coords.accuracy/40075017,r=o/Math.cos(s.LatLng.DEG_TO_RAD*e),a=s.latLngBounds([e-o,n-r],[e+o,n+r]),h=this._locateOptions;if(h.setView){var l=Math.min(this.getBoundsZoom(a),h.maxZoom);this.setView(i,l)}var u={latlng:i,bounds:a,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document)},{}],8:[function(e,n,i){(function(e){(function(){function o(t,e){return t.set(e[0],e[1]),t}function r(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,i){for(var o=-1,r=null==t?0:t.length;++o<r;){var s=t[o];e(i,s,n(s),t)}return i}function h(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function u(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function c(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s)}return r}function d(t,e){var n=null==t?0:t.length;return!!n&&x(t,e,0)>-1}function p(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function f(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function m(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function g(t,e,n,i){var o=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function v(t,e,n,i){var o=null==t?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function _(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function y(t){return t.split("")}function w(t){return t.match(Ze)||[]}function b(t,e,n){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=n,!1}),i}function L(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function x(t,e,n){return e===e?J(t,e,n):L(t,E,n)}function k(t,e,n,i){for(var o=n-1,r=t.length;++o<r;)if(i(t[o],e))return o;return-1}function E(t){return t!==t}function M(t,e){var n=null==t?0:t.length;return n?D(t,e)/n:zt}function P(t){return function(e){return null==e?it:e[t]}}function C(t){return function(e){return null==t?it:t[e]}}function T(t,e,n,i,o){return o(t,function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)}),n}function S(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function D(t,e){for(var n,i=-1,o=t.length;++i<o;){var r=e(t[i]);r!==it&&(n=n===it?r:n+r)}return n}function A(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function O(t,e){return f(e,function(e){return[e,t[e]]})}function I(t){return function(e){return t(e)}}function R(t,e){return f(e,function(e){return t[e]})}function z(t,e){return t.has(e)}function U(t,e){for(var n=-1,i=t.length;++n<i&&x(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length;n--&&x(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function F(t){return"\\"+ei[t]}function j(t,e){return null==t?it:t[e]}function Z(t){return Vn.test(t)}function W(t){return qn.test(t)}function H(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function V(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var s=t[n];s!==e&&s!==ut||(t[n]=ut,r[o++]=n)}return r}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function J(t,e,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}function K(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function Q(t){return Z(t)?tt(t):_i(t)}function X(t){return Z(t)?et(t):y(t)}function tt(t){for(var e=Hn.lastIndex=0;Hn.test(t);)++e;return e}function et(t){return t.match(Hn)||[]}function nt(t){return t.match(Gn)||[]}var it,ot="4.17.4",rt=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",ht="__lodash_hash_undefined__",lt=500,ut="__lodash_placeholder__",ct=1,dt=2,pt=4,ft=1,mt=2,gt=1,vt=2,_t=4,yt=8,wt=16,bt=32,Lt=64,xt=128,kt=256,Et=512,Mt=30,Pt="...",Ct=800,Tt=16,St=1,Dt=2,At=3,Ot=1/0,It=9007199254740991,Rt=1.7976931348623157e308,zt=NaN,Ut=4294967295,Bt=Ut-1,Nt=Ut>>>1,Ft=[["ary",xt],["bind",gt],["bindKey",vt],["curry",yt],["curryRight",wt],["flip",Et],["partial",bt],["partialRight",Lt],["rearg",kt]],jt="[object Arguments]",Zt="[object Array]",Wt="[object AsyncFunction]",Ht="[object Boolean]",Gt="[object Date]",Vt="[object DOMException]",qt="[object Error]",Yt="[object Function]",$t="[object GeneratorFunction]",Jt="[object Map]",Kt="[object Number]",Qt="[object Null]",Xt="[object Object]",te="[object Promise]",ee="[object Proxy]",ne="[object RegExp]",ie="[object Set]",oe="[object String]",re="[object Symbol]",se="[object Undefined]",ae="[object WeakMap]",he="[object WeakSet]",le="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",de="[object Float64Array]",pe="[object Int8Array]",fe="[object Int16Array]",me="[object Int32Array]",ge="[object Uint8Array]",ve="[object Uint8ClampedArray]",_e="[object Uint16Array]",ye="[object Uint32Array]",we=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xe=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,Ee=RegExp(xe.source),Me=RegExp(ke.source),Pe=/<%-([\s\S]+?)%>/g,Ce=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,De=/^\w*$/,Ae=/^\./,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,Re=RegExp(Ie.source),ze=/^\s+|\s+$/g,Ue=/^\s+/,Be=/\s+$/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,Ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,We=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,Xe=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",en="\\u0300-\\u036f",nn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",rn=en+nn+on,sn="\\u2700-\\u27bf",an="a-z\\xdf-\\xf6\\xf8-\\xff",hn="\\xac\\xb1\\xd7\\xf7",ln="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",un="\\u2000-\\u206f",cn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",fn=hn+ln+un+cn,mn="[']",gn="["+tn+"]",vn="["+fn+"]",_n="["+rn+"]",yn="\\d+",wn="["+sn+"]",bn="["+an+"]",Ln="[^"+tn+fn+yn+sn+an+dn+"]",xn="\\ud83c[\\udffb-\\udfff]",kn="(?:"+_n+"|"+xn+")",En="[^"+tn+"]",Mn="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+dn+"]",Tn="\\u200d",Sn="(?:"+bn+"|"+Ln+")",Dn="(?:"+Cn+"|"+Ln+")",An="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",On="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",In=kn+"?",Rn="["+pn+"]?",zn="(?:"+Tn+"(?:"+[En,Mn,Pn].join("|")+")"+Rn+In+")*",Un="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Bn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Nn=Rn+In+zn,Fn="(?:"+[wn,Mn,Pn].join("|")+")"+Nn,jn="(?:"+[En+_n+"?",_n,Mn,Pn,gn].join("|")+")",Zn=RegExp(mn,"g"),Wn=RegExp(_n,"g"),Hn=RegExp(xn+"(?="+xn+")|"+jn+Nn,"g"),Gn=RegExp([Cn+"?"+bn+"+"+An+"(?="+[vn,Cn,"$"].join("|")+")",Dn+"+"+On+"(?="+[vn,Cn+Sn,"$"].join("|")+")",Cn+"?"+Sn+"+"+An,Cn+"+"+On,Bn,Un,yn,Fn].join("|"),"g"),Vn=RegExp("["+Tn+tn+rn+pn+"]"),qn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$n=-1,Jn={};Jn[ce]=Jn[de]=Jn[pe]=Jn[fe]=Jn[me]=Jn[ge]=Jn[ve]=Jn[_e]=Jn[ye]=!0,Jn[jt]=Jn[Zt]=Jn[le]=Jn[Ht]=Jn[ue]=Jn[Gt]=Jn[qt]=Jn[Yt]=Jn[Jt]=Jn[Kt]=Jn[Xt]=Jn[ne]=Jn[ie]=Jn[oe]=Jn[ae]=!1;var Kn={};Kn[jt]=Kn[Zt]=Kn[le]=Kn[ue]=Kn[Ht]=Kn[Gt]=Kn[ce]=Kn[de]=Kn[pe]=Kn[fe]=Kn[me]=Kn[Jt]=Kn[Kt]=Kn[Xt]=Kn[ne]=Kn[ie]=Kn[oe]=Kn[re]=Kn[ge]=Kn[ve]=Kn[_e]=Kn[ye]=!0,Kn[qt]=Kn[Yt]=Kn[ae]=!1;var Qn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Xn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ti={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ei={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ni=parseFloat,ii=parseInt,oi="object"==typeof e&&e&&e.Object===Object&&e,ri="object"==typeof self&&self&&self.Object===Object&&self,si=oi||ri||Function("return this")(),ai="object"==typeof i&&i&&!i.nodeType&&i,hi=ai&&"object"==typeof n&&n&&!n.nodeType&&n,li=hi&&hi.exports===ai,ui=li&&oi.process,ci=function(){try{return ui&&ui.binding&&ui.binding("util")}catch(t){}}(),di=ci&&ci.isArrayBuffer,pi=ci&&ci.isDate,fi=ci&&ci.isMap,mi=ci&&ci.isRegExp,gi=ci&&ci.isSet,vi=ci&&ci.isTypedArray,_i=P("length"),yi=C(Qn),wi=C(Xn),bi=C(ti),Li=function ki(t){function e(t){if(lh(t)&&!wd(t)&&!(t instanceof y)){if(t instanceof i)return t;if(wu.call(t,"__wrapped__"))return ss(t)}return new i(t)}function n(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ut,this.__views__=[]}function C(){var t=new y(this.__wrapped__);return t.__actions__=jo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=jo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=jo(this.__views__),t}function J(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tt(){var t=this.__wrapped__.value(),e=this.__dir__,n=wd(t),i=e<0,o=n?t.length:0,r=Sr(0,o,this.__views__),s=r.start,a=r.end,h=a-s,l=i?a:s-1,u=this.__iteratees__,c=u.length,d=0,p=Ju(h,this.__takeCount__);if(!n||!i&&o==h&&p==h)return Lo(t,this.__actions__);var f=[];t:for(;h--&&d<p;){l+=e;for(var m=-1,g=t[l];++m<c;){var v=u[m],_=v.iteratee,y=v.type,w=_(g);if(y==Dt)g=w;else if(!w){if(y==St)continue t;break t}}f[d++]=g}return f}function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ze(){this.__data__=sc?sc(null):{},this.size=0}function tn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function en(t){var e=this.__data__;if(sc){var n=e[t];return n===ht?it:n}return wu.call(e,t)?e[t]:it}function nn(t){var e=this.__data__;return sc?e[t]!==it:wu.call(e,t)}function on(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sc&&e===it?ht:e,this}function rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function sn(){this.__data__=[],this.size=0}function an(t){var e=this.__data__,n=An(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Iu.call(e,n,1),--this.size,!0}function hn(t){var e=this.__data__,n=An(e,t);return n<0?it:e[n][1]}function ln(t){return An(this.__data__,t)>-1}function un(t,e){var n=this.__data__,i=An(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function cn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function dn(){this.size=0,this.__data__={hash:new et,map:new(nc||rn),string:new et}}function pn(t){var e=Mr(this,t)["delete"](t);return this.size-=e?1:0,e}function fn(t){return Mr(this,t).get(t)}function mn(t){return Mr(this,t).has(t)}function gn(t,e){var n=Mr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new cn;++e<n;)this.add(t[e])}function _n(t){return this.__data__.set(t,ht),this}function yn(t){return this.__data__.has(t)}function wn(t){var e=this.__data__=new rn(t);this.size=e.size}function bn(){this.__data__=new rn,this.size=0}function Ln(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function xn(t){return this.__data__.get(t)}function kn(t){return this.__data__.has(t)}function En(t,e){var n=this.__data__;if(n instanceof rn){var i=n.__data__;if(!nc||i.length<rt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new cn(i)}return n.set(t,e),this.size=n.size,this}function Mn(t,e){var n=wd(t),i=!n&&yd(t),o=!n&&!i&&Ld(t),r=!n&&!i&&!o&&Pd(t),s=n||i||o||r,a=s?A(t.length,pu):[],h=a.length;for(var l in t)!e&&!wu.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Br(l,h))||a.push(l);return a}function Pn(t){var e=t.length;return e?t[no(0,e-1)]:it}function Cn(t,e){return ns(jo(t),Bn(e,0,t.length))}function Tn(t){return ns(jo(t))}function Sn(t,e,n){(n===it||$a(t[e],n))&&(n!==it||e in t)||zn(t,e,n)}function Dn(t,e,n){var i=t[e];wu.call(t,e)&&$a(i,n)&&(n!==it||e in t)||zn(t,e,n)}function An(t,e){for(var n=t.length;n--;)if($a(t[n][0],e))return n;return-1}function On(t,e,n,i){return _c(t,function(t,o,r){e(i,t,n(t),r)}),i}function In(t,e){return t&&Zo(e,Hh(e),t)}function Rn(t,e){return t&&Zo(e,Gh(e),t)}function zn(t,e,n){"__proto__"==e&&Bu?Bu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Un(t,e){for(var n=-1,i=e.length,o=su(i),r=null==t;++n<i;)o[n]=r?it:jh(t,e[n]);return o}function Bn(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function Nn(t,e,n,i,o,r){var s,a=e&ct,l=e&dt,u=e&pt;if(n&&(s=o?n(t,i,o,r):n(t)),s!==it)return s;if(!hh(t))return t;var c=wd(t);if(c){if(s=Or(t),!a)return jo(t,s)}else{var d=Sc(t),p=d==Yt||d==$t;if(Ld(t))return To(t,a);if(d==Xt||d==jt||p&&!o){if(s=l||p?{}:Ir(t),!a)return l?Ho(t,Rn(s,t)):Wo(t,In(s,t))}else{if(!Kn[d])return o?t:{};s=Rr(t,d,Nn,a)}}r||(r=new wn);var f=r.get(t);if(f)return f;r.set(t,s);var m=u?l?Lr:br:l?Gh:Hh,g=c?it:m(t);return h(g||t,function(i,o){g&&(o=i,i=t[o]),Dn(s,o,Nn(i,e,n,o,t,r))}),s}function Fn(t){var e=Hh(t);return function(n){return jn(n,t,e)}}function jn(t,e,n){var i=n.length;if(null==t)return!i;for(t=cu(t);i--;){var o=n[i],r=e[o],s=t[o];if(s===it&&!(o in t)||!r(s))return!1}return!0}function Hn(t,e,n){if("function"!=typeof t)throw new fu(at);return Oc(function(){t.apply(it,n)},e)}function Gn(t,e,n,i){var o=-1,r=d,s=!0,a=t.length,h=[],l=e.length;if(!a)return h;n&&(e=f(e,I(n))),i?(r=p,s=!1):e.length>=rt&&(r=z,s=!1,e=new vn(e));t:for(;++o<a;){var u=t[o],c=null==n?u:n(u);if(u=i||0!==u?u:0,s&&c===c){for(var m=l;m--;)if(e[m]===c)continue t;h.push(u)}else r(e,c,i)||h.push(u)}return h}function Vn(t,e){var n=!0;return _c(t,function(t,i,o){return n=!!e(t,i,o)}),n}function qn(t,e,n){for(var i=-1,o=t.length;++i<o;){var r=t[i],s=e(r);if(null!=s&&(a===it?s===s&&!wh(s):n(s,a)))var a=s,h=r}return h}function Qn(t,e,n,i){var o=t.length;for(n=Mh(n),n<0&&(n=-n>o?0:o+n),i=i===it||i>o?o:Mh(i),i<0&&(i+=o),i=n>i?0:Ph(i);n<i;)t[n++]=e;return t}function Xn(t,e){var n=[];return _c(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function ti(t,e,n,i,o){var r=-1,s=t.length;for(n||(n=Ur),o||(o=[]);++r<s;){var a=t[r];e>0&&n(a)?e>1?ti(a,e-1,n,i,o):m(o,a):i||(o[o.length]=a)}return o}function ei(t,e){return t&&wc(t,e,Hh)}function oi(t,e){return t&&bc(t,e,Hh)}function ri(t,e){return c(e,function(e){return rh(t[e])})}function ai(t,e){e=Po(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[is(e[n++])];return n&&n==i?t:it}function hi(t,e,n){var i=e(t);return wd(t)?i:m(i,n(t))}function ui(t){return null==t?t===it?se:Qt:Uu&&Uu in cu(t)?Tr(t):Jr(t)}function ci(t,e){return t>e}function _i(t,e){return null!=t&&wu.call(t,e)}function Li(t,e){return null!=t&&e in cu(t)}function Ei(t,e,n){return t>=Ju(e,n)&&t<$u(e,n)}function Mi(t,e,n){for(var i=n?p:d,o=t[0].length,r=t.length,s=r,a=su(r),h=1/0,l=[];s--;){var u=t[s];s&&e&&(u=f(u,I(e))),h=Ju(u.length,h),a[s]=!n&&(e||o>=120&&u.length>=120)?new vn(s&&u):it}u=t[0];var c=-1,m=a[0];t:for(;++c<o&&l.length<h;){var g=u[c],v=e?e(g):g;if(g=n||0!==g?g:0,!(m?z(m,v):i(l,v,n))){for(s=r;--s;){var _=a[s];if(!(_?z(_,v):i(t[s],v,n)))continue t}m&&m.push(v),l.push(g)}}return l}function Pi(t,e,n,i){return ei(t,function(t,o,r){e(i,n(t),o,r)}),i}function Ci(t,e,n){e=Po(e,t),t=Qr(t,e);var i=null==t?t:t[is(Es(e))];return null==i?it:s(i,t,n)}function Ti(t){return lh(t)&&ui(t)==jt}function Si(t){return lh(t)&&ui(t)==le}function Di(t){return lh(t)&&ui(t)==Gt}function Ai(t,e,n,i,o){return t===e||(null==t||null==e||!lh(t)&&!lh(e)?t!==t&&e!==e:Oi(t,e,n,i,Ai,o))}function Oi(t,e,n,i,o,r){var s=wd(t),a=wd(e),h=s?Zt:Sc(t),l=a?Zt:Sc(e);h=h==jt?Xt:h,l=l==jt?Xt:l;var u=h==Xt,c=l==Xt,d=h==l;if(d&&Ld(t)){if(!Ld(e))return!1;s=!0,u=!1}if(d&&!u)return r||(r=new wn),s||Pd(t)?vr(t,e,n,i,o,r):_r(t,e,h,n,i,o,r);if(!(n&ft)){var p=u&&wu.call(t,"__wrapped__"),f=c&&wu.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return r||(r=new wn),o(m,g,n,i,r)}}return!!d&&(r||(r=new wn),yr(t,e,n,i,o,r))}function Ii(t){return lh(t)&&Sc(t)==Jt}function Ri(t,e,n,i){var o=n.length,r=o,s=!i;if(null==t)return!r;for(t=cu(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){a=n[o];var h=a[0],l=t[h],u=a[1];if(s&&a[2]){if(l===it&&!(h in t))return!1}else{var c=new wn;if(i)var d=i(l,u,h,t,e,c);if(!(d===it?Ai(u,l,ft|mt,i,c):d))return!1}}return!0}function zi(t){if(!hh(t)||Wr(t))return!1;var e=rh(t)?Mu:Ye;return e.test(os(t))}function Ui(t){return lh(t)&&ui(t)==ne}function Bi(t){return lh(t)&&Sc(t)==ie}function Ni(t){return lh(t)&&ah(t.length)&&!!Jn[ui(t)]}function Fi(t){return"function"==typeof t?t:null==t?Il:"object"==typeof t?wd(t)?Vi(t[0],t[1]):Gi(t):Zl(t)}function ji(t){if(!Hr(t))return Yu(t);var e=[];for(var n in cu(t))wu.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Zi(t){if(!hh(t))return $r(t);var e=Hr(t),n=[];for(var i in t)("constructor"!=i||!e&&wu.call(t,i))&&n.push(i);return n}function Wi(t,e){return t<e}function Hi(t,e){var n=-1,i=Ja(t)?su(t.length):[];return _c(t,function(t,o,r){i[++n]=e(t,o,r)}),i}function Gi(t){var e=Pr(t);return 1==e.length&&e[0][2]?Vr(e[0][0],e[0][1]):function(n){return n===t||Ri(n,t,e)}}function Vi(t,e){return Fr(t)&&Gr(e)?Vr(is(t),e):function(n){var i=jh(n,t);return i===it&&i===e?Wh(n,t):Ai(e,i,ft|mt)}}function qi(t,e,n,i,o){t!==e&&wc(e,function(r,s){if(hh(r))o||(o=new wn),Yi(t,e,s,n,qi,i,o);else{var a=i?i(t[s],r,s+"",t,e,o):it;a===it&&(a=r),Sn(t,s,a)}},Gh)}function Yi(t,e,n,i,o,r,s){var a=t[n],h=e[n],l=s.get(h);if(l)return void Sn(t,n,l);var u=r?r(a,h,n+"",t,e,s):it,c=u===it;if(c){var d=wd(h),p=!d&&Ld(h),f=!d&&!p&&Pd(h);u=h,d||p||f?wd(a)?u=a:Ka(a)?u=jo(a):p?(c=!1,u=To(h,!0)):f?(c=!1,u=zo(h,!0)):u=[]:vh(h)||yd(h)?(u=a,yd(a)?u=Th(a):(!hh(a)||i&&rh(a))&&(u=Ir(h))):c=!1}c&&(s.set(h,u),o(u,h,i,r,s),s["delete"](h)),Sn(t,n,u)}function $i(t,e){var n=t.length;if(n)return e+=e<0?n:0,Br(e,n)?t[e]:it}function Ji(t,e,n){var i=-1;e=f(e.length?e:[Il],I(Er()));var o=Hi(t,function(t,n,o){var r=f(e,function(e){return e(t)});return{criteria:r,index:++i,value:t}});return S(o,function(t,e){return Bo(t,e,n)})}function Ki(t,e){return Qi(t,e,function(e,n){return Wh(t,n)})}function Qi(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var s=e[i],a=ai(t,s);n(a,s)&&ho(r,Po(s,t),a)}return r}function Xi(t){return function(e){return ai(e,t)}}function to(t,e,n,i){var o=i?k:x,r=-1,s=e.length,a=t;for(t===e&&(e=jo(e)),n&&(a=f(t,I(n)));++r<s;)for(var h=0,l=e[r],u=n?n(l):l;(h=o(a,u,h,i))>-1;)a!==t&&Iu.call(a,h,1),Iu.call(t,h,1);return t}function eo(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==r){var r=o;Br(o)?Iu.call(t,o,1):yo(t,o)}}return t}function no(t,e){return t+Wu(Xu()*(e-t+1))}function io(t,e,n,i){for(var o=-1,r=$u(Zu((e-t)/(n||1)),0),s=su(r);r--;)s[i?r:++o]=t,t+=n;return s}function oo(t,e){var n="";if(!t||e<1||e>It)return n;do e%2&&(n+=t),e=Wu(e/2),e&&(t+=t);while(e);return n}function ro(t,e){return Ic(Kr(t,e,Il),t+"")}function so(t){return Pn(il(t))}function ao(t,e){var n=il(t);return ns(n,Bn(e,0,n.length))}function ho(t,e,n,i){if(!hh(t))return t;e=Po(e,t);for(var o=-1,r=e.length,s=r-1,a=t;null!=a&&++o<r;){var h=is(e[o]),l=n;if(o!=s){var u=a[h];l=i?i(u,h,a):it,l===it&&(l=hh(u)?u:Br(e[o+1])?[]:{})}Dn(a,h,l),a=a[h]}return t}function lo(t){return ns(il(t))}function uo(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=su(o);++i<o;)r[i]=t[i+e];return r}function co(t,e){var n;return _c(t,function(t,i,o){return n=e(t,i,o),!n}),!!n}function po(t,e,n){var i=0,o=null==t?i:t.length;if("number"==typeof e&&e===e&&o<=Nt){for(;i<o;){var r=i+o>>>1,s=t[r];null!==s&&!wh(s)&&(n?s<=e:s<e)?i=r+1:o=r}return o}return fo(t,e,Il,n)}function fo(t,e,n,i){e=n(e);for(var o=0,r=null==t?0:t.length,s=e!==e,a=null===e,h=wh(e),l=e===it;o<r;){var u=Wu((o+r)/2),c=n(t[u]),d=c!==it,p=null===c,f=c===c,m=wh(c);if(s)var g=i||f;else g=l?f&&(i||d):a?f&&d&&(i||!p):h?f&&d&&!p&&(i||!m):!p&&!m&&(i?c<=e:c<e);g?o=u+1:r=u}return Ju(r,Bt)}function mo(t,e){for(var n=-1,i=t.length,o=0,r=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!$a(a,h)){var h=a;r[o++]=0===s?0:s}}return r}function go(t){return"number"==typeof t?t:wh(t)?zt:+t}function vo(t){if("string"==typeof t)return t;if(wd(t))return f(t,vo)+"";if(wh(t))return gc?gc.call(t):"";var e=t+"";return"0"==e&&1/t==-Ot?"-0":e}function _o(t,e,n){var i=-1,o=d,r=t.length,s=!0,a=[],h=a;if(n)s=!1,o=p;else if(r>=rt){var l=e?null:Mc(t);if(l)return Y(l);s=!1,o=z,h=new vn}else h=e?[]:a;t:for(;++i<r;){var u=t[i],c=e?e(u):u;if(u=n||0!==u?u:0,s&&c===c){for(var f=h.length;f--;)if(h[f]===c)continue t;e&&h.push(c),a.push(u)}else o(h,c,n)||(h!==a&&h.push(c),a.push(u))}return a}function yo(t,e){return e=Po(e,t),t=Qr(t,e),null==t||delete t[is(Es(e))]}function wo(t,e,n,i){return ho(t,e,n(ai(t,e)),i)}function bo(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?uo(t,i?0:r,i?r+1:o):uo(t,i?r+1:0,i?o:r)}function Lo(t,e){var n=t;return n instanceof y&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,m([t],e.args))},n)}function xo(t,e,n){var i=t.length;if(i<2)return i?_o(t[0]):[];for(var o=-1,r=su(i);++o<i;)for(var s=t[o],a=-1;++a<i;)a!=o&&(r[o]=Gn(r[o]||s,t[a],e,n));return _o(ti(r,1),e,n)}function ko(t,e,n){for(var i=-1,o=t.length,r=e.length,s={};++i<o;){var a=i<r?e[i]:it;n(s,t[i],a)}return s}function Eo(t){return Ka(t)?t:[]}function Mo(t){return"function"==typeof t?t:Il}function Po(t,e){return wd(t)?t:Fr(t,e)?[t]:Rc(Dh(t))}function Co(t,e,n){var i=t.length;return n=n===it?i:n,!e&&n>=i?t:uo(t,e,n)}function To(t,e){if(e)return t.slice();var n=t.length,i=Su?Su(n):new t.constructor(n);return t.copy(i),i}function So(t){var e=new t.constructor(t.byteLength);return new Tu(e).set(new Tu(t)),e}function Do(t,e){var n=e?So(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ao(t,e,n){
var i=e?n(G(t),ct):G(t);return g(i,o,new t.constructor)}function Oo(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e}function Io(t,e,n){var i=e?n(Y(t),ct):Y(t);return g(i,r,new t.constructor)}function Ro(t){return mc?cu(mc.call(t)):{}}function zo(t,e){var n=e?So(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Uo(t,e){if(t!==e){var n=t!==it,i=null===t,o=t===t,r=wh(t),s=e!==it,a=null===e,h=e===e,l=wh(e);if(!a&&!l&&!r&&t>e||r&&s&&h&&!a&&!l||i&&s&&h||!n&&h||!o)return 1;if(!i&&!r&&!l&&t<e||l&&n&&o&&!i&&!r||a&&n&&o||!s&&o||!h)return-1}return 0}function Bo(t,e,n){for(var i=-1,o=t.criteria,r=e.criteria,s=o.length,a=n.length;++i<s;){var h=Uo(o[i],r[i]);if(h){if(i>=a)return h;var l=n[i];return h*("desc"==l?-1:1)}}return t.index-e.index}function No(t,e,n,i){for(var o=-1,r=t.length,s=n.length,a=-1,h=e.length,l=$u(r-s,0),u=su(h+l),c=!i;++a<h;)u[a]=e[a];for(;++o<s;)(c||o<r)&&(u[n[o]]=t[o]);for(;l--;)u[a++]=t[o++];return u}function Fo(t,e,n,i){for(var o=-1,r=t.length,s=-1,a=n.length,h=-1,l=e.length,u=$u(r-a,0),c=su(u+l),d=!i;++o<u;)c[o]=t[o];for(var p=o;++h<l;)c[p+h]=e[h];for(;++s<a;)(d||o<r)&&(c[p+n[s]]=t[o++]);return c}function jo(t,e){var n=-1,i=t.length;for(e||(e=su(i));++n<i;)e[n]=t[n];return e}function Zo(t,e,n,i){var o=!n;n||(n={});for(var r=-1,s=e.length;++r<s;){var a=e[r],h=i?i(n[a],t[a],a,n,t):it;h===it&&(h=t[a]),o?zn(n,a,h):Dn(n,a,h)}return n}function Wo(t,e){return Zo(t,Cc(t),e)}function Ho(t,e){return Zo(t,Tc(t),e)}function Go(t,e){return function(n,i){var o=wd(n)?a:On,r=e?e():{};return o(n,t,Er(i,2),r)}}function Vo(t){return ro(function(e,n){var i=-1,o=n.length,r=o>1?n[o-1]:it,s=o>2?n[2]:it;for(r=t.length>3&&"function"==typeof r?(o--,r):it,s&&Nr(n[0],n[1],s)&&(r=o<3?it:r,o=1),e=cu(e);++i<o;){var a=n[i];a&&t(e,a,i,r)}return e})}function qo(t,e){return function(n,i){if(null==n)return n;if(!Ja(n))return t(n,i);for(var o=n.length,r=e?o:-1,s=cu(n);(e?r--:++r<o)&&i(s[r],r,s)!==!1;);return n}}function Yo(t){return function(e,n,i){for(var o=-1,r=cu(e),s=i(e),a=s.length;a--;){var h=s[t?a:++o];if(n(r[h],h,r)===!1)break}return e}}function $o(t,e,n){function i(){var e=this&&this!==si&&this instanceof i?r:t;return e.apply(o?n:this,arguments)}var o=e&gt,r=Qo(t);return i}function Jo(t){return function(e){e=Dh(e);var n=Z(e)?X(e):it,i=n?n[0]:e.charAt(0),o=n?Co(n,1).join(""):e.slice(1);return i[t]()+o}}function Ko(t){return function(e){return g(Tl(ll(e).replace(Zn,"")),t,"")}}function Qo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vc(t.prototype),i=t.apply(n,e);return hh(i)?i:n}}function Xo(t,e,n){function i(){for(var r=arguments.length,a=su(r),h=r,l=kr(i);h--;)a[h]=arguments[h];var u=r<3&&a[0]!==l&&a[r-1]!==l?[]:q(a,l);if(r-=u.length,r<n)return ur(t,e,nr,i.placeholder,it,a,u,it,it,n-r);var c=this&&this!==si&&this instanceof i?o:t;return s(c,this,a)}var o=Qo(t);return i}function tr(t){return function(e,n,i){var o=cu(e);if(!Ja(e)){var r=Er(n,3);e=Hh(e),n=function(t){return r(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[r?e[s]:s]:it}}function er(t){return wr(function(e){var n=e.length,o=n,r=i.prototype.thru;for(t&&e.reverse();o--;){var s=e[o];if("function"!=typeof s)throw new fu(at);if(r&&!a&&"wrapper"==xr(s))var a=new i([],(!0))}for(o=a?o:n;++o<n;){s=e[o];var h=xr(s),l="wrapper"==h?Pc(s):it;a=l&&Zr(l[0])&&l[1]==(xt|yt|bt|kt)&&!l[4].length&&1==l[9]?a[xr(l[0])].apply(a,l[3]):1==s.length&&Zr(s)?a[h]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&wd(i))return a.plant(i).value();for(var o=0,r=n?e[o].apply(this,t):i;++o<n;)r=e[o].call(this,r);return r}})}function nr(t,e,n,i,o,r,s,a,h,l){function u(){for(var v=arguments.length,_=su(v),y=v;y--;)_[y]=arguments[y];if(f)var w=kr(u),b=N(_,w);if(i&&(_=No(_,i,o,f)),r&&(_=Fo(_,r,s,f)),v-=b,f&&v<l){var L=q(_,w);return ur(t,e,nr,u.placeholder,n,_,L,a,h,l-v)}var x=d?n:this,k=p?x[t]:t;return v=_.length,a?_=Xr(_,a):m&&v>1&&_.reverse(),c&&h<v&&(_.length=h),this&&this!==si&&this instanceof u&&(k=g||Qo(k)),k.apply(x,_)}var c=e&xt,d=e&gt,p=e&vt,f=e&(yt|wt),m=e&Et,g=p?it:Qo(t);return u}function ir(t,e){return function(n,i){return Pi(n,t,e(i),{})}}function or(t,e){return function(n,i){var o;if(n===it&&i===it)return e;if(n!==it&&(o=n),i!==it){if(o===it)return i;"string"==typeof n||"string"==typeof i?(n=vo(n),i=vo(i)):(n=go(n),i=go(i)),o=t(n,i)}return o}}function rr(t){return wr(function(e){return e=f(e,I(Er())),ro(function(n){var i=this;return t(e,function(t){return s(t,i,n)})})})}function sr(t,e){e=e===it?" ":vo(e);var n=e.length;if(n<2)return n?oo(e,t):e;var i=oo(e,Zu(t/Q(e)));return Z(e)?Co(X(i),0,t).join(""):i.slice(0,t)}function ar(t,e,n,i){function o(){for(var e=-1,h=arguments.length,l=-1,u=i.length,c=su(u+h),d=this&&this!==si&&this instanceof o?a:t;++l<u;)c[l]=i[l];for(;h--;)c[l++]=arguments[++e];return s(d,r?n:this,c)}var r=e&gt,a=Qo(t);return o}function hr(t){return function(e,n,i){return i&&"number"!=typeof i&&Nr(e,n,i)&&(n=i=it),e=Eh(e),n===it?(n=e,e=0):n=Eh(n),i=i===it?e<n?1:-1:Eh(i),io(e,n,i,t)}}function lr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ch(e),n=Ch(n)),t(e,n)}}function ur(t,e,n,i,o,r,s,a,h,l){var u=e&yt,c=u?s:it,d=u?it:s,p=u?r:it,f=u?it:r;e|=u?bt:Lt,e&=~(u?Lt:bt),e&_t||(e&=~(gt|vt));var m=[t,e,o,p,c,f,d,a,h,l],g=n.apply(it,m);return Zr(t)&&Ac(g,m),g.placeholder=i,ts(g,t,e)}function cr(t){var e=uu[t];return function(t,n){if(t=Ch(t),n=null==n?0:Ju(Mh(n),292)){var i=(Dh(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(Dh(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function dr(t){return function(e){var n=Sc(e);return n==Jt?G(e):n==ie?$(e):O(e,t(e))}}function pr(t,e,n,i,o,r,s,a){var h=e&vt;if(!h&&"function"!=typeof t)throw new fu(at);var l=i?i.length:0;if(l||(e&=~(bt|Lt),i=o=it),s=s===it?s:$u(Mh(s),0),a=a===it?a:Mh(a),l-=o?o.length:0,e&Lt){var u=i,c=o;i=o=it}var d=h?it:Pc(t),p=[t,e,n,i,o,u,c,r,s,a];if(d&&Yr(p,d),t=p[0],e=p[1],n=p[2],i=p[3],o=p[4],a=p[9]=p[9]===it?h?0:t.length:$u(p[9]-l,0),!a&&e&(yt|wt)&&(e&=~(yt|wt)),e&&e!=gt)f=e==yt||e==wt?Xo(t,e,a):e!=bt&&e!=(gt|bt)||o.length?nr.apply(it,p):ar(t,e,n,i);else var f=$o(t,e,n);var m=d?Lc:Ac;return ts(m(f,p),t,e)}function fr(t,e,n,i){return t===it||$a(t,vu[n])&&!wu.call(i,n)?e:t}function mr(t,e,n,i,o,r){return hh(t)&&hh(e)&&(r.set(e,t),qi(t,e,it,mr,r),r["delete"](e)),t}function gr(t){return vh(t)?it:t}function vr(t,e,n,i,o,r){var s=n&ft,a=t.length,h=e.length;if(a!=h&&!(s&&h>a))return!1;var l=r.get(t);if(l&&r.get(e))return l==e;var u=-1,c=!0,d=n&mt?new vn:it;for(r.set(t,e),r.set(e,t);++u<a;){var p=t[u],f=e[u];if(i)var m=s?i(f,p,u,e,t,r):i(p,f,u,t,e,r);if(m!==it){if(m)continue;c=!1;break}if(d){if(!_(e,function(t,e){if(!z(d,e)&&(p===t||o(p,t,n,i,r)))return d.push(e)})){c=!1;break}}else if(p!==f&&!o(p,f,n,i,r)){c=!1;break}}return r["delete"](t),r["delete"](e),c}function _r(t,e,n,i,o,r,s){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case le:return!(t.byteLength!=e.byteLength||!r(new Tu(t),new Tu(e)));case Ht:case Gt:case Kt:return $a(+t,+e);case qt:return t.name==e.name&&t.message==e.message;case ne:case oe:return t==e+"";case Jt:var a=G;case ie:var h=i&ft;if(a||(a=Y),t.size!=e.size&&!h)return!1;var l=s.get(t);if(l)return l==e;i|=mt,s.set(t,e);var u=vr(a(t),a(e),i,o,r,s);return s["delete"](t),u;case re:if(mc)return mc.call(t)==mc.call(e)}return!1}function yr(t,e,n,i,o,r){var s=n&ft,a=br(t),h=a.length,l=br(e),u=l.length;if(h!=u&&!s)return!1;for(var c=h;c--;){var d=a[c];if(!(s?d in e:wu.call(e,d)))return!1}var p=r.get(t);if(p&&r.get(e))return p==e;var f=!0;r.set(t,e),r.set(e,t);for(var m=s;++c<h;){d=a[c];var g=t[d],v=e[d];if(i)var _=s?i(v,g,d,e,t,r):i(g,v,d,t,e,r);if(!(_===it?g===v||o(g,v,n,i,r):_)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(f=!1)}return r["delete"](t),r["delete"](e),f}function wr(t){return Ic(Kr(t,it,vs),t+"")}function br(t){return hi(t,Hh,Cc)}function Lr(t){return hi(t,Gh,Tc)}function xr(t){for(var e=t.name+"",n=hc[e],i=wu.call(hc,e)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function kr(t){var n=wu.call(e,"placeholder")?e:t;return n.placeholder}function Er(){var t=e.iteratee||Rl;return t=t===Rl?Fi:t,arguments.length?t(arguments[0],arguments[1]):t}function Mr(t,e){var n=t.__data__;return jr(e)?n["string"==typeof e?"string":"hash"]:n.map}function Pr(t){for(var e=Hh(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Gr(o)]}return e}function Cr(t,e){var n=j(t,e);return zi(n)?n:it}function Tr(t){var e=wu.call(t,Uu),n=t[Uu];try{t[Uu]=it;var i=!0}catch(o){}var r=xu.call(t);return i&&(e?t[Uu]=n:delete t[Uu]),r}function Sr(t,e,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],s=r.size;switch(r.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Ju(e,t+s);break;case"takeRight":t=$u(t,e-s)}}return{start:t,end:e}}function Dr(t){var e=t.match(Fe);return e?e[1].split(je):[]}function Ar(t,e,n){e=Po(e,t);for(var i=-1,o=e.length,r=!1;++i<o;){var s=is(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++i!=o?r:(o=null==t?0:t.length,!!o&&ah(o)&&Br(s,o)&&(wd(t)||yd(t)))}function Or(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&wu.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ir(t){return"function"!=typeof t.constructor||Hr(t)?{}:vc(Du(t))}function Rr(t,e,n,i){var o=t.constructor;switch(e){case le:return So(t);case Ht:case Gt:return new o((+t));case ue:return Do(t,i);case ce:case de:case pe:case fe:case me:case ge:case ve:case _e:case ye:return zo(t,i);case Jt:return Ao(t,i,n);case Kt:case oe:return new o(t);case ne:return Oo(t);case ie:return Io(t,i,n);case re:return Ro(t)}}function zr(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ne,"{\n/* [wrapped with "+e+"] */\n")}function Ur(t){return wd(t)||yd(t)||!!(Ru&&t&&t[Ru])}function Br(t,e){return e=null==e?It:e,!!e&&("number"==typeof t||Je.test(t))&&t>-1&&t%1==0&&t<e}function Nr(t,e,n){if(!hh(n))return!1;var i=typeof e;return!!("number"==i?Ja(n)&&Br(e,n.length):"string"==i&&e in n)&&$a(n[e],t)}function Fr(t,e){if(wd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!wh(t))||(De.test(t)||!Se.test(t)||null!=e&&t in cu(e))}function jr(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Zr(t){var n=xr(t),i=e[n];if("function"!=typeof i||!(n in y.prototype))return!1;if(t===i)return!0;var o=Pc(i);return!!o&&t===o[0]}function Wr(t){return!!Lu&&Lu in t}function Hr(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||vu;return t===n}function Gr(t){return t===t&&!hh(t)}function Vr(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in cu(n)))}}function qr(t){var e=Ra(t,function(t){return n.size===lt&&n.clear(),t}),n=e.cache;return e}function Yr(t,e){var n=t[1],i=e[1],o=n|i,r=o<(gt|vt|xt),s=i==xt&&n==yt||i==xt&&n==kt&&t[7].length<=e[8]||i==(xt|kt)&&e[7].length<=e[8]&&n==yt;if(!r&&!s)return t;i&gt&&(t[2]=e[2],o|=n&gt?0:_t);var a=e[3];if(a){var h=t[3];t[3]=h?No(h,a,e[4]):a,t[4]=h?q(t[3],ut):e[4]}return a=e[5],a&&(h=t[5],t[5]=h?Fo(h,a,e[6]):a,t[6]=h?q(t[5],ut):e[6]),a=e[7],a&&(t[7]=a),i&xt&&(t[8]=null==t[8]?e[8]:Ju(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function $r(t){var e=[];if(null!=t)for(var n in cu(t))e.push(n);return e}function Jr(t){return xu.call(t)}function Kr(t,e,n){return e=$u(e===it?t.length-1:e,0),function(){for(var i=arguments,o=-1,r=$u(i.length-e,0),a=su(r);++o<r;)a[o]=i[e+o];o=-1;for(var h=su(e+1);++o<e;)h[o]=i[o];return h[e]=n(a),s(t,this,h)}}function Qr(t,e){return e.length<2?t:ai(t,uo(e,0,-1))}function Xr(t,e){for(var n=t.length,i=Ju(e.length,n),o=jo(t);i--;){var r=e[i];t[i]=Br(r,n)?o[r]:it}return t}function ts(t,e,n){var i=e+"";return Ic(t,zr(i,rs(Dr(i),n)))}function es(t){var e=0,n=0;return function(){var i=Ku(),o=Tt-(i-n);if(n=i,o>0){if(++e>=Ct)return arguments[0]}else e=0;return t.apply(it,arguments)}}function ns(t,e){var n=-1,i=t.length,o=i-1;for(e=e===it?i:e;++n<e;){var r=no(n,o),s=t[r];t[r]=t[n],t[n]=s}return t.length=e,t}function is(t){if("string"==typeof t||wh(t))return t;var e=t+"";return"0"==e&&1/t==-Ot?"-0":e}function os(t){if(null!=t){try{return yu.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function rs(t,e){return h(Ft,function(n){var i="_."+n[0];e&n[1]&&!d(t,i)&&t.push(i)}),t.sort()}function ss(t){if(t instanceof y)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=jo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function as(t,e,n){e=(n?Nr(t,e,n):e===it)?1:$u(Mh(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,r=0,s=su(Zu(i/e));o<i;)s[r++]=uo(t,o,o+=e);return s}function hs(t){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var r=t[e];r&&(o[i++]=r)}return o}function ls(){var t=arguments.length;if(!t)return[];for(var e=su(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return m(wd(n)?jo(n):[n],ti(e,1))}function us(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===it?1:Mh(e),uo(t,e<0?0:e,i)):[]}function cs(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===it?1:Mh(e),e=i-e,uo(t,0,e<0?0:e)):[]}function ds(t,e){return t&&t.length?bo(t,Er(e,3),!0,!0):[]}function ps(t,e){return t&&t.length?bo(t,Er(e,3),!0):[]}function fs(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Nr(t,e,n)&&(n=0,i=o),Qn(t,e,n,i)):[]}function ms(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:Mh(n);return o<0&&(o=$u(i+o,0)),L(t,Er(e,3),o)}function gs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==it&&(o=Mh(n),o=n<0?$u(i+o,0):Ju(o,i-1)),L(t,Er(e,3),o,!0)}function vs(t){var e=null==t?0:t.length;return e?ti(t,1):[]}function _s(t){var e=null==t?0:t.length;return e?ti(t,Ot):[]}function ys(t,e){var n=null==t?0:t.length;return n?(e=e===it?1:Mh(e),ti(t,e)):[]}function ws(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var o=t[e];i[o[0]]=o[1]}return i}function bs(t){return t&&t.length?t[0]:it}function Ls(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:Mh(n);return o<0&&(o=$u(i+o,0)),x(t,e,o)}function xs(t){var e=null==t?0:t.length;return e?uo(t,0,-1):[]}function ks(t,e){return null==t?"":qu.call(t,e)}function Es(t){var e=null==t?0:t.length;return e?t[e-1]:it}function Ms(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==it&&(o=Mh(n),o=o<0?$u(i+o,0):Ju(o,i-1)),e===e?K(t,e,o):L(t,E,o,!0)}function Ps(t,e){return t&&t.length?$i(t,Mh(e)):it}function Cs(t,e){return t&&t.length&&e&&e.length?to(t,e):t}function Ts(t,e,n){return t&&t.length&&e&&e.length?to(t,e,Er(n,2)):t}function Ss(t,e,n){return t&&t.length&&e&&e.length?to(t,e,it,n):t}function Ds(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],r=t.length;for(e=Er(e,3);++i<r;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return eo(t,o),n}function As(t){return null==t?t:tc.call(t)}function Os(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Nr(t,e,n)?(e=0,n=i):(e=null==e?0:Mh(e),n=n===it?i:Mh(n)),uo(t,e,n)):[]}function Is(t,e){return po(t,e)}function Rs(t,e,n){return fo(t,e,Er(n,2))}function zs(t,e){var n=null==t?0:t.length;if(n){var i=po(t,e);if(i<n&&$a(t[i],e))return i}return-1}function Us(t,e){return po(t,e,!0)}function Bs(t,e,n){return fo(t,e,Er(n,2),!0)}function Ns(t,e){var n=null==t?0:t.length;if(n){var i=po(t,e,!0)-1;if($a(t[i],e))return i}return-1}function Fs(t){return t&&t.length?mo(t):[]}function js(t,e){return t&&t.length?mo(t,Er(e,2)):[]}function Zs(t){var e=null==t?0:t.length;return e?uo(t,1,e):[]}function Ws(t,e,n){return t&&t.length?(e=n||e===it?1:Mh(e),uo(t,0,e<0?0:e)):[]}function Hs(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===it?1:Mh(e),e=i-e,uo(t,e<0?0:e,i)):[]}function Gs(t,e){return t&&t.length?bo(t,Er(e,3),!1,!0):[]}function Vs(t,e){return t&&t.length?bo(t,Er(e,3)):[]}function qs(t){return t&&t.length?_o(t):[]}function Ys(t,e){return t&&t.length?_o(t,Er(e,2)):[]}function $s(t,e){return e="function"==typeof e?e:it,t&&t.length?_o(t,it,e):[]}function Js(t){if(!t||!t.length)return[];var e=0;return t=c(t,function(t){if(Ka(t))return e=$u(t.length,e),!0}),A(e,function(e){return f(t,P(e))})}function Ks(t,e){if(!t||!t.length)return[];var n=Js(t);return null==e?n:f(n,function(t){return s(e,it,t)})}function Qs(t,e){return ko(t||[],e||[],Dn)}function Xs(t,e){return ko(t||[],e||[],ho)}function ta(t){var n=e(t);return n.__chain__=!0,n}function ea(t,e){return e(t),t}function na(t,e){return e(t)}function ia(){return ta(this)}function oa(){return new i(this.value(),this.__chain__)}function ra(){this.__values__===it&&(this.__values__=kh(this.value()));var t=this.__index__>=this.__values__.length,e=t?it:this.__values__[this.__index__++];return{done:t,value:e}}function sa(){return this}function aa(t){for(var e,i=this;i instanceof n;){var o=ss(i);o.__index__=0,o.__values__=it,e?r.__wrapped__=o:e=o;var r=o;i=i.__wrapped__}return r.__wrapped__=t,e}function ha(){var t=this.__wrapped__;if(t instanceof y){var e=t;return this.__actions__.length&&(e=new y(this)),e=e.reverse(),e.__actions__.push({func:na,args:[As],thisArg:it}),new i(e,this.__chain__)}return this.thru(As)}function la(){return Lo(this.__wrapped__,this.__actions__)}function ua(t,e,n){var i=wd(t)?u:Vn;return n&&Nr(t,e,n)&&(e=it),i(t,Er(e,3))}function ca(t,e){var n=wd(t)?c:Xn;return n(t,Er(e,3))}function da(t,e){return ti(_a(t,e),1)}function pa(t,e){return ti(_a(t,e),Ot)}function fa(t,e,n){return n=n===it?1:Mh(n),ti(_a(t,e),n)}function ma(t,e){var n=wd(t)?h:_c;return n(t,Er(e,3))}function ga(t,e){var n=wd(t)?l:yc;return n(t,Er(e,3))}function va(t,e,n,i){t=Ja(t)?t:il(t),n=n&&!i?Mh(n):0;var o=t.length;return n<0&&(n=$u(o+n,0)),yh(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&x(t,e,n)>-1}function _a(t,e){var n=wd(t)?f:Hi;return n(t,Er(e,3))}function ya(t,e,n,i){return null==t?[]:(wd(e)||(e=null==e?[]:[e]),n=i?it:n,wd(n)||(n=null==n?[]:[n]),Ji(t,e,n))}function wa(t,e,n){var i=wd(t)?g:T,o=arguments.length<3;return i(t,Er(e,4),n,o,_c)}function ba(t,e,n){var i=wd(t)?v:T,o=arguments.length<3;return i(t,Er(e,4),n,o,yc)}function La(t,e){var n=wd(t)?c:Xn;return n(t,za(Er(e,3)))}function xa(t){var e=wd(t)?Pn:so;return e(t)}function ka(t,e,n){e=(n?Nr(t,e,n):e===it)?1:Mh(e);var i=wd(t)?Cn:ao;return i(t,e)}function Ea(t){var e=wd(t)?Tn:lo;return e(t)}function Ma(t){if(null==t)return 0;if(Ja(t))return yh(t)?Q(t):t.length;var e=Sc(t);return e==Jt||e==ie?t.size:ji(t).length}function Pa(t,e,n){var i=wd(t)?_:co;return n&&Nr(t,e,n)&&(e=it),i(t,Er(e,3))}function Ca(t,e){if("function"!=typeof e)throw new fu(at);return t=Mh(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ta(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,pr(t,xt,it,it,it,it,e)}function Sa(t,e){var n;if("function"!=typeof e)throw new fu(at);return t=Mh(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Da(t,e,n){e=n?it:e;var i=pr(t,yt,it,it,it,it,it,e);return i.placeholder=Da.placeholder,i}function Aa(t,e,n){e=n?it:e;var i=pr(t,wt,it,it,it,it,it,e);return i.placeholder=Aa.placeholder,i}function Oa(t,e,n){function i(e){var n=d,i=p;return d=p=it,_=e,m=t.apply(i,n)}function o(t){return _=t,g=Oc(a,e),y?i(t):m}function r(t){var n=t-v,i=t-_,o=e-n;return w?Ju(o,f-i):o}function s(t){var n=t-v,i=t-_;return v===it||n>=e||n<0||w&&i>=f}function a(){var t=hd();return s(t)?h(t):void(g=Oc(a,r(t)))}function h(t){return g=it,b&&d?i(t):(d=p=it,m)}function l(){g!==it&&Ec(g),_=0,d=v=p=g=it}function u(){return g===it?m:h(hd())}function c(){var t=hd(),n=s(t);if(d=arguments,p=this,v=t,n){if(g===it)return o(v);if(w)return g=Oc(a,e),i(v)}return g===it&&(g=Oc(a,e)),m}var d,p,f,m,g,v,_=0,y=!1,w=!1,b=!0;if("function"!=typeof t)throw new fu(at);return e=Ch(e)||0,hh(n)&&(y=!!n.leading,w="maxWait"in n,f=w?$u(Ch(n.maxWait)||0,e):f,b="trailing"in n?!!n.trailing:b),c.cancel=l,c.flush=u,c}function Ia(t){return pr(t,Et)}function Ra(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new fu(at);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=t.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(Ra.Cache||cn),n}function za(t){if("function"!=typeof t)throw new fu(at);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ua(t){return Sa(2,t)}function Ba(t,e){if("function"!=typeof t)throw new fu(at);return e=e===it?e:Mh(e),ro(t,e)}function Na(t,e){if("function"!=typeof t)throw new fu(at);return e=null==e?0:$u(Mh(e),0),ro(function(n){var i=n[e],o=Co(n,0,e);return i&&m(o,i),s(t,this,o)})}function Fa(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new fu(at);return hh(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Oa(t,e,{leading:i,maxWait:e,trailing:o})}function ja(t){return Ta(t,1)}function Za(t,e){return fd(Mo(e),t)}function Wa(){if(!arguments.length)return[];var t=arguments[0];return wd(t)?t:[t]}function Ha(t){return Nn(t,pt)}function Ga(t,e){return e="function"==typeof e?e:it,Nn(t,pt,e)}function Va(t){return Nn(t,ct|pt)}function qa(t,e){return e="function"==typeof e?e:it,Nn(t,ct|pt,e)}function Ya(t,e){return null==e||jn(t,e,Hh(e))}function $a(t,e){return t===e||t!==t&&e!==e}function Ja(t){return null!=t&&ah(t.length)&&!rh(t)}function Ka(t){return lh(t)&&Ja(t)}function Qa(t){return t===!0||t===!1||lh(t)&&ui(t)==Ht}function Xa(t){return lh(t)&&1===t.nodeType&&!vh(t)}function th(t){if(null==t)return!0;if(Ja(t)&&(wd(t)||"string"==typeof t||"function"==typeof t.splice||Ld(t)||Pd(t)||yd(t)))return!t.length;var e=Sc(t);if(e==Jt||e==ie)return!t.size;if(Hr(t))return!ji(t).length;for(var n in t)if(wu.call(t,n))return!1;return!0}function eh(t,e){return Ai(t,e)}function nh(t,e,n){n="function"==typeof n?n:it;var i=n?n(t,e):it;return i===it?Ai(t,e,it,n):!!i}function ih(t){if(!lh(t))return!1;var e=ui(t);return e==qt||e==Vt||"string"==typeof t.message&&"string"==typeof t.name&&!vh(t)}function oh(t){return"number"==typeof t&&Vu(t)}function rh(t){if(!hh(t))return!1;var e=ui(t);return e==Yt||e==$t||e==Wt||e==ee}function sh(t){return"number"==typeof t&&t==Mh(t)}function ah(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=It}function hh(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function lh(t){return null!=t&&"object"==typeof t}function uh(t,e){return t===e||Ri(t,e,Pr(e))}function ch(t,e,n){return n="function"==typeof n?n:it,Ri(t,e,Pr(e),n)}function dh(t){return gh(t)&&t!=+t}function ph(t){if(Dc(t))throw new hu(st);return zi(t)}function fh(t){return null===t}function mh(t){return null==t}function gh(t){return"number"==typeof t||lh(t)&&ui(t)==Kt}function vh(t){if(!lh(t)||ui(t)!=Xt)return!1;var e=Du(t);if(null===e)return!0;var n=wu.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&yu.call(n)==ku}function _h(t){return sh(t)&&t>=-It&&t<=It}function yh(t){return"string"==typeof t||!wd(t)&&lh(t)&&ui(t)==oe}function wh(t){return"symbol"==typeof t||lh(t)&&ui(t)==re}function bh(t){return t===it}function Lh(t){return lh(t)&&Sc(t)==ae}function xh(t){return lh(t)&&ui(t)==he}function kh(t){if(!t)return[];if(Ja(t))return yh(t)?X(t):jo(t);if(zu&&t[zu])return H(t[zu]());var e=Sc(t),n=e==Jt?G:e==ie?Y:il;return n(t)}function Eh(t){if(!t)return 0===t?t:0;if(t=Ch(t),t===Ot||t===-Ot){var e=t<0?-1:1;return e*Rt}return t===t?t:0}function Mh(t){var e=Eh(t),n=e%1;return e===e?n?e-n:e:0}function Ph(t){return t?Bn(Mh(t),0,Ut):0}function Ch(t){if("number"==typeof t)return t;if(wh(t))return zt;if(hh(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=hh(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ze,"");var n=qe.test(t);return n||$e.test(t)?ii(t.slice(2),n?2:8):Ve.test(t)?zt:+t}function Th(t){return Zo(t,Gh(t))}function Sh(t){return t?Bn(Mh(t),-It,It):0===t?t:0}function Dh(t){return null==t?"":vo(t)}function Ah(t,e){var n=vc(t);return null==e?n:In(n,e)}function Oh(t,e){return b(t,Er(e,3),ei)}function Ih(t,e){return b(t,Er(e,3),oi)}function Rh(t,e){return null==t?t:wc(t,Er(e,3),Gh)}function zh(t,e){return null==t?t:bc(t,Er(e,3),Gh)}function Uh(t,e){return t&&ei(t,Er(e,3))}function Bh(t,e){return t&&oi(t,Er(e,3))}function Nh(t){return null==t?[]:ri(t,Hh(t))}function Fh(t){return null==t?[]:ri(t,Gh(t))}function jh(t,e,n){var i=null==t?it:ai(t,e);return i===it?n:i}function Zh(t,e){return null!=t&&Ar(t,e,_i)}function Wh(t,e){return null!=t&&Ar(t,e,Li)}function Hh(t){return Ja(t)?Mn(t):ji(t)}function Gh(t){return Ja(t)?Mn(t,!0):Zi(t)}function Vh(t,e){var n={};return e=Er(e,3),ei(t,function(t,i,o){zn(n,e(t,i,o),t)}),n}function qh(t,e){var n={};return e=Er(e,3),ei(t,function(t,i,o){zn(n,i,e(t,i,o))}),n}function Yh(t,e){return $h(t,za(Er(e)))}function $h(t,e){if(null==t)return{};var n=f(Lr(t),function(t){return[t]});return e=Er(e),Qi(t,n,function(t,n){return e(t,n[0])})}function Jh(t,e,n){e=Po(e,t);var i=-1,o=e.length;for(o||(o=1,t=it);++i<o;){var r=null==t?it:t[is(e[i])];r===it&&(i=o,r=n),t=rh(r)?r.call(t):r}return t}function Kh(t,e,n){return null==t?t:ho(t,e,n)}function Qh(t,e,n,i){return i="function"==typeof i?i:it,null==t?t:ho(t,e,n,i)}function Xh(t,e,n){var i=wd(t),o=i||Ld(t)||Pd(t);if(e=Er(e,4),null==n){var r=t&&t.constructor;n=o?i?new r:[]:hh(t)&&rh(r)?vc(Du(t)):{}}return(o?h:ei)(t,function(t,i,o){return e(n,t,i,o)}),n}function tl(t,e){return null==t||yo(t,e)}function el(t,e,n){return null==t?t:wo(t,e,Mo(n))}function nl(t,e,n,i){return i="function"==typeof i?i:it,null==t?t:wo(t,e,Mo(n),i)}function il(t){return null==t?[]:R(t,Hh(t))}function ol(t){return null==t?[]:R(t,Gh(t))}function rl(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=Ch(n),n=n===n?n:0),e!==it&&(e=Ch(e),e=e===e?e:0),Bn(Ch(t),e,n)}function sl(t,e,n){return e=Eh(e),n===it?(n=e,e=0):n=Eh(n),t=Ch(t),Ei(t,e,n)}function al(t,e,n){if(n&&"boolean"!=typeof n&&Nr(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=Eh(t),e===it?(e=t,t=0):e=Eh(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Xu();return Ju(t+o*(e-t+ni("1e-"+((o+"").length-1))),e)}return no(t,e)}function hl(t){return Xd(Dh(t).toLowerCase())}function ll(t){return t=Dh(t),t&&t.replace(Ke,yi).replace(Wn,"")}function ul(t,e,n){t=Dh(t),e=vo(e);var i=t.length;n=n===it?i:Bn(Mh(n),0,i);var o=n;return n-=e.length,n>=0&&t.slice(n,o)==e}function cl(t){return t=Dh(t),t&&Me.test(t)?t.replace(ke,wi):t}function dl(t){return t=Dh(t),t&&Re.test(t)?t.replace(Ie,"\\$&"):t}function pl(t,e,n){t=Dh(t),e=Mh(e);var i=e?Q(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return sr(Wu(o),n)+t+sr(Zu(o),n)}function fl(t,e,n){t=Dh(t),e=Mh(e);var i=e?Q(t):0;return e&&i<e?t+sr(e-i,n):t}function ml(t,e,n){t=Dh(t),e=Mh(e);var i=e?Q(t):0;return e&&i<e?sr(e-i,n)+t:t}function gl(t,e,n){return n||null==e?e=0:e&&(e=+e),Qu(Dh(t).replace(Ue,""),e||0)}function vl(t,e,n){return e=(n?Nr(t,e,n):e===it)?1:Mh(e),oo(Dh(t),e)}function _l(){var t=arguments,e=Dh(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function yl(t,e,n){return n&&"number"!=typeof n&&Nr(t,e,n)&&(e=n=it),(n=n===it?Ut:n>>>0)?(t=Dh(t),t&&("string"==typeof e||null!=e&&!Ed(e))&&(e=vo(e),!e&&Z(t))?Co(X(t),0,n):t.split(e,n)):[]}function wl(t,e,n){return t=Dh(t),n=null==n?0:Bn(Mh(n),0,t.length),e=vo(e),t.slice(n,n+e.length)==e}function bl(t,n,i){var o=e.templateSettings;i&&Nr(t,n,i)&&(n=it),t=Dh(t),n=Ad({},n,o,fr);var r,s,a=Ad({},n.imports,o.imports,fr),h=Hh(a),l=R(a,h),u=0,c=n.interpolate||Qe,d="__p += '",p=du((n.escape||Qe).source+"|"+c.source+"|"+(c===Te?He:Qe).source+"|"+(n.evaluate||Qe).source+"|$","g"),f="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++$n+"]")+"\n";t.replace(p,function(e,n,i,o,a,h){return i||(i=o),d+=t.slice(u,h).replace(Xe,F),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=h+e.length,e}),d+="';\n";var m=n.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(we,""):d).replace(be,"$1").replace(Le,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=tp(function(){return lu(h,f+"return "+d).apply(it,l)});if(g.source=d,ih(g))throw g;return g}function Ll(t){return Dh(t).toLowerCase()}function xl(t){return Dh(t).toUpperCase()}function kl(t,e,n){if(t=Dh(t),t&&(n||e===it))return t.replace(ze,"");if(!t||!(e=vo(e)))return t;var i=X(t),o=X(e),r=U(i,o),s=B(i,o)+1;return Co(i,r,s).join("")}function El(t,e,n){if(t=Dh(t),t&&(n||e===it))return t.replace(Be,"");if(!t||!(e=vo(e)))return t;var i=X(t),o=B(i,X(e))+1;return Co(i,0,o).join("")}function Ml(t,e,n){if(t=Dh(t),t&&(n||e===it))return t.replace(Ue,"");if(!t||!(e=vo(e)))return t;var i=X(t),o=U(i,X(e));return Co(i,o).join("")}function Pl(t,e){var n=Mt,i=Pt;if(hh(e)){var o="separator"in e?e.separator:o;n="length"in e?Mh(e.length):n,i="omission"in e?vo(e.omission):i}t=Dh(t);var r=t.length;if(Z(t)){var s=X(t);r=s.length}if(n>=r)return t;var a=n-Q(i);if(a<1)return i;var h=s?Co(s,0,a).join(""):t.slice(0,a);if(o===it)return h+i;if(s&&(a+=h.length-a),Ed(o)){if(t.slice(a).search(o)){var l,u=h;for(o.global||(o=du(o.source,Dh(Ge.exec(o))+"g")),o.lastIndex=0;l=o.exec(u);)var c=l.index;h=h.slice(0,c===it?a:c)}}else if(t.indexOf(vo(o),a)!=a){var d=h.lastIndexOf(o);d>-1&&(h=h.slice(0,d))}return h+i}function Cl(t){return t=Dh(t),t&&Ee.test(t)?t.replace(xe,bi):t}function Tl(t,e,n){return t=Dh(t),e=n?it:e,e===it?W(t)?nt(t):w(t):t.match(e)||[]}function Sl(t){var e=null==t?0:t.length,n=Er();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new fu(at);return[n(t[0]),t[1]]}):[],ro(function(n){for(var i=-1;++i<e;){var o=t[i];if(s(o[0],this,n))return s(o[1],this,n)}})}function Dl(t){return Fn(Nn(t,ct))}function Al(t){return function(){return t}}function Ol(t,e){return null==t||t!==t?e:t}function Il(t){return t}function Rl(t){return Fi("function"==typeof t?t:Nn(t,ct))}function zl(t){return Gi(Nn(t,ct))}function Ul(t,e){return Vi(t,Nn(e,ct))}function Bl(t,e,n){var i=Hh(e),o=ri(e,i);null!=n||hh(e)&&(o.length||!i.length)||(n=e,e=t,t=this,o=ri(e,Hh(e)));var r=!(hh(n)&&"chain"in n&&!n.chain),s=rh(t);return h(o,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__),o=n.__actions__=jo(this.__actions__);return o.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,m([this.value()],arguments))})}),t}function Nl(){return si._===this&&(si._=Eu),this}function Fl(){}function jl(t){return t=Mh(t),ro(function(e){return $i(e,t)})}function Zl(t){return Fr(t)?P(is(t)):Xi(t)}function Wl(t){return function(e){return null==t?it:ai(t,e)}}function Hl(){return[]}function Gl(){return!1}function Vl(){return{}}function ql(){return""}function Yl(){return!0}function $l(t,e){if(t=Mh(t),t<1||t>It)return[];var n=Ut,i=Ju(t,Ut);e=Er(e),t-=Ut;for(var o=A(i,e);++n<t;)e(n);return o}function Jl(t){return wd(t)?f(t,is):wh(t)?[t]:jo(Rc(Dh(t)))}function Kl(t){var e=++bu;return Dh(t)+e}function Ql(t){return t&&t.length?qn(t,Il,ci):it}function Xl(t,e){return t&&t.length?qn(t,Er(e,2),ci):it}function tu(t){return M(t,Il)}function eu(t,e){return M(t,Er(e,2))}function nu(t){return t&&t.length?qn(t,Il,Wi):it}function iu(t,e){return t&&t.length?qn(t,Er(e,2),Wi):it}function ou(t){return t&&t.length?D(t,Il):0}function ru(t,e){return t&&t.length?D(t,Er(e,2)):0}t=null==t?si:xi.defaults(si.Object(),t,xi.pick(si,Yn));var su=t.Array,au=t.Date,hu=t.Error,lu=t.Function,uu=t.Math,cu=t.Object,du=t.RegExp,pu=t.String,fu=t.TypeError,mu=su.prototype,gu=lu.prototype,vu=cu.prototype,_u=t["__core-js_shared__"],yu=gu.toString,wu=vu.hasOwnProperty,bu=0,Lu=function(){
var t=/[^.]+$/.exec(_u&&_u.keys&&_u.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xu=vu.toString,ku=yu.call(cu),Eu=si._,Mu=du("^"+yu.call(wu).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pu=li?t.Buffer:it,Cu=t.Symbol,Tu=t.Uint8Array,Su=Pu?Pu.allocUnsafe:it,Du=V(cu.getPrototypeOf,cu),Au=cu.create,Ou=vu.propertyIsEnumerable,Iu=mu.splice,Ru=Cu?Cu.isConcatSpreadable:it,zu=Cu?Cu.iterator:it,Uu=Cu?Cu.toStringTag:it,Bu=function(){try{var t=Cr(cu,"defineProperty");return t({},"",{}),t}catch(e){}}(),Nu=t.clearTimeout!==si.clearTimeout&&t.clearTimeout,Fu=au&&au.now!==si.Date.now&&au.now,ju=t.setTimeout!==si.setTimeout&&t.setTimeout,Zu=uu.ceil,Wu=uu.floor,Hu=cu.getOwnPropertySymbols,Gu=Pu?Pu.isBuffer:it,Vu=t.isFinite,qu=mu.join,Yu=V(cu.keys,cu),$u=uu.max,Ju=uu.min,Ku=au.now,Qu=t.parseInt,Xu=uu.random,tc=mu.reverse,ec=Cr(t,"DataView"),nc=Cr(t,"Map"),ic=Cr(t,"Promise"),oc=Cr(t,"Set"),rc=Cr(t,"WeakMap"),sc=Cr(cu,"create"),ac=rc&&new rc,hc={},lc=os(ec),uc=os(nc),cc=os(ic),dc=os(oc),pc=os(rc),fc=Cu?Cu.prototype:it,mc=fc?fc.valueOf:it,gc=fc?fc.toString:it,vc=function(){function t(){}return function(e){if(!hh(e))return{};if(Au)return Au(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();e.templateSettings={escape:Pe,evaluate:Ce,interpolate:Te,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,i.prototype=vc(n.prototype),i.prototype.constructor=i,y.prototype=vc(n.prototype),y.prototype.constructor=y,et.prototype.clear=Ze,et.prototype["delete"]=tn,et.prototype.get=en,et.prototype.has=nn,et.prototype.set=on,rn.prototype.clear=sn,rn.prototype["delete"]=an,rn.prototype.get=hn,rn.prototype.has=ln,rn.prototype.set=un,cn.prototype.clear=dn,cn.prototype["delete"]=pn,cn.prototype.get=fn,cn.prototype.has=mn,cn.prototype.set=gn,vn.prototype.add=vn.prototype.push=_n,vn.prototype.has=yn,wn.prototype.clear=bn,wn.prototype["delete"]=Ln,wn.prototype.get=xn,wn.prototype.has=kn,wn.prototype.set=En;var _c=qo(ei),yc=qo(oi,!0),wc=Yo(),bc=Yo(!0),Lc=ac?function(t,e){return ac.set(t,e),t}:Il,xc=Bu?function(t,e){return Bu(t,"toString",{configurable:!0,enumerable:!1,value:Al(e),writable:!0})}:Il,kc=ro,Ec=Nu||function(t){return si.clearTimeout(t)},Mc=oc&&1/Y(new oc([,-0]))[1]==Ot?function(t){return new oc(t)}:Fl,Pc=ac?function(t){return ac.get(t)}:Fl,Cc=Hu?function(t){return null==t?[]:(t=cu(t),c(Hu(t),function(e){return Ou.call(t,e)}))}:Hl,Tc=Hu?function(t){for(var e=[];t;)m(e,Cc(t)),t=Du(t);return e}:Hl,Sc=ui;(ec&&Sc(new ec(new ArrayBuffer(1)))!=ue||nc&&Sc(new nc)!=Jt||ic&&Sc(ic.resolve())!=te||oc&&Sc(new oc)!=ie||rc&&Sc(new rc)!=ae)&&(Sc=function(t){var e=ui(t),n=e==Xt?t.constructor:it,i=n?os(n):"";if(i)switch(i){case lc:return ue;case uc:return Jt;case cc:return te;case dc:return ie;case pc:return ae}return e});var Dc=_u?rh:Gl,Ac=es(Lc),Oc=ju||function(t,e){return si.setTimeout(t,e)},Ic=es(xc),Rc=qr(function(t){var e=[];return Ae.test(t)&&e.push(""),t.replace(Oe,function(t,n,i,o){e.push(i?o.replace(We,"$1"):n||t)}),e}),zc=ro(function(t,e){return Ka(t)?Gn(t,ti(e,1,Ka,!0)):[]}),Uc=ro(function(t,e){var n=Es(e);return Ka(n)&&(n=it),Ka(t)?Gn(t,ti(e,1,Ka,!0),Er(n,2)):[]}),Bc=ro(function(t,e){var n=Es(e);return Ka(n)&&(n=it),Ka(t)?Gn(t,ti(e,1,Ka,!0),it,n):[]}),Nc=ro(function(t){var e=f(t,Eo);return e.length&&e[0]===t[0]?Mi(e):[]}),Fc=ro(function(t){var e=Es(t),n=f(t,Eo);return e===Es(n)?e=it:n.pop(),n.length&&n[0]===t[0]?Mi(n,Er(e,2)):[]}),jc=ro(function(t){var e=Es(t),n=f(t,Eo);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?Mi(n,it,e):[]}),Zc=ro(Cs),Wc=wr(function(t,e){var n=null==t?0:t.length,i=Un(t,e);return eo(t,f(e,function(t){return Br(t,n)?+t:t}).sort(Uo)),i}),Hc=ro(function(t){return _o(ti(t,1,Ka,!0))}),Gc=ro(function(t){var e=Es(t);return Ka(e)&&(e=it),_o(ti(t,1,Ka,!0),Er(e,2))}),Vc=ro(function(t){var e=Es(t);return e="function"==typeof e?e:it,_o(ti(t,1,Ka,!0),it,e)}),qc=ro(function(t,e){return Ka(t)?Gn(t,e):[]}),Yc=ro(function(t){return xo(c(t,Ka))}),$c=ro(function(t){var e=Es(t);return Ka(e)&&(e=it),xo(c(t,Ka),Er(e,2))}),Jc=ro(function(t){var e=Es(t);return e="function"==typeof e?e:it,xo(c(t,Ka),it,e)}),Kc=ro(Js),Qc=ro(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Ks(t,n)}),Xc=wr(function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,r=function(e){return Un(e,t)};return!(e>1||this.__actions__.length)&&o instanceof y&&Br(n)?(o=o.slice(n,+n+(e?1:0)),o.__actions__.push({func:na,args:[r],thisArg:it}),new i(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(r)}),td=Go(function(t,e,n){wu.call(t,n)?++t[n]:zn(t,n,1)}),ed=tr(ms),nd=tr(gs),id=Go(function(t,e,n){wu.call(t,n)?t[n].push(e):zn(t,n,[e])}),od=ro(function(t,e,n){var i=-1,o="function"==typeof e,r=Ja(t)?su(t.length):[];return _c(t,function(t){r[++i]=o?s(e,t,n):Ci(t,e,n)}),r}),rd=Go(function(t,e,n){zn(t,n,e)}),sd=Go(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ad=ro(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Nr(t,e[0],e[1])?e=[]:n>2&&Nr(e[0],e[1],e[2])&&(e=[e[0]]),Ji(t,ti(e,1),[])}),hd=Fu||function(){return si.Date.now()},ld=ro(function(t,e,n){var i=gt;if(n.length){var o=q(n,kr(ld));i|=bt}return pr(t,i,e,n,o)}),ud=ro(function(t,e,n){var i=gt|vt;if(n.length){var o=q(n,kr(ud));i|=bt}return pr(e,i,t,n,o)}),cd=ro(function(t,e){return Hn(t,1,e)}),dd=ro(function(t,e,n){return Hn(t,Ch(e)||0,n)});Ra.Cache=cn;var pd=kc(function(t,e){e=1==e.length&&wd(e[0])?f(e[0],I(Er())):f(ti(e,1),I(Er()));var n=e.length;return ro(function(i){for(var o=-1,r=Ju(i.length,n);++o<r;)i[o]=e[o].call(this,i[o]);return s(t,this,i)})}),fd=ro(function(t,e){var n=q(e,kr(fd));return pr(t,bt,it,e,n)}),md=ro(function(t,e){var n=q(e,kr(md));return pr(t,Lt,it,e,n)}),gd=wr(function(t,e){return pr(t,kt,it,it,it,e)}),vd=lr(ci),_d=lr(function(t,e){return t>=e}),yd=Ti(function(){return arguments}())?Ti:function(t){return lh(t)&&wu.call(t,"callee")&&!Ou.call(t,"callee")},wd=su.isArray,bd=di?I(di):Si,Ld=Gu||Gl,xd=pi?I(pi):Di,kd=fi?I(fi):Ii,Ed=mi?I(mi):Ui,Md=gi?I(gi):Bi,Pd=vi?I(vi):Ni,Cd=lr(Wi),Td=lr(function(t,e){return t<=e}),Sd=Vo(function(t,e){if(Hr(e)||Ja(e))return void Zo(e,Hh(e),t);for(var n in e)wu.call(e,n)&&Dn(t,n,e[n])}),Dd=Vo(function(t,e){Zo(e,Gh(e),t)}),Ad=Vo(function(t,e,n,i){Zo(e,Gh(e),t,i)}),Od=Vo(function(t,e,n,i){Zo(e,Hh(e),t,i)}),Id=wr(Un),Rd=ro(function(t){return t.push(it,fr),s(Ad,it,t)}),zd=ro(function(t){return t.push(it,mr),s(jd,it,t)}),Ud=ir(function(t,e,n){t[e]=n},Al(Il)),Bd=ir(function(t,e,n){wu.call(t,e)?t[e].push(n):t[e]=[n]},Er),Nd=ro(Ci),Fd=Vo(function(t,e,n){qi(t,e,n)}),jd=Vo(function(t,e,n,i){qi(t,e,n,i)}),Zd=wr(function(t,e){var n={};if(null==t)return n;var i=!1;e=f(e,function(e){return e=Po(e,t),i||(i=e.length>1),e}),Zo(t,Lr(t),n),i&&(n=Nn(n,ct|dt|pt,gr));for(var o=e.length;o--;)yo(n,e[o]);return n}),Wd=wr(function(t,e){return null==t?{}:Ki(t,e)}),Hd=dr(Hh),Gd=dr(Gh),Vd=Ko(function(t,e,n){return e=e.toLowerCase(),t+(n?hl(e):e)}),qd=Ko(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Yd=Ko(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),$d=Jo("toLowerCase"),Jd=Ko(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kd=Ko(function(t,e,n){return t+(n?" ":"")+Xd(e)}),Qd=Ko(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xd=Jo("toUpperCase"),tp=ro(function(t,e){try{return s(t,it,e)}catch(n){return ih(n)?n:new hu(n)}}),ep=wr(function(t,e){return h(e,function(e){e=is(e),zn(t,e,ld(t[e],t))}),t}),np=er(),ip=er(!0),op=ro(function(t,e){return function(n){return Ci(n,t,e)}}),rp=ro(function(t,e){return function(n){return Ci(t,n,e)}}),sp=rr(f),ap=rr(u),hp=rr(_),lp=hr(),up=hr(!0),cp=or(function(t,e){return t+e},0),dp=cr("ceil"),pp=or(function(t,e){return t/e},1),fp=cr("floor"),mp=or(function(t,e){return t*e},1),gp=cr("round"),vp=or(function(t,e){return t-e},0);return e.after=Ca,e.ary=Ta,e.assign=Sd,e.assignIn=Dd,e.assignInWith=Ad,e.assignWith=Od,e.at=Id,e.before=Sa,e.bind=ld,e.bindAll=ep,e.bindKey=ud,e.castArray=Wa,e.chain=ta,e.chunk=as,e.compact=hs,e.concat=ls,e.cond=Sl,e.conforms=Dl,e.constant=Al,e.countBy=td,e.create=Ah,e.curry=Da,e.curryRight=Aa,e.debounce=Oa,e.defaults=Rd,e.defaultsDeep=zd,e.defer=cd,e.delay=dd,e.difference=zc,e.differenceBy=Uc,e.differenceWith=Bc,e.drop=us,e.dropRight=cs,e.dropRightWhile=ds,e.dropWhile=ps,e.fill=fs,e.filter=ca,e.flatMap=da,e.flatMapDeep=pa,e.flatMapDepth=fa,e.flatten=vs,e.flattenDeep=_s,e.flattenDepth=ys,e.flip=Ia,e.flow=np,e.flowRight=ip,e.fromPairs=ws,e.functions=Nh,e.functionsIn=Fh,e.groupBy=id,e.initial=xs,e.intersection=Nc,e.intersectionBy=Fc,e.intersectionWith=jc,e.invert=Ud,e.invertBy=Bd,e.invokeMap=od,e.iteratee=Rl,e.keyBy=rd,e.keys=Hh,e.keysIn=Gh,e.map=_a,e.mapKeys=Vh,e.mapValues=qh,e.matches=zl,e.matchesProperty=Ul,e.memoize=Ra,e.merge=Fd,e.mergeWith=jd,e.method=op,e.methodOf=rp,e.mixin=Bl,e.negate=za,e.nthArg=jl,e.omit=Zd,e.omitBy=Yh,e.once=Ua,e.orderBy=ya,e.over=sp,e.overArgs=pd,e.overEvery=ap,e.overSome=hp,e.partial=fd,e.partialRight=md,e.partition=sd,e.pick=Wd,e.pickBy=$h,e.property=Zl,e.propertyOf=Wl,e.pull=Zc,e.pullAll=Cs,e.pullAllBy=Ts,e.pullAllWith=Ss,e.pullAt=Wc,e.range=lp,e.rangeRight=up,e.rearg=gd,e.reject=La,e.remove=Ds,e.rest=Ba,e.reverse=As,e.sampleSize=ka,e.set=Kh,e.setWith=Qh,e.shuffle=Ea,e.slice=Os,e.sortBy=ad,e.sortedUniq=Fs,e.sortedUniqBy=js,e.split=yl,e.spread=Na,e.tail=Zs,e.take=Ws,e.takeRight=Hs,e.takeRightWhile=Gs,e.takeWhile=Vs,e.tap=ea,e.throttle=Fa,e.thru=na,e.toArray=kh,e.toPairs=Hd,e.toPairsIn=Gd,e.toPath=Jl,e.toPlainObject=Th,e.transform=Xh,e.unary=ja,e.union=Hc,e.unionBy=Gc,e.unionWith=Vc,e.uniq=qs,e.uniqBy=Ys,e.uniqWith=$s,e.unset=tl,e.unzip=Js,e.unzipWith=Ks,e.update=el,e.updateWith=nl,e.values=il,e.valuesIn=ol,e.without=qc,e.words=Tl,e.wrap=Za,e.xor=Yc,e.xorBy=$c,e.xorWith=Jc,e.zip=Kc,e.zipObject=Qs,e.zipObjectDeep=Xs,e.zipWith=Qc,e.entries=Hd,e.entriesIn=Gd,e.extend=Dd,e.extendWith=Ad,Bl(e,e),e.add=cp,e.attempt=tp,e.camelCase=Vd,e.capitalize=hl,e.ceil=dp,e.clamp=rl,e.clone=Ha,e.cloneDeep=Va,e.cloneDeepWith=qa,e.cloneWith=Ga,e.conformsTo=Ya,e.deburr=ll,e.defaultTo=Ol,e.divide=pp,e.endsWith=ul,e.eq=$a,e.escape=cl,e.escapeRegExp=dl,e.every=ua,e.find=ed,e.findIndex=ms,e.findKey=Oh,e.findLast=nd,e.findLastIndex=gs,e.findLastKey=Ih,e.floor=fp,e.forEach=ma,e.forEachRight=ga,e.forIn=Rh,e.forInRight=zh,e.forOwn=Uh,e.forOwnRight=Bh,e.get=jh,e.gt=vd,e.gte=_d,e.has=Zh,e.hasIn=Wh,e.head=bs,e.identity=Il,e.includes=va,e.indexOf=Ls,e.inRange=sl,e.invoke=Nd,e.isArguments=yd,e.isArray=wd,e.isArrayBuffer=bd,e.isArrayLike=Ja,e.isArrayLikeObject=Ka,e.isBoolean=Qa,e.isBuffer=Ld,e.isDate=xd,e.isElement=Xa,e.isEmpty=th,e.isEqual=eh,e.isEqualWith=nh,e.isError=ih,e.isFinite=oh,e.isFunction=rh,e.isInteger=sh,e.isLength=ah,e.isMap=kd,e.isMatch=uh,e.isMatchWith=ch,e.isNaN=dh,e.isNative=ph,e.isNil=mh,e.isNull=fh,e.isNumber=gh,e.isObject=hh,e.isObjectLike=lh,e.isPlainObject=vh,e.isRegExp=Ed,e.isSafeInteger=_h,e.isSet=Md,e.isString=yh,e.isSymbol=wh,e.isTypedArray=Pd,e.isUndefined=bh,e.isWeakMap=Lh,e.isWeakSet=xh,e.join=ks,e.kebabCase=qd,e.last=Es,e.lastIndexOf=Ms,e.lowerCase=Yd,e.lowerFirst=$d,e.lt=Cd,e.lte=Td,e.max=Ql,e.maxBy=Xl,e.mean=tu,e.meanBy=eu,e.min=nu,e.minBy=iu,e.stubArray=Hl,e.stubFalse=Gl,e.stubObject=Vl,e.stubString=ql,e.stubTrue=Yl,e.multiply=mp,e.nth=Ps,e.noConflict=Nl,e.noop=Fl,e.now=hd,e.pad=pl,e.padEnd=fl,e.padStart=ml,e.parseInt=gl,e.random=al,e.reduce=wa,e.reduceRight=ba,e.repeat=vl,e.replace=_l,e.result=Jh,e.round=gp,e.runInContext=ki,e.sample=xa,e.size=Ma,e.snakeCase=Jd,e.some=Pa,e.sortedIndex=Is,e.sortedIndexBy=Rs,e.sortedIndexOf=zs,e.sortedLastIndex=Us,e.sortedLastIndexBy=Bs,e.sortedLastIndexOf=Ns,e.startCase=Kd,e.startsWith=wl,e.subtract=vp,e.sum=ou,e.sumBy=ru,e.template=bl,e.times=$l,e.toFinite=Eh,e.toInteger=Mh,e.toLength=Ph,e.toLower=Ll,e.toNumber=Ch,e.toSafeInteger=Sh,e.toString=Dh,e.toUpper=xl,e.trim=kl,e.trimEnd=El,e.trimStart=Ml,e.truncate=Pl,e.unescape=Cl,e.uniqueId=Kl,e.upperCase=Qd,e.upperFirst=Xd,e.each=ma,e.eachRight=ga,e.first=bs,Bl(e,function(){var t={};return ei(e,function(n,i){wu.call(e.prototype,i)||(t[i]=n)}),t}(),{chain:!1}),e.VERSION=ot,h(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),h(["drop","take"],function(t,e){y.prototype[t]=function(n){n=n===it?1:$u(Mh(n),0);var i=this.__filtered__&&!e?new y(this):this.clone();return i.__filtered__?i.__takeCount__=Ju(n,i.__takeCount__):i.__views__.push({size:Ju(n,Ut),type:t+(i.__dir__<0?"Right":"")}),i},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),h(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==St||n==At;y.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Er(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),h(["head","last"],function(t,e){var n="take"+(e?"Right":"");y.prototype[t]=function(){return this[n](1).value()[0]}}),h(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");y.prototype[t]=function(){return this.__filtered__?new y(this):this[n](1)}}),y.prototype.compact=function(){return this.filter(Il)},y.prototype.find=function(t){return this.filter(t).head()},y.prototype.findLast=function(t){return this.reverse().find(t)},y.prototype.invokeMap=ro(function(t,e){return"function"==typeof t?new y(this):this.map(function(n){return Ci(n,t,e)})}),y.prototype.reject=function(t){return this.filter(za(Er(t)))},y.prototype.slice=function(t,e){t=Mh(t);var n=this;return n.__filtered__&&(t>0||e<0)?new y(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=Mh(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},y.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},y.prototype.toArray=function(){return this.take(Ut)},ei(y.prototype,function(t,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=e[r?"take"+("last"==n?"Right":""):n],a=r||/^find/.test(n);s&&(e.prototype[n]=function(){var n=this.__wrapped__,h=r?[1]:arguments,l=n instanceof y,u=h[0],c=l||wd(n),d=function(t){var n=s.apply(e,m([t],h));return r&&p?n[0]:n};c&&o&&"function"==typeof u&&1!=u.length&&(l=c=!1);var p=this.__chain__,f=!!this.__actions__.length,g=a&&!p,v=l&&!f;if(!a&&c){n=v?n:new y(this);var _=t.apply(n,h);return _.__actions__.push({func:na,args:[d],thisArg:it}),new i(_,p)}return g&&v?t.apply(this,h):(_=this.thru(d),g?r?_.value()[0]:_.value():_)})}),h(["pop","push","shift","sort","splice","unshift"],function(t){var n=mu[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var e=this.value();return n.apply(wd(e)?e:[],t)}return this[i](function(e){return n.apply(wd(e)?e:[],t)})}}),ei(y.prototype,function(t,n){var i=e[n];if(i){var o=i.name+"",r=hc[o]||(hc[o]=[]);r.push({name:n,func:i})}}),hc[nr(it,vt).name]=[{name:"wrapper",func:it}],y.prototype.clone=C,y.prototype.reverse=J,y.prototype.value=tt,e.prototype.at=Xc,e.prototype.chain=ia,e.prototype.commit=oa,e.prototype.next=ra,e.prototype.plant=aa,e.prototype.reverse=ha,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=la,e.prototype.first=e.prototype.head,zu&&(e.prototype[zu]=sa),e},xi=Li();"function"==typeof t&&"object"==typeof t.amd&&t.amd?(si._=xi,t(function(){return xi})):hi?((hi.exports=xi)._=xi,ai._=xi):si._=xi}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,n,i){!function(e,o){"object"==typeof i&&"undefined"!=typeof n?n.exports=o():"function"==typeof t&&t.amd?t(o):(e.Ractive=e.Ractive||{},e.Ractive.events=e.Ractive.events||{},e.Ractive.events.tap=o())}(this,function(){"use strict";function t(t,n){return new e(t,n)}function e(t,e){this.node=t,this.callback=e,this.preventMousedownEvents=!1,this.bind(t)}function n(t){this.__tap_handler__.mousedown(t)}function i(t){this.__tap_handler__.touchdown(t)}function o(){this.addEventListener("keydown",s,!1),this.addEventListener("blur",r,!1)}function r(){this.removeEventListener("keydown",s,!1),this.removeEventListener("blur",r,!1)}function s(t){32===t.which&&this.__tap_handler__.fire()}var a=5,h=400;return e.prototype={bind:function(t){window.navigator.pointerEnabled?t.addEventListener("pointerdown",n,!1):window.navigator.msPointerEnabled?t.addEventListener("MSPointerDown",n,!1):(t.addEventListener("mousedown",n,!1),t.addEventListener("touchstart",i,!1)),"BUTTON"!==t.tagName&&"button"!==t.type||t.addEventListener("focus",o,!1),t.__tap_handler__=this},fire:function(t,e,n){this.callback({node:this.node,original:t,x:e,y:n})},mousedown:function(t){var e=this;if(!this.preventMousedownEvents&&(void 0===t.which||1===t.which)){var n=t.clientX,i=t.clientY,o=t.pointerId,r=function(t){t.pointerId==o&&(e.fire(t,n,i),l())},s=function(t){t.pointerId==o&&(Math.abs(t.clientX-n)>=a||Math.abs(t.clientY-i)>=a)&&l()},l=function(){e.node.removeEventListener("MSPointerUp",r,!1),document.removeEventListener("MSPointerMove",s,!1),document.removeEventListener("MSPointerCancel",l,!1),e.node.removeEventListener("pointerup",r,!1),document.removeEventListener("pointermove",s,!1),document.removeEventListener("pointercancel",l,!1),e.node.removeEventListener("click",r,!1),document.removeEventListener("mousemove",s,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",r,!1),document.addEventListener("pointermove",s,!1),document.addEventListener("pointercancel",l,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",r,!1),document.addEventListener("MSPointerMove",s,!1),document.addEventListener("MSPointerCancel",l,!1)):(this.node.addEventListener("click",r,!1),document.addEventListener("mousemove",s,!1)),setTimeout(l,h)}},touchdown:function(t){var e=this,n=t.touches[0],i=n.clientX,o=n.clientY,r=n.identifier,s=function(t){var n=t.changedTouches[0];return n.identifier!==r?void u():(t.preventDefault(),e.preventMousedownEvents=!0,clearTimeout(e.preventMousedownTimeout),e.preventMousedownTimeout=setTimeout(function(){e.preventMousedownEvents=!1},400),e.fire(t,i,o),void u())},l=function(t){1===t.touches.length&&t.touches[0].identifier===r||u();var e=t.touches[0];(Math.abs(e.clientX-i)>=a||Math.abs(e.clientY-o)>=a)&&u()},u=function(){e.node.removeEventListener("touchend",s,!1),window.removeEventListener("touchmove",l,!1),window.removeEventListener("touchcancel",u,!1)};this.node.addEventListener("touchend",s,!1),window.addEventListener("touchmove",l,!1),window.addEventListener("touchcancel",u,!1),setTimeout(u,h)},teardown:function(){var t=this.node;t.removeEventListener("pointerdown",n,!1),t.removeEventListener("MSPointerDown",n,!1),t.removeEventListener("mousedown",n,!1),t.removeEventListener("touchstart",i,!1),t.removeEventListener("focus",o,!1)}},t})},{}],10:[function(e,n,i){!function(e,o){"object"==typeof i&&"undefined"!=typeof n?n.exports=o():"function"==typeof t&&t.amd?t(o):e.Ractive=o()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o,r;r=n.shift();)for(o in r)Ca.call(r,o)&&(t[o]=r[o]);return t}function o(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function r(t){return"[object Array]"===Ta.call(t)}function s(t){return Sa.test(Ta.call(t))}function a(t,e){return null===t&&null===e||"object"!=typeof t&&"object"!=typeof e&&t===e}function h(t){return!isNaN(parseFloat(t))&&isFinite(t)}function l(t){return t&&"[object Object]"===Ta.call(t)}function u(t,e){return t.replace(/%s/g,function(){return e.shift()})}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw t=u(t,n),new Error(t)}function d(){Vy.DEBUG&&Ea.apply(null,arguments)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=u(t,n),Ma(t,n)}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=u(t,n),Aa[t]||(Aa[t]=!0,Ma(t,n))}function m(){Vy.DEBUG&&p.apply(null,arguments)}function g(){Vy.DEBUG&&f.apply(null,arguments)}function v(t,e,n){var i=_(t,e,n);return i?i[t][n]:null}function _(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function y(t){return function(){return t}}function w(t){var e,n,i,o,r,s;for(e=t.split("."),(n=ja[e.length])||(n=b(e.length)),r=[],i=function(t,n){return t?"*":e[n]},o=n.length;o--;)s=n[o].map(i).join("."),r.hasOwnProperty(s)||(r.push(s),r[s]=!0);return r}function b(t){var e,n,i,o,r,s,a,h,l="";if(!ja[t]){for(i=[];l.length<t;)l+=1;for(e=parseInt(l,2),o=function(t){return"1"===t},r=0;r<=e;r+=1){for(n=r.toString(2);n.length<t;)n="0"+n;for(h=[],a=n.length,s=0;s<a;s++)h.push(o(n[s]));i[r]=h}ja[t]=i}return ja[t]}function L(t,e,n,i){var o=t[e];if(!o||!o.equalsOrStartsWith(i)&&o.equalsOrStartsWith(n))return t[e]=o?o.replace(n,i):i,!0}function x(t){var e=t.slice(2);return"i"===t[1]&&h(e)?+e:e}function k(t){return null==t?t:(Ha.hasOwnProperty(t)||(Ha[t]=new Ga(t)),Ha[t])}function E(t,e){function n(e,n){var i,o,s;return n.isRoot?s=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],o=i?i.get():t.viewmodel.get(n),s=o?Object.keys(o):null),s&&s.forEach(function(t){"_ractive"===t&&r(o)||e.push(n.join(t))}),e}var i,o,s;for(i=e.str.split("."),s=[qa];o=i.shift();)"*"===o?s=s.reduce(n,[]):s[0]===qa?s[0]=k(o):s=s.map(M(o));return s}function M(t){return function(e){return e.join(t)}}function P(t){return t?t.replace(Za,".$1"):""}function C(t,e,n){if("string"!=typeof e||!h(n))throw new Error("Bad arguments");var i=void 0,o=void 0;if(/\*/.test(e))return o={},E(t,k(P(e))).forEach(function(e){var i=t.viewmodel.get(e);if(!h(i))throw new Error($a);o[e.str]=i+n}),t.set(o);if(i=t.get(e),!h(i))throw new Error($a);return t.set(e,+i+n)}function T(t,e){return Ya(this,t,void 0===e?1:+e)}function S(t){this.event=t,this.method="on"+t,this.deprecate=th[t]}function D(t,e){var n=t.indexOf(e);n===-1&&t.push(e)}function A(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}function O(t,e){var n;if(!r(t)||!r(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function I(t){return"string"==typeof t?[t]:void 0===t?[]:t}function R(t){return t[t.length-1]}function z(t,e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}function U(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function B(t){setTimeout(t,0)}function N(t,e){return function(){for(var n;n=t.shift();)n(e)}}function F(t,e,n,i){var o;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof eh)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{o=e.then}catch(r){return void i(r)}if("function"==typeof o){var s,a,h;a=function(e){s||(s=!0,F(t,e,n,i))},h=function(t){s||(s=!0,i(t))};try{o.call(e,a,h)}catch(r){if(!s)return i(r),void(s=!0)}}else n(e)}}function j(t,e,n){var i;return e=P(e),"~/"===e.substr(0,2)?(i=k(e.substring(2)),H(t,i.firstKey,n)):"."===e[0]?(i=Z(ah(n),e),i&&H(t,i.firstKey,n)):i=W(t,k(e),n),i}function Z(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return k(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),k(n.join("."))}return k(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function W(t,e,n,i){var o,r,s,a,h;if(e.isRoot)return e;for(r=e.firstKey;n;)if(o=n.context,n=n.parent,o&&(a=!0,s=t.viewmodel.get(o),s&&("object"==typeof s||"function"==typeof s)&&r in s))return o.join(e.str);return G(t.viewmodel,r)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,r=k(r),h=W(t.parent,r,n,!0))?(t.viewmodel.map(r,{origin:t.parent.viewmodel,keypath:h}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function H(t,e){var n;!t.parent||t.isolated||G(t.viewmodel,e)||(e=k(e),(n=W(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function G(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function V(t){t.teardown()}function q(t){t.unbind()}function Y(t){t.unrender()}function $(t){t.cancel()}function J(t){t.detach()}function K(t){t.detachNodes()}function Q(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function X(){for(var t,e,n;uh.ractives.length;)e=uh.ractives.pop(),n=e.viewmodel.applyChanges(),n&&fh.fire(e,n);for(tt(),t=0;t<uh.views.length;t+=1)uh.views[t].update();for(uh.views.length=0,t=0;t<uh.tasks.length;t+=1)uh.tasks[t]();if(uh.tasks.length=0,uh.ractives.length)return X()}function tt(){var t,e,n,i;for(t=ph.length;t--;)e=ph[t],e.keypath?ph.splice(t,1):(n=hh(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),ph.splice(t,1));i&&i.forEach(et)}function et(t){t.item.resolve(t.keypath)}function nt(t,e,n){var i,o,r,s,a,h,l,u,c,d,p,f,m,g;if(i=new sh(function(t){return o=t}),"object"==typeof t){n=e||{},h=n.easing,l=n.duration,a=[],u=n.step,c=n.complete,(u||c)&&(p={},n.step=null,n.complete=null,d=function(t){return function(e,n){p[t]=n}});for(r in t)t.hasOwnProperty(r)&&((u||c)&&(f=d(r),n={easing:h,duration:l},u&&(n.step=f)),n.complete=c?f:Da,a.push(it(this,r,t[r],n)));return g={easing:h,duration:l},u&&(g.step=function(t){return u(t,p)}),c&&i.then(function(t){return c(t,p)}),g.complete=o,m=it(this,null,null,g),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=o,s=it(this,t,e,n),i.stop=function(){return s.stop()},i}function it(t,e,n,i){var o,r,s,h;return e&&(e=k(P(e))),null!==e&&(h=t.viewmodel.get(e)),_h.abort(e,t),a(h,n)?(i.complete&&i.complete(i.to),Lh):(i.easing&&(o="function"==typeof i.easing?i.easing:t.easing[i.easing],"function"!=typeof o&&(o=null)),r=void 0===i.duration?400:i.duration,s=new wh({keypath:e,from:h,to:n,root:t,duration:r,easing:o,interpolator:i.interpolator,step:i.step,complete:i.complete}),_h.add(s),t._animations.push(s),s)}function ot(){return this.detached?this.detached:(this.el&&z(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),kh.fire(this),this.detached)}function rt(t){return this.el?this.fragment.find(t):null}function st(t,e){var n;if(n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?da(t.node,this.selector):null)return this.push(t.node||t.instance),e||this._makeDirty(),!0}function at(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ht(t){var e,n;for(e=[t],n=at(t);n;)e.push(n),n=at(n);return e}function lt(t,e,n,i){var o=[];return La(o,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:Mh}}),n?(La(o,{cancel:{value:Ph},_root:{value:t},_sort:{value:Sh},_makeDirty:{value:Dh},_remove:{value:Ah},_dirty:{value:!1,writable:!0}}),o):o}function ut(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Oh(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i)):[]}function ct(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Oh(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i)}function dt(t){return this.fragment.findComponent(t)}function pt(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function ft(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function mt(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=k(e).wildcardMatches();gt(t,i,n.event,n.args,!0)}}function gt(t,e,n,i){var o,r,s=void 0!==arguments[4]&&arguments[4],a=!0;for(Fh.enqueue(t,n),r=e.length;r>=0;r--)o=t._subs[e[r]],o&&(a=vt(t,o,n,i)&&a);if(Fh.dequeue(t),t.parent&&a){if(s&&t.component){var h=t.component.name+"."+e[e.length-1];e=k(h).wildcardMatches(),n&&(n.component=t)}gt(t.parent,e,n,i)}}function vt(t,e,n,i){var o=null,r=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var s=0,a=e.length;s<a;s+=1)e[s].apply(t,i)===!1&&(r=!0);return n&&!n._noArg&&r&&(o=n.original)&&(o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation()),!r}function _t(t){var e={args:Array.prototype.slice.call(arguments,1)};jh(this,t,e)}function yt(t){var e;return t=k(P(t)),e=this.viewmodel.get(t,Hh),void 0===e&&this.parent&&!this.isolated&&hh(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function wt(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,bt(this)}function bt(t){Vh.fire(t),t.findAllComponents("*").forEach(function(t){bt(t.instance)})}function Lt(t,e,n){var i,o;return t=k(P(t)),i=this.viewmodel.get(t),r(i)&&r(e)?(o=mh.start(this,!0),this.viewmodel.merge(t,i,e,n),mh.end(),o):this.set(t,e,n&&n.complete)}function xt(t,e){var n,i;return n=E(t,e),i={},n.forEach(function(e){i[e.str]=t.get(e.str)}),i}function kt(t,e,n,i){var o,r,s;e=k(P(e)),i=i||al,e.isPattern?(o=new rl(t,e,n,i),t.viewmodel.patternObservers.push(o),r=!0):o=new Jh(t,e,n,i),o.init(i.init),t.viewmodel.register(e,o,r?"patternObservers":"observers"),o.ready=!0;var a={cancel:function(){var n;s||(r?(n=t.viewmodel.patternObservers.indexOf(o),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,o,"patternObservers")):t.viewmodel.unregister(e,o,"observers"),s=!0)}};return t._observers.push(a),a}function Et(t,e,n){var i,o,r,s;if(l(t)){n=e,o=t,i=[];for(t in o)o.hasOwnProperty(t)&&(e=o[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",sl(this,t,e,n);if(r=t.split(" "),1===r.length)return sl(this,t,e,n);for(i=[],s=r.length;s--;)t=r[s],t&&i.push(sl(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Mt(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Pt(t,e){var n,i=this;if(t)n=t.split(" ").map(ul).filter(cl),n.forEach(function(t){var n,o;(n=i._subs[t])&&(e?(o=n.indexOf(e),o!==-1&&n.splice(o,1)):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Ct(t,e){var n,i,o,r=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return o=t.split(" ").map(ul).filter(cl),o.forEach(function(t){(r._subs[t]||(r._subs[t]=[])).push(e)}),{cancel:function(){return r.off(t,e)}}}function Tt(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function St(t,e,n){var i,o,r,s,a,h,l=[];if(i=Dt(t,e,n),!i)return null;for(o=t.length,a=i.length-2-i[1],r=Math.min(o,i[0]),s=r+i[1],h=0;h<r;h+=1)l.push(h);for(;h<s;h+=1)l.push(-1);for(;h<o;h+=1)l.push(h+a);return 0!==a?l.touchedFrom=i[0]:l.touchedFrom=t.length,l}function Dt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);
return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function At(e,n){var i,o,r,s=this;if(r=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=mh.start(this,!0),mh.scheduleTask(function(){return Pl.fire(s)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&Ot(a),e.innerHTML=""}return this.cssId&&El.apply(),e&&((o=e.__ractive_instances__)?o.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),mh.end(),this.transitionsEnabled=r,i.then(function(){return Cl.fire(s)})}function Ot(t){t.splice(0,t.length).forEach(V)}function It(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Rt(t,e){var n,i,o;return i='[data-ractive-css~="{'+e+'}"]',o=function(t){var e,n,o,r,s,a,h,l=[];for(e=[];n=Il.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(r=e.map(Ut),h=e.length;h--;)a=r.slice(),o=e[h],a[h]=o.base+i+o.modifiers||"",s=r.slice(),s[h]=i+" "+s[h],l.push(a.join(" "),s.join(" "));return l.join(", ")},n=zl.test(t)?t.replace(zl,i):t.replace(Ol,"").replace(Al,function(t,e){var n,i;return Rl.test(e)?t:(n=e.split(",").map(zt),i=n.map(o).join(", ")+" ",t.replace(e,i))})}function zt(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Ut(t){return t.str}function Bt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?c("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Nt(t,e){Bt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var o=i?Ft(e,this):e,r=n?Ft(t,this):t;return jt(o,r)}:jt(e,t)}function Ft(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&c("Data function must return an object"),n.constructor!==Object&&g("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function jt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Zt(t){var e,n,i;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(Ou))?t.matchPattern(Iu)?(i=t.matchPattern(Ou))?(t.allowWhitespace(),t.matchString("=")?[n,i]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}function Wt(t){var e;return(e=t.matchPattern(zu))?{t:fu,v:e}:null}function Ht(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=Gt(t,t.tags[n]))return e}function Gt(t,e){var n,i,o,r;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(i=Au(t))return t.matchString(e.close)?(e.open=i[0],e.close=i[1],t.sortMustacheTags(),Bu):null;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var s=t.pos;Ru(t)?t.pos=s:(t.pos=s-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(r=0;r<e.readers.length;r+=1)if(o=e.readers[r],i=o(t,e))return e.isStatic&&(i.s=!0),t.includeLinePositions&&(i.p=t.getLinePos(n)),i;return t.pos=n,null}function Vt(t){var e;return(e=t.matchPattern(Zu))?{t:lu,v:e}:null}function qt(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:pu,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:pu,v:"false"}):null}function Yt(t){var e;return(e=$u(t))?Qu.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=ju(t))?e.v:(e=t.matchPattern(Ju))?e:void 0}function $t(t){var e,n,i;return e=t.pos,t.allowWhitespace(),n=Ku(t),null===n?(t.pos=e,null):(t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),i=Cc(t),null===i?(t.pos=e,null):{t:gu,k:n,v:i}):(t.pos=e,null))}function Jt(t){var e,n,i,o;return e=t.pos,i=Xu(t),null===i?null:(n=[i],t.matchString(",")?(o=Jt(t),o?n.concat(o):(t.pos=e,null)):n)}function Kt(t){function e(t){i.push(t)}var n,i,o,r;return n=t.pos,t.allowWhitespace(),o=Cc(t),null===o?null:(i=[o],t.allowWhitespace(),t.matchString(",")&&(r=Kt(t),null===r&&t.error(Nu),r.forEach(e)),i)}function Qt(t){return ju(t)||Wu(t)||$u(t)||ec(t)||ic(t)||Ru(t)}function Xt(t){var e,n,i,o,r,s;return e=t.pos,i=t.matchPattern(/^@(?:keypath|index|key)/),i||(n=t.matchPattern(sc)||"",i=!n&&t.relaxedNames&&t.matchPattern(uc)||t.matchPattern(lc),i||"."!==n||(n="",i=".")),i?n||t.relaxedNames||!Gu.test(i)?!n&&Hu.test(i)?(o=Hu.exec(i)[0],t.pos=e+o.length,{t:mu,v:o}):(r=(n||"")+P(i),t.matchString("(")&&(s=r.lastIndexOf("."),s!==-1?(r=r.substr(0,s),t.pos=e+r.length):t.pos-=1),{t:vu,n:r.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=e,null):null}function te(t){var e,n;return e=t.pos,t.matchString("(")?(t.allowWhitespace(),n=Cc(t),n||t.error(Nu),t.allowWhitespace(),t.matchString(")")||t.error(Fu),{t:bu,x:n}):null}function ee(t){var e,n,i;if(e=t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),n=t.matchPattern(Ju))return{t:_u,n:n};t.error("Expected a property name")}return t.matchString("[")?(t.allowWhitespace(),i=Cc(t),i||t.error(Nu),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:_u,x:i}):null}function ne(t){var e,n,i,o;return(n=Mc(t))?(e=t.pos,t.allowWhitespace(),t.matchString("?")?(t.allowWhitespace(),i=Cc(t),i||t.error(Nu),t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"'),t.allowWhitespace(),o=Cc(t),o||t.error(Nu),{t:Lu,o:[n,i,o]}):(t.pos=e,n)):null}function ie(t){return Pc(t)}function oe(t){function e(t){switch(t.t){case pu:case mu:case lu:case fu:return t.v;case uu:return JSON.stringify(String(t.v));case cu:return"["+(t.m?t.m.map(e).join(","):"")+"]";case du:return"{"+(t.m?t.m.map(e).join(","):"")+"}";case gu:return t.k+":"+e(t.v);case wu:return("typeof"===t.s?"typeof ":t.s)+e(t.o);case xu:return e(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+e(t.o[1]);case ku:return e(t.x)+"("+(t.o?t.o.map(e).join(","):"")+")";case bu:return"("+e(t.x)+")";case yu:return e(t.x)+e(t.r);case _u:return t.n?"."+t.n:"["+e(t.x)+"]";case Lu:return e(t.o[0])+"?"+e(t.o[1])+":"+e(t.o[2]);case vu:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var n;return re(t,n=[]),{r:n,s:e(t)}}function re(t,e){var n,i;if(t.t===vu&&e.indexOf(t.n)===-1&&e.unshift(t.n),i=t.o||t.m)if(l(i))re(i,e);else for(n=i.length;n--;)re(i[n],e);t.x&&re(t.x,e),t.r&&re(t.r,e),t.v&&re(t.v,e)}function se(t,e){var n;if(t){for(;t.t===bu&&t.x;)t=t.x;return t.t===vu?e.r=t.n:t.t===lu&&Dc.test(t.v)?e.r=t.v:(n=ae(t))?e.rx=n:e.x=Tc(t),e}}function ae(t){for(var e,n=[];t.t===yu&&t.r.t===_u;)e=t.r,e.x?e.x.t===vu?n.unshift(e.x):n.unshift(Tc(e.x)):n.unshift(e.n),t=t.x;return t.t!==vu?null:{r:t.n,m:n}}function he(t,e){var n,i=Cc(t);return i?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={t:$l},Sc(i,n),n):null}function le(t,e){var n,i;return t.matchString("&")?(t.allowWhitespace(),(n=Cc(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i={t:$l},Sc(n,i),i):null):null}function ue(t,e){var n,i,o,r,s;return n=t.pos,t.matchString(">")?(t.allowWhitespace(),i=t.pos,t.relaxedNames=!0,o=Cc(t),t.relaxedNames=!1,t.allowWhitespace(),r=Cc(t),t.allowWhitespace(),o?(s={t:tu},Sc(o,s),t.allowWhitespace(),r&&(s={t:Jl,n:Cu,f:[s]},Sc(r,s)),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s):null):null}function ce(t,e){var n;return t.matchString("!")?(n=t.remaining().indexOf(e.close),n!==-1?(t.pos+=n+e.close.length,{t:eu}):void 0):null}function de(t,e){var n,i,o;if(n=t.pos,i=Cc(t),!i)return null;for(o=0;o<e.length;o+=1)if(t.remaining().substr(0,e[o].length)===e[o])return i;return t.pos=n,rc(t)}function pe(t,e){var n,i,o,r;n=t.pos;try{i=zc(t,[e.close])}catch(s){r=s}if(!i){if("!"===t.str.charAt(n))return t.pos=n,null;if(r)throw r}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!i)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return o={t:Yl},Sc(i,o),o}function fe(t,e){var n,i,o;return t.matchPattern(Nc)?(n=t.pos,i=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name"),o={t:su},i&&(o.n=i),o):null}function me(t,e){var n,i,o,r;return n=t.pos,t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),i=t.remaining(),o=i.indexOf(e.close),o!==-1?(r={t:Ql,r:i.substr(0,o).split(" ")[0]},t.pos+=o,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r):(t.pos=n,null)):(t.pos=n,null)):null}function ge(t,e){var n=t.pos;return t.matchString(e.open)?t.matchPattern(Zc)?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:Su}):(t.pos=n,null):null}function ve(t,e){var n,i=t.pos;return t.matchString(e.open)?t.matchPattern(Hc)?(n=Cc(t),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:Du,x:n}):(t.pos=i,null):null}function _e(t,e){var n,i,o,r,s,a,h,l,u,c,d,p;if(n=t.pos,t.matchString("^"))o={t:Jl,f:[],n:Mu};else{if(!t.matchString("#"))return null;o={t:Jl,f:[]},t.matchString("partial")&&(t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(h=t.matchPattern($c))&&(p=h,o.n=Gc[h])}if(t.allowWhitespace(),i=Cc(t),i||t.error("Expected expression"),d=t.matchPattern(qc)){var f=void 0;(f=t.matchPattern(Yc))?o.i=d+","+f:o.i=d}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,s=o.f,u=[];do if(r=Fc(t,e))p&&r.r!==p&&t.error("Expected "+e.open+"/"+p+e.close),t.sectionDepth-=1,c=!0;else if(r=Wc(t,e))o.n===Mu&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),l||(l=ye(i,o.n)),l.f.push({t:Jl,n:Eu,x:Tc(be(u.concat(r.x))),f:s=[]}),u.push(we(r.x));else if(r=jc(t,e))o.n===Mu&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,l?l.f.push({t:Jl,n:Eu,x:Tc(be(u)),f:s=[]}):(l=ye(i,o.n),s=l.f);else{if(r=t.read(Xd),!r)break;s.push(r)}while(!c);return l&&(o.n===Cu&&(o.n=Tu),o.l=l),Sc(i,o),o.f.length||delete o.f,o}function ye(t,e){var n;return e===Cu?(n={t:Jl,n:Eu,f:[]},Sc(we(t),n)):(n={t:Jl,n:Mu,f:[]},Sc(t,n)),n}function we(t){return t.t===wu&&"!"===t.s?t.o:{t:wu,s:"!",o:Le(t)}}function be(t){return 1===t.length?t[0]:{t:xu,s:"&&",o:[Le(t[0]),Le(be(t.slice(1)))]}}function Le(t){return{t:bu,x:t}}function xe(t){var e,n,i,o,r;return e=t.pos,t.matchString(Kc)?(i=t.remaining(),o=i.indexOf(Qc),o===-1&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=i.substr(0,o),t.pos+=o+3,r={t:eu,c:n},t.includeLinePositions&&(r.p=t.getLinePos(e)),r):null}function ke(t){return t.replace(Lc,function(t,e){var n;return n="#"!==e[0]?wc[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(Ee(n)):t})}function Ee(t){return t?10===t?32:t<128?t:t<=159?bc[t-128]:t<55296?t:t<=57343?65533:t<=65535?t:65533:65533}function Me(t){return t.replace(Ec,"&amp;").replace(xc,"&lt;").replace(kc,"&gt;")}function Pe(t){return"string"==typeof t}function Ce(t){return t.t===eu||t.t===nu}function Te(t){return(t.t===Jl||t.t===Kl)&&t.f}function Se(t,e,n,i,o){var s,a,h,l,u,c,d,p;for(hd(t),s=t.length;s--;)a=t[s],a.exclude?t.splice(s,1):e&&a.t===eu&&t.splice(s,1);for(ld(t,i?pd:null,o?fd:null),s=t.length;s--;){if(a=t[s],a.f){var f=a.t===Xl&&dd.test(a.e);u=n||f,!n&&f&&ld(a.f,md,gd),u||(h=t[s-1],l=t[s+1],(!h||"string"==typeof h&&fd.test(h))&&(c=!0),(!l||"string"==typeof l&&pd.test(l))&&(d=!0)),Se(a.f,e,u,c,d)}if(a.l&&(Se(a.l.f,e,n,c,d),t.splice(s+1,0,a.l),delete a.l),a.a)for(p in a.a)a.a.hasOwnProperty(p)&&"string"!=typeof a.a[p]&&Se(a.a[p],e,n,c,d);if(a.m&&Se(a.m,e,n,c,d),a.v)for(p in a.v)a.v.hasOwnProperty(p)&&(r(a.v[p].n)&&Se(a.v[p].n,e,n,c,d),r(a.v[p].d)&&Se(a.v[p].d,e,n,c,d))}for(s=t.length;s--;)"string"==typeof t[s]&&("string"==typeof t[s+1]&&(t[s]=t[s]+t[s+1],t.splice(s+1,1)),n||(t[s]=t[s].replace(cd," ")),""===t[s]&&t.splice(s,1))}function De(t){var e,n;return e=t.pos,t.matchString("</")?(n=t.matchPattern(_d))?t.inside&&n!==t.inside?(t.pos=e,null):{t:ou,e:n}:(t.pos-=2,void t.error("Illegal closing tag")):null}function Ae(t){var e,n,i;return t.allowWhitespace(),(n=t.matchPattern(bd))?(e={name:n},i=Oe(t),null!=i&&(e.value=i),e):null}function Oe(t){var e,n,i,o;return e=t.pos,/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=t.pos,i=t.sectionDepth,o=ze(t,"'")||ze(t,'"')||Re(t),null===o&&t.error("Expected valid attribute value"),t.sectionDepth!==i&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),o.length?1===o.length&&"string"==typeof o[0]?ke(o[0]):o:""):(t.pos=e,null)}function Ie(t){var e,n,i,o,r;return e=t.pos,(n=t.matchPattern(Ld))?(i=n,o=t.tags.map(function(t){return t.open}),(r=yd(i,o))!==-1&&(n=n.substr(0,r),t.pos=e+n.length),n):null}function Re(t){var e,n;for(t.inAttribute=!0,e=[],n=Uu(t)||Ie(t);null!==n;)e.push(n),n=Uu(t)||Ie(t);return e.length?(t.inAttribute=!1,e):null}function ze(t,e){var n,i,o;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,i=[],o=Uu(t)||Ue(t,e);null!==o;)i.push(o),o=Uu(t)||Ue(t,e);return t.matchString(e)?(t.inAttribute=!1,i):(t.pos=n,null)}function Ue(t,e){var n,i,o,r;return n=t.pos,o=t.remaining(),r=t.tags.map(function(t){return t.open}),r.push(e),i=yd(o,r),i===-1&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,o.substr(0,i)):null}function Be(t){var e,n,i;return t.allowWhitespace(),(e=Ku(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function Ne(t,e){var n,i,o,r,s,a,h,l,u;if("string"==typeof t){if(i=Md.exec(t)){var c=t.lastIndexOf(")");return Pd.test(t)||e.error("Invalid input after method call expression '"+t.slice(c+1)+"'"),n={m:i[1]},r="["+t.slice(n.m.length+1,c)+"]",o=new xd(r),n.a=Tc(o.result[0]),n}if(t.indexOf(":")===-1)return t.trim();t=[t]}if(n={},h=[],l=[],t){for(;t.length;)if(s=t.shift(),"string"==typeof s){if(a=s.indexOf(":"),a!==-1){a&&h.push(s.substr(0,a)),s.length>a+1&&(l[0]=s.substring(a+1));break}h.push(s)}else h.push(s);l=l.concat(t)}return h.length?l.length||"string"!=typeof h?(n={n:1===h.length&&"string"==typeof h[0]?h[0]:h},1===l.length&&"string"==typeof l[0]?(u=kd("["+l[0]+"]"),n.a=u?u.value:l[0].trim()):n.d=l):n=h:n="",n}function Fe(t){var e,n,i,o,r,s,a,h,l,u,c,d,p,f,m,g;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions&&(n.p=t.getLinePos(e)),t.matchString("!"))return n.t=hu,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=Xl,n.e=t.matchPattern(Td),!n.e)return null;for(Sd.test(t.nextChar())||t.error("Illegal tag name"),r=function(e,i){var o=i.n||i;Od.test(o)&&(t.pos-=o.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=i},t.allowWhitespace();s=Uu(t)||wd(t);)s.name?(i=Id[s.name])?n[i]=Ed(s.value,t):(o=Ad.exec(s.name))?(n.v||(n.v={}),a=Ed(s.value,t),r(o[1],a)):t.sanitizeEventAttributes&&Dd.test(s.name)||(n.a||(n.a={}),n.a[s.name]=s.value||(""===s.value?"":0)):(n.m||(n.m=[]),n.m.push(s)),t.allowWhitespace();if(t.allowWhitespace(),t.matchString("/")&&(h=!0),!t.matchString(">"))return null;var v=n.e.toLowerCase(),_=t.preserveWhitespace;if(!h&&!yc.test(n.e)){t.elementStack.push(v),"script"!==v&&"style"!==v||(t.inside=v),l=[],u=wa(null);do if(f=t.pos,m=t.remaining(),je(v,m))if(g=vd(t)){p=!0;var y=g.e.toLowerCase();if(y!==v&&(t.pos=f,!~t.elementStack.indexOf(y))){var w="Unexpected closing tag";yc.test(y)&&(w+=" (<"+y+"> is a void element - it cannot contain children)"),t.error(w)}}else(d=Fc(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(p=!0,t.pos=f):(d=t.read(tp))?(u[d.n]&&(t.pos=f,t.error("Duplicate partial definition")),ud(d.f,t.stripComments,_,!_,!_),u[d.n]=d.f,c=!0):(d=t.read(Xd))?l.push(d):p=!0;else p=!0;while(!p);l.length&&(n.f=l),c&&(n.p=u),t.elementStack.pop()}return t.inside=null,t.sanitizeElements&&t.sanitizeElements.indexOf(v)!==-1?Rd:n}function je(t,e){var n,i;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),i=Cd[t],!n||!i||!~i.indexOf(n[1].toLowerCase())}function Ze(t){var e,n,i,o;return n=t.remaining(),o=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(o):(i=t.tags.map(function(t){return t.open}),i=i.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0?i.push('"',"'","=","<",">","`"):t.inAttribute?i.push(t.inAttribute):i.push(o),e=yd(n,i)),e?(e===-1&&(e=n.length),t.pos+=e,t.inside?n.substr(0,e):ke(n.substr(0,e))):null}function We(t){return t.replace(Fd,"\\$&")}function He(t){var e=t.pos,n=t.standardDelimiters[0],i=t.standardDelimiters[1],o=void 0,r=void 0;if(!t.matchPattern(Zd)||!t.matchString(n))return t.pos=e,null;var s=t.matchPattern(Wd);if(g("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+s+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+s+"}} --> ... <!-- {{/"+s+"}} -->'"),!t.matchString(i)||!t.matchPattern(Hd))return t.pos=e,null;o=[];var a=new RegExp("^<!--\\s*"+Nd(n)+"\\s*\\/\\s*"+s+"\\s*"+Nd(i)+"\\s*-->");do t.matchPattern(a)?r=!0:(zd=t.read(Xd),zd||t.error("expected closing comment ('<!-- "+n+"/"+s+i+" -->')"),o.push(zd));while(!r);return{t:au,f:o,n:s}}function Ge(t){var e,n,i,o,r;e=t.pos;var s=t.standardDelimiters;if(!t.matchString(s[0]))return null;if(!t.matchPattern(Vd))return t.pos=e,null;n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),n||t.error("expected legal partial name"),t.matchString(s[1])||t.error("Expected closing delimiter '"+s[1]+"'"),i=[];do(o=Fc(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!o.r&&t.error("Expected "+s[0]+"/partial"+s[1]),r=!0):(o=t.read(Xd),o||t.error("Expected "+s[0]+"/partial"+s[1]),i.push(o));while(!r);return{t:au,n:n,f:i}}function Ve(t){for(var e=[],n=wa(null),i=!1,o=t.preserveWhitespace;t.pos<t.str.length;){var r=t.pos,s=void 0,a=void 0;(a=t.read(tp))?(n[a.n]&&(t.pos=r,t.error("Duplicated partial definition")),ud(a.f,t.stripComments,o,!o,!o),n[a.n]=a.f,i=!0):(s=t.read(Xd))?e.push(s):t.error("Unexpected template content")}var h={v:sa,t:e};return i&&(h.p=n),h}function qe(t,e){return new Qd(t,e||{}).result}function Ye(t){var e=wa(rp);return e.parse=function(e,n){return $e(e,n||t)},e}function $e(t,e){if(!Yd)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Yd(t,e||this.options)}function Je(t,e){var n;if(!Xs){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(Ke(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function Ke(t){return t&&"#"===t[0]}function Qe(t){return!("string"==typeof t)}function Xe(t){return t.defaults&&(t=t.defaults),op.reduce(function(e,n){return e[n]=t[n],e},{})}function tn(t){var e,n=t._config.template;if(n&&n.fn)return e=en(t,n.fn),e!==n.result?(n.result=e,e=on(e,t)):void 0}function en(t,e){var n=nn(sp.getParseOptions(t));return e.call(t,n)}function nn(t){var e=wa(sp);return e.parse=function(e,n){return sp.parse(e,n||t)},e}function on(t,e){if("string"==typeof t)"#"===t[0]&&(t=sp.fromId(t)),t=Yd(t,sp.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==sa)throw new Error("Mismatched template version (expected "+sa+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function rn(t,e,n){if(e)for(var i in e)!n&&t.hasOwnProperty(i)||(t[i]=e[i])}function sn(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,o=an(i._parent,e),r="_super"in this,s=this._super;return this._super=o,t=n.apply(this,arguments),r?this._super=s:delete this._super,t};return i._parent=t,i._method=n,i}function an(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=Da,i}function hn(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function ln(t,e,n){if(e in t){if(n in t)throw new Error(hn(e,n,!0));m(hn(e,n)),t[n]=t[e]}}function un(t){ln(t,"beforeInit","onconstruct"),ln(t,"init","onrender"),ln(t,"complete","oncomplete"),ln(t,"eventDefinitions","events"),r(t.adaptors)&&ln(t,"adaptors","adapt")}function cn(t,e,n,i){vp(i);for(var o in i)if(fp.hasOwnProperty(o)){var r=i[o];"el"!==o&&"function"==typeof r?m(""+o+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[o]=r}mp.forEach(function(o){o[t](e,n,i)}),Sl[t](e,n,i),hp[t](e,n,i),Nl[t](e,n,i),dn(e.prototype,n,i)}function dn(t,e,n){for(var i in n)if(!pp[i]&&n.hasOwnProperty(i)){var o=n[i];"function"==typeof o&&(o=gp(t,i,o)),e[i]=o}}function pn(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function fn(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function mn(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function gn(t){var e,n,i,o;if(this.items){for(n=this.items.length,e=0;e<n;e+=1)if(i=this.items[e],i.find&&(o=i.find(t)))return o;return null}}function vn(t,e){var n,i,o;if(this.items)for(i=this.items.length,n=0;n<i;n+=1)o=this.items[n],o.findAll&&o.findAll(t,e);return e}function _n(t,e){var n,i,o;if(this.items)for(i=this.items.length,n=0;n<i;n+=1)o=this.items[n],o.findAllComponents&&o.findAllComponents(t,e);return e}function yn(t){var e,n,i,o;if(this.items){for(e=this.items.length,n=0;n<e;n+=1)if(i=this.items[n],i.findComponent&&(o=i.findComponent(t)))return o;return null}}function wn(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function bn(){return this.items&&this.items[0]?this.items[0].firstNode():null}function Ln(t,e,n,i){return i=i||0,t.map(function(t){var o,r,s;return t.text?t.text:t.fragments?t.fragments.map(function(t){return Ln(t.items,e,n,i)}).join(""):(o=n+"-"+i++,s=t.keypath&&(r=t.root.viewmodel.wrapped[t.keypath.str])?r.value:t.getValue(),e[o]=s,"${"+o+"}")}).join("")}function xn(){var t,e,n,i;return this.dirtyArgs&&(e=Pp(this.items,t={},this.root._guid),n=kd("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function kn(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function En(){var t,e,n,i;return this.dirtyValue&&(e=Pp(this.items,t={},this.root._guid),n=kd(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function Mn(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Pn(){return this.value}function Cn(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}function Tn(t,e){var n,i,o,r,s,a={},h=!1;for(e||(a.refs=n={});t;){if((s=t.owner)&&(i=s.indexRefs)){if(e&&(o=s.getIndexRef(e)))return a.ref={fragment:t,ref:o},a;if(!e)for(r in i)o=i[r],n[o.n]||(h=!0,n[o.n]={fragment:t,ref:o})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return h?a:void 0}function Sn(t,e,n){var i;return"@"===e.charAt(0)?new Fp(t,e,n):(i=Wp(t.parentFragment,e))?new Zp(t,i,n):new Up(t,e,n)}function Dn(t,e){var n,i;if(qp[t])return qp[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),qp[t]=n,n}function An(t){return t.call()}function On(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,o;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.isSpecial?(o=i.value,"number"==typeof o?o:'"'+o+'"'):i.str)})}function In(t){return k("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Rn(t){return void 0!==t&&"@"!==t[0]}function zn(t,e){var n,i,o;if(t.__ractive_nowrap)return t;if(i="__ractive_"+e._guid,n=t[i])return n;if(/this/.test(t.toString())){ba(t,i,{value:Yp.call(t,e),configurable:!0});for(o in t)t.hasOwnProperty(o)&&(t[i][o]=t[o]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return ba(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Un(t){return t.value}function Bn(t){return void 0!=t}function Nn(t){t.forceResolution()}function Fn(t,e){function n(e){t.resolve(e)}function i(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var o,r,s;r=e.parentFragment,s=e.template,t.root=r.root,t.parentFragment=r,t.pElement=r.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(o=s.r)&&(t.resolver=Gp(t,o,n)),e.template.x&&(t.resolver=new $p(t,r,e.template.x,i)),e.template.rx&&(t.resolver=new Xp(t,e.template.rx,i)),t.template.n!==Mu||t.hasOwnProperty("value")||t.setValue(void 0)}function jn(t){var e,n,i;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(i=this.twowayBinding)&&i.rebound()))}function Zn(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function Wn(){this.parentFragment.bubble()}function Hn(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function Gn(t){var e,n,i;for(n=this.fragments.length,e=0;e<n;e+=1)if(i=this.fragments[e].find(t))return i;return null}function Vn(t,e){var n,i;for(i=this.fragments.length,n=0;n<i;n+=1)this.fragments[n].findAll(t,e)}function qn(t,e){var n,i;for(i=this.fragments.length,n=0;n<i;n+=1)this.fragments[n].findAllComponents(t,e)}function Yn(t){var e,n,i;for(n=this.fragments.length,e=0;e<n;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null}function $n(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function Jn(){var t,e,n;if(t=this.fragments.length)for(e=0;e<t;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Kn(t){var e,n,i,o,r,s,a,h=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Pu){if(this.shuffling=!0,mh.scheduleTask(function(){return h.shuffling=!1}),e=this.parentFragment,r=[],t.forEach(function(t,e){var i,o,s,a,l;return t===e?void(r[t]=h.fragments[e]):(i=h.fragments[e],void 0===n&&(n=e),t===-1?(h.fragmentsToUnrender.push(i),void i.unbind()):(o=t-e,s=h.keypath.join(e),a=h.keypath.join(t),i.index=t,(l=i.registeredIndexRefs)&&l.forEach(Qn),i.rebind(s,a),void(r[t]=i)))}),o=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===o)return;n=this.length}for(this.length=this.fragments.length=o,this.rendered&&mh.addView(this),s={template:this.template.f,root:this.root,owner:this},i=n;i<o;i+=1)a=r[i],a||this.fragmentsToCreate.push(i),this.fragments[i]=a}}function Qn(t){t.rebind("","")}function Xn(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function ti(t){var e,n,i=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new _y(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):ni(this,t)&&(this.bubble(),this.rendered&&mh.addView(this)),this.value=t,this.updating=!1)}function ei(t,e,n){if(e===Pu&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),i.t=n?"k":"i"}t.currentSubtype=e}function ni(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case Eu:return t.hasContext=!1,ai(t,e,!1,n);case Mu:return t.hasContext=!1,ai(t,e,!0,n);case Cu:return si(t,n);case Tu:return ri(t,e,n);case Pu:if(l(e))return ei(t,t.subtype,!0),oi(t,e,n)}return t.ordered=!!s(e),t.ordered?(ei(t,Pu,!1),ii(t,e,n)):l(e)||"function"==typeof e?t.template.i?(ei(t,Pu,!0),oi(t,e,n)):(ei(t,Cu,!1),si(t,n)):(ei(t,Eu,!1),t.hasContext=!1,ai(t,e,!1,n))}function ii(t,e,n){var i,o,r;if(o=e.length,o===t.length)return!1;if(o<t.length)t.fragmentsToUnrender=t.fragments.splice(o,t.length-o),t.fragmentsToUnrender.forEach(q);else if(o>t.length)for(i=t.length;i<o;i+=1)n.context=t.keypath.join(i),n.index=i,r=new _y(n),t.fragmentsToRender.push(t.fragments[i]=r);return t.length=o,!0}function oi(t,e,n){var i,o,r,s,a,h;for(r=t.hasKey||(t.hasKey={}),o=t.fragments.length;o--;)s=t.fragments[o],s.key in e||(a=!0,s.unbind(),t.fragmentsToUnrender.push(s),t.fragments.splice(o,1),r[s.key]=!1);for(o=t.fragments.length;o--;)s=t.fragments[o],s.index!==o&&(s.index=o,(h=s.registeredIndexRefs)&&h.forEach(ui));o=t.fragments.length;for(i in e)r[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=o++,s=new _y(n),t.fragmentsToRender.push(s),t.fragments.push(s),r[i]=!0);return t.length=t.fragments.length,a}function ri(t,e,n){return e?si(t,n):hi(t)}function si(t,e){var n;if(!t.length)return e.context=t.keypath,e.index=0,n=new _y(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0}function ai(t,e,n,i){var o,r,a,h,u;if(r=s(e)&&0===e.length,a=!1,!s(e)&&l(e)){a=!0;for(u in e){a=!1;break}}return o=n?r||a||!e:e&&!r&&!a,o?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(q),!0):void 0:(i.index=0,h=new _y(i),t.fragmentsToRender.push(t.fragments[0]=h),t.length=1,!0):hi(t)}function hi(t){if(t.length)return t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(li),t.fragmentsToUnrender.forEach(q),t.length=t.fragmentsToRender.length=0,!0}function li(t){return t.rendered}function ui(t){t.rebind("","")}function ci(t){var e,n,i;for(e="",n=0,i=this.length,n=0;n<i;n+=1)e+=this.fragments[n].toString(t);return e}function di(){var t=this;this.fragments.forEach(q),this.fragmentsToRender.forEach(function(e){return z(t.fragments,e)}),this.fragmentsToRender=[],Ip.call(this),this.length=0,this.unbound=!0}function pi(t){this.fragments.forEach(t?fi:mi),this.renderedFragments=[],this.rendered=!1}function fi(t){t.unrender(!0)}function mi(t){t.unrender(!1)}function gi(){var t,e,n,i,o,r,s;
for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(o=this.parentFragment.getNode()),s=this.fragments.length,r=0;r<s;r+=1)t=this.fragments[r],e=n.indexOf(t,r),e!==r?(this.docFrag.appendChild(t.detach()),e!==-1&&n.splice(e,1),n.splice(r,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),o.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),o.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function vi(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;e<t;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function _i(t){var e,n,i,o;for(n=this.nodes.length,e=0;e<n;e+=1)if(i=this.nodes[e],1===i.nodeType){if(da(i,t))return i;if(o=i.querySelector(t))return o}return null}function yi(t,e){var n,i,o,r,s,a;for(i=this.nodes.length,n=0;n<i;n+=1)if(o=this.nodes[n],1===o.nodeType&&(da(o,t)&&e.push(o),r=o.querySelectorAll(t)))for(s=r.length,a=0;a<s;a+=1)e.push(r[a])}function wi(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function bi(t){return Df[t]||(Df[t]=ca(t))}function Li(t){var e,n,i;t&&"select"===t.name&&t.binding&&(e=U(t.node.options).filter(xi),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.binding.setValue(i),t.bubble())}function xi(t){return t.selected}function ki(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Af(this.value,this.parentFragment.getNode(),this.docFrag),Of(this.pElement),this.rendered=!0,this.docFrag}function Ei(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&mh.addView(this))}function Mi(){return void 0!=this.value?ke(""+this.value):""}function Pi(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Ci(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=Af(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Of(this.pElement)}}function Ti(){var t,e=this.node;if(e)return(t=e.parentNode)&&t.removeChild(e),e}function Si(){return null}function Di(){return this.node}function Ai(t){if(this.attributes&&this.attributes[t])return this.attributes[t].value}function Oi(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&mh.addView(this))}function Ii(t){var e=t.fragment.items;if(1===e.length)return e[0].type===Yl?e[0]:void 0}function Ri(t){return this.type=iu,this.element=t.element,this.root=t.root,rm(this,t.name),this.isBoolean=_c.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new _y({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=sm(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=!!this.isBoolean||(t.value||""))}function zi(t,e){this.fragment&&this.fragment.rebind(t,e)}function Ui(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==ia.html||(e=um[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Bi(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,o=t.interpolator,r=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==e||void 0===this.element.getAttribute("contenteditable"))){if("name"===e&&"input"===this.element.name&&o)return"name={{"+(o.keypath.str||o.ref)+"}}";if(this.isBoolean)return i?e:"";if(r){if(1===r.items.length&&null==r.items[0].value)return"";i=r.toString()}return n&&(e=n+":"+e),i?e+'="'+Ni(i)+'"':e}}function Ni(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Fi(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function ji(){var t,e,n,i,o=this.value;if(!this.locked)for(this.node._ractive.value=o,t=this.node.options,i=t.length;i--;)if(e=t[i],n=e._ractive?e._ractive.value:e.value,n==o){e.selected=!0;break}}function Zi(){var t,e,n,i,o=this.value;for(r(o)||(o=[o]),t=this.node.options,e=t.length;e--;)n=t[e],i=n._ractive?n._ractive.value:n.value,n.selected=A(o,i)}function Wi(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function Hi(){var t,e,n,i,o=this.node;if(t=o.checked,o.value=this.element.getAttribute("value"),o.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!o.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(e=n[i],!e.element.node)return;if(e.element.node.checked)return mh.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function Gi(){var t,e,n=this,i=n.element,o=n.node,s=n.value,a=i.binding;if(t=i.getAttribute("value"),r(s)){for(e=s.length;e--;)if(t==s[e])return void(a.isChecked=o.checked=!0);a.isChecked=o.checked=!1}else a.isChecked=o.checked=s==t}function Vi(){this.node.className=n(this.value)}function qi(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Yi(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function $i(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function Ji(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function Ki(){this.locked||(this.node[this.propertyName]=this.value)}function Qi(){var t=this,e=t.node,n=t.namespace,i=t.name,o=t.value,r=t.fragment;n?e.setAttributeNS(n,i,(r||o).toString()):this.isBoolean?o?e.setAttribute(i,""):e.removeAttribute(i):null==o?e.removeAttribute(i):e.setAttribute(i,(r||o).toString())}function Xi(){var t,e,n=this,i=n.name,o=n.element,r=n.node;"id"===i?e=ym:"value"===i?"select"===o.name&&"value"===i?e=o.getAttribute("multiple")?fm:pm:"textarea"===o.name?e=Lm:null!=o.getAttribute("contenteditable")?e=bm:"input"===o.name&&(t=o.getAttribute("type"),e="file"===t?Da:"radio"===t&&o.binding&&"name"===o.binding.name?gm:Lm):this.isTwoway&&"name"===i?"radio"===r.type?e=mm:"checkbox"===r.type&&(e=vm):"style"===i&&r.style.setAttribute?e=wm:"class"!==i||r.namespaceURI&&r.namespaceURI!==ia.html?this.useProperty&&(e=xm):e=_m,e||(e=km),this.update=e,this.update()}function to(t,e){var n=e?"svg":"div";return Pm.innerHTML="<"+n+" "+t+"></"+n+">",U(Pm.childNodes[0].attributes)}function eo(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function no(t){for(;t=t.parent;)if("form"===t.name)return t}function io(){this._ractive.binding.handleChange()}function oo(){var t;zm.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function ro(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&zm.call(e),t._timeout=void 0},t.element.lazy)}function so(t,e,n){var i=t+e+n;return jm[i]||(jm[i]=[])}function ao(t){return t.isChecked}function ho(t){return t.element.getAttribute("value")}function lo(t){var e,n,i,o,r,s=t.attributes;if(t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||s.contenteditable&&uo(s.contenteditable))&&uo(s.value)?n=Nm:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(i=uo(s.name),o=uo(s.checked),i&&o&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i?n="radio"===e?Gm:qm:o&&(n="radio"===e?Wm:$m)):"file"===e&&uo(s.value)?n=eg:uo(s.value)&&(n="number"===e||"range"===e?ng:Um)):"select"===t.name&&uo(s.value)?n=t.getAttribute("multiple")?Xm:Km:"textarea"===t.name&&uo(s.value)&&(n=Um),n&&(r=new n(t))&&r.keypath)return r}function uo(t){return t&&t.isBindable}function co(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function po(t){jh(this.root,this.getAction(),{event:t})}function fo(){return this.action.toString().trim()}function mo(t,e,n){var i,o,r,s=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,e.indexOf("*")!==-1&&(c('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(o=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Vp(n.a.s,o.length),this.parentFragment=t.parentFragment,r=this.root,this.refResolvers=[],o.forEach(function(t,e){var n=void 0;(n=hg.exec(t))?s.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:s.refResolvers.push(Gp(s,t,function(t){return s.resolve(e,t)}))}),this.fire=go):(i=n.n||n,"string"!=typeof i&&(i=new _y({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new _y({template:n.d,root:this.root,owner:this.element}),this.fire=_o):n.a&&(this.params=n.a,this.fire=vo))}function go(t){var e,n,i;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,o,r;if(void 0!==n){if(n.eventObject){if(i=t,o=n.refinements.length)for(r=0;r<o;r+=1)i=i[n.refinements[r]]}else i=e.viewmodel.get(n);return i}}),Fh.enqueue(e,t),i=this.fn.apply(null,n),e[this.method].apply(e,i),Fh.dequeue(e)}function vo(t){jh(this.root,this.getAction(),{event:t,args:this.params})}function _o(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),jh(this.root,this.getAction(),{event:t,args:e})}function yo(t){var e,n,i,o={};e=this._ractive,n=e.events[t.type],(i=Wp(n.element.parentFragment))&&(o=Wp.resolve(i)),n.fire({node:this,original:t,index:o,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function wo(){var t,e=this.name;if(!this.invalid){if(t=v("events",this.root,e))this.custom=t(this.node,bo(e));else{if(!("on"+e in this.node||window&&"on"+e in window||ta))return void(dg[e]||g(Ra(e,"event"),{node:this.node}));this.node.addEventListener(e,lg,!1)}this.hasListener=!0}}function bo(t){return cg[t]||(cg[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),cg[t]}function Lo(t,e){function n(n){n&&n.rebind(t,e)}var i;return this.method?(i=this.element.parentFragment,void this.refResolvers.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.dynamicParams&&n(this.dynamicParams)))}function xo(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function ko(t,e){this.keypaths[t]=e}function Eo(){return this.method?void this.refResolvers.forEach(q):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Mo(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,lg,!1),this.hasListener=!1}function Po(){var t=this;this.dirty||(this.dirty=!0,mh.scheduleTask(function(){Co(t),t.dirty=!1})),this.parentFragment.bubble()}function Co(t){var e,n,i,o,r;e=t.node,e&&(o=U(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(o.forEach(function(t){var e,o;e=t._ractive?t._ractive.value:t.value,o=i?To(n,e):n==e,o&&(r=!0),t.selected=o}),r||(o[0]&&(o[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function To(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function So(t,e){t.select=Ao(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Do(t){t.select&&z(t.select.options,t)}function Ao(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function Oo(t){var e,n,i,o,r,s,a;this.type=Xl,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=om(n.e),"option"===this.name&&So(this,n),"select"===this.name&&(this.options=[],this.bubble=Po),"form"===this.name&&(this.formBindings=[]),a=nm(this,n),this.attributes=Tm(this,n.a),this.conditionalAttributes=Am(this,n.m),n.f&&(this.fragment=new _y({template:n.f,root:i,owner:this,pElement:this,cssIds:null})),s=i.twoway,a.twoway===!1?s=!1:a.twoway===!0&&(s=!0),this.twoway=s,this.lazy=a.lazy,s&&(o=ig(this,n.a))&&(this.binding=o,r=this.root._twowayBindings[o.keypath.str]||(this.root._twowayBindings[o.keypath.str]=[]),r.push(o)),n.v&&(this.eventHandlers=wg(this,n.v)),n.o&&(this.decorator=new Eg(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function Io(t,e){function n(n){n.rebind(t,e)}var i,o,r,s;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),r=this.liveQueries)for(s=this.root,i=r.length;i--;)r[i]._makeDirty();this.node&&(o=this.node._ractive)&&L(o,"keypath",t,e)}function Ro(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),i=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==i&&t.node.setAttribute("height",i),t.node.removeEventListener("load",e,!1)},!1)}function zo(t){t.node.addEventListener("reset",Bo,!1)}function Uo(t){t.node.removeEventListener("reset",Bo,!1)}function Bo(){var t=this._ractive.proxy;mh.start(),t.formBindings.forEach(No),mh.end()}function No(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function Fo(t,e,n){var i,o,r;this.element=t,this.root=i=t.root,this.isIntro=n,o=e.n||e,"string"!=typeof o&&(r=new _y({template:o,root:i,owner:t}),o=r.toString(),r.unbind(),""===o)||(this.name=o,e.a?this.params=e.a:e.d&&(r=new _y({template:e.d,root:i,owner:t}),this.params=r.getArgsList(),r.unbind()),this._fn=v("transitions",i,o),this._fn||g(Ra(o,"transition"),{ractive:this.root}))}function jo(t){return t}function Zo(){ev.hidden=document[Kg]}function Wo(){ev.hidden=!0}function Ho(){ev.hidden=!1}function Go(){var t,e,n,i=this;return t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(o){n||(!o&&i.isIntro&&Vo(t,e),t._ractive.transition=null,i._manager.remove(i),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Vo(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function qo(){var t,e,n,i=this,o=this.root;return t=Yo(this),e=this.node=ca(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),ba(this.node,"_ractive",{value:{proxy:this,keypath:ah(this.parentFragment),events:wa(null),root:o}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=dv,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Da):"style"===this.name?(this.bubble=cv,this.bubble(),this.fragment.unrender=Da):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Da:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),"option"===this.name&&$o(this),"img"===this.name?Ro(this):"form"===this.name?zo(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&mh.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),o.transitionsEnabled&&this.intro&&(n=new pv(this,this.intro,(!0)),mh.registerTransition(n),mh.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&mh.scheduleTask(function(){return i.node.focus()},!0),Jo(this),this.node}function Yo(t){var e,n,i;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?ia.svg:(i=t.parent)?"foreignObject"===i.name?ia.html:i.node.namespaceURI:t.root.el.namespaceURI}function $o(t){var e,n,i;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.node.multiple&&r(n)){for(i=n.length;i--;)if(e==n[i]){t.node.selected=!0;break}}else t.node.selected=e==n}function Jo(t){var e,n,i,o,r;e=t.root;do for(n=e._liveQueries,i=n.length;i--;)o=n[i],r=n["_"+o],r._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(r);while(e=e.parent)}function Ko(t){var e,n,i;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&r(n))for(i=n.length;i--;)if(n[i]==e)return!0}function Qo(t){var e,n,i,o;if(e=t.attributes,n=e.type,i=e.value,o=e.name,n&&"radio"===n.value&&i&&o.interpolator)return i.value===o.interpolator.value||void 0}function Xo(t){var e=t.toString();return e?" "+e:""}function tr(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(q),"option"===this.name&&Do(this),this.attributes.forEach(q),this.conditionalAttributes.forEach(q)}function er(t){var e,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():t&&mh.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(Y),this.decorator&&mh.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(i=new pv(this,this.outro,(!1)),mh.registerTransition(i),mh.scheduleTask(function(){return i.start()})),this.liveQueries&&nr(this),"form"===this.name&&Uo(this)}function nr(t){var e,n,i;for(i=t.liveQueries.length;i--;)e=t.liveQueries[i],n=e.selector,e._remove(t.node)}function ir(t,e){var n=bv.exec(e)[0];return null===t||n.length<t.length?n:t}function or(t,e,n){var i;if(i=rr(t,e,n||{}))return i;if(i=sp.fromId(e,{noThrow:!0})){i=Lv(i);var o=sp.parse(i,sp.getParseOptions(t));return t.partials[e]=o.t}}function rr(t,e,n){var i=void 0,o=hr(e,n.owner);if(o)return o;var r=_("partials",t,e);if(r){if(o=r.partials[e],"function"==typeof o&&(i=o.bind(r),i.isOwner=r.partials.hasOwnProperty(e),o=i.call(t,sp)),!o&&""!==o)return void m(Ia,e,"partial","partial",{ractive:t});if(!sp.isParsed(o)){var s=sp.parse(o,sp.getParseOptions(r));s.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=i?r:sr(r,e);a.partials[e]=o=s.t}return i&&(o._fn=i),o.v?o.t:o}}function sr(t,e){return t.partials.hasOwnProperty(e)?t:ar(t.constructor,e)}function ar(t,e){if(t)return t.partials.hasOwnProperty(e)?t:ar(t._Parent,e)}function hr(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return hr(t,e.parentFragment.owner)}}function lr(t,e){var n,i=_("components",t,e);if(i&&(n=i.components[e],!n._Parent)){var o=n.bind(i);if(o.isOwner=i.components.hasOwnProperty(e),n=o(),!n)return void m(Ia,e,"component","component",{ractive:t});"string"==typeof n&&(n=lr(t,n)),n._fn=o,i.components[e]=n}return n}function ur(){var t=this.instance.fragment.detach();return Ov.fire(this.instance),t}function cr(t){return this.instance.fragment.find(t)}function dr(t,e){return this.instance.fragment.findAll(t,e)}function pr(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function fr(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function mr(){return this.parentFragment.findNextNode(this)}function gr(){return this.rendered?this.instance.fragment.firstNode():null}function vr(t,e,n){function i(t){var n,i;t.value=e,t.updating||(i=t.ractive,n=t.keypath,t.updating=!0,mh.start(i),i.viewmodel.mark(n),mh.end(),t.updating=!1)}var o,r,s,a,h,l;if(o=t.obj,r=t.prop,n&&!n.configurable){if("length"===r)return;throw new Error('Cannot use magic mode with property "'+r+'" - object is not configurable')}n&&(s=n.get,a=n.set),h=s||function(){return e},l=function(t){a&&a(t),e=s?s():t,l._ractiveWrappers.forEach(i)},l._ractiveWrappers=[t],Object.defineProperty(o,r,{get:h,set:l,enumerable:!0,configurable:!0})}function _r(t,e){var n,i,o,r;if(this.adaptors)for(n=this.adaptors.length,i=0;i<n;i+=1)if(o=this.adaptors[i],o.filter(e,t,this.ractive))return r=this.wrapped[t]=o.wrap(this.ractive,e,t,wr(t)),void(r.value=e)}function yr(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function wr(t){var e;return i_[t]||(e=t?t+".":"",i_[t]=function(n,i){var o;return"string"==typeof n?(o={},o[e+n]=i,o):"object"==typeof n?e?yr(n,t):n:void 0}),i_[t]}function br(t){var e,n,i=[qa];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)t.indexOf(n)===-1&&D(i,n),n=n.parent;return i}function Lr(t,e,n){var i;kr(t,e),n||(i=e.wildcardMatches(),i.forEach(function(n){xr(t,n,e)}))}function xr(t,e,n){var i,o,r;e=e.str||e,i=t.depsMap.patternObservers,o=i&&i[e],o&&o.forEach(function(e){r=n.join(e.lastKey),kr(t,r),xr(t,e,r)})}function kr(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function Er(){function t(t){var i=t.key;t.viewmodel===s?(s.clearCache(i.str),t.invalidate(),n.push(i),e(i)):t.viewmodel.mark(i)}function e(n){var i,o;s.noCascade.hasOwnProperty(n.str)||((o=s.deps.computed[n.str])&&o.forEach(t),(i=s.depsMap.computed[n.str])&&i.forEach(e))}var n,i,o,r=this,s=this,a={};if(n=this.changes,n.length)return n.slice().forEach(e),i=o_(n),i.forEach(function(e){var i;n.indexOf(e)===-1&&(i=s.deps.computed[e.str])&&i.forEach(t)}),this.changes=[],this.patternObservers.length&&(i.forEach(function(t){return r_(r,t,!0)}),n.forEach(function(t){return r_(r,t)})),this.deps.observers&&(i.forEach(function(t){return Mr(r,null,t,"observers")}),Cr(this,n,"observers")),this.deps["default"]&&(o=[],i.forEach(function(t){return Mr(r,o,t,"default")}),o.length&&Pr(this,o,n),Cr(this,n,"default")),n.forEach(function(t){a[t.str]=r.get(t)}),this.implicitChanges={},this.noCascade={},a}function Mr(t,e,n,i){var o,r;(o=Tr(t,n,i))&&(r=t.get(n),o.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(r)}))}function Pr(t,e,n){e.forEach(function(e){for(var i=!1,o=0,r=n.length,s=[];o<r;){var a=n[o];if(a===e.keypath){i=!0;break}a.slice(0,e.keypath.length)===e.keypath&&s.push(a),o++}i&&e.setValue(t.get(e.keypath)),s.length&&e.refineValue(s)})}function Cr(t,e,n){function i(t){t.forEach(o),t.forEach(r)}function o(e){var i=Tr(t,e,n);i&&a.push({keypath:e,deps:i})}function r(e){var o;(o=t.depsMap[n][e.str])&&i(o)}function s(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var a=[];i(e),a.forEach(s)}function Tr(t,e,n){var i=t.deps[n];return i?i[e.str]:null}function Sr(){this.captureGroups.push([])}function Dr(t,e){var n,i;if(e||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function Ar(t,e){var n=e.firstKey;return!(n in t.data||n in t.computations||n in t.mappings)}function Or(t,e){var n=new d_(t,e);return this.ready&&n.init(this),this.computations[t.str]=n}function Ir(t,e){var n,i,o,r,s,a=this.cache,h=t.str;if(e=e||g_,e.capture&&(r=R(this.captureGroups))&&(~r.indexOf(t)||r.push(t)),Ca.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;if(void 0===a[h]?((i=this.computations[h])&&!i.bypass?(n=i.get(),this.adapt(h,n)):(o=this.wrapped[h])?n=o.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=Rr(this,t),a[h]=n):n=a[h],!e.noUnwrap&&(o=this.wrapped[h])&&(n=o.get()),t.isRoot&&e.fullRootGet)for(s in this.mappings)n[s]=this.mappings[s].getValue();return n===f_?void 0:n}function Rr(t,e){var n,i,o,r;if(n=t.get(e.parent),(r=t.wrapped[e.parent.str])&&(n=r.get()),null!==n&&void 0!==n)return(i=t.cacheMap[e.parent.str])?i.indexOf(e.str)===-1&&i.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(o=n[e.lastKey],t.adapt(e.str,o,!1),t.cache[e.str]=o,o):t.cache[e.str]=f_}function zr(){var t;for(t in this.computations)this.computations[t].init(this)}function Ur(t,e){var n=this.mappings[t.str]=new y_(t,e);return n.initViewmodel(this),n}function Br(t,e){var n,i=t.str;e&&(e.implicit&&(this.implicitChanges[i]=!0),e.noCascade&&(this.noCascade[i]=!0)),(n=this.computations[i])&&n.invalidate(),this.changes.indexOf(t)===-1&&this.changes.push(t);var o=!!e&&e.keepExistingWrapper;this.clearCache(i,o),this.ready&&this.onchange()}function Nr(t,e,n,i){var o,r,s,a;if(this.mark(t),i&&i.compare){s=jr(i.compare);try{o=e.map(s),r=n.map(s)}catch(h){m('merge(): "%s" comparison failed. Falling back to identity checking',t),o=e,r=n}}else o=e,r=n;a=b_(o,r),this.smartUpdate(t,n,a,e.length!==n.length)}function Fr(t){return JSON.stringify(t)}function jr(t){if(t===!0)return Fr;if("string"==typeof t)return x_[t]||(x_[t]=function(e){return e[t]}),x_[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Zr(t,e){var n,i,o,r=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,r):(i=this.deps[r]||(this.deps[r]={}),o=i[t.str]||(i[t.str]=[]),o.push(e),this.depsMap[r]||(this.depsMap[r]={}),t.isRoot||Wr(this,t,r)))}function Wr(t,e,n){for(var i,o,r;!e.isRoot;)i=t.depsMap[n],o=i[e.parent.str]||(i[e.parent.str]=[]),r=e.str,void 0===o["_"+r]&&(o["_"+r]=0,o.push(e)),o["_"+r]+=1,e=e.parent}function Hr(){return this.captureGroups.pop()}function Gr(t){this.data=t,this.clearCache("")}function Vr(t,e){var n,i,o,r,s=void 0===arguments[2]?{}:arguments[2];if(!s.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(i=this.computations[t.str]){if(i.setting)return;i.set(e),e=i.get()}a(this.cache[t.str],e)||(o=this.wrapped[t.str],o&&o.reset&&(r=o.reset(e)!==!1,r&&(e=o.get())),i||r||qr(this,t,e),s.silent?this.clearCache(t.str):this.mark(t))}function qr(t,e,n){var i,o,r,s;r=function(){i.set?i.set(e.lastKey,n):(o=i.get(),s())},s=function(){o||(o=Kv(e.lastKey),t.set(e.parent,o,{silent:!0})),o[e.lastKey]=n},i=t.wrapped[e.parent.str],i?r():(o=t.get(e.parent),(i=t.wrapped[e.parent.str])?r():s())}function Yr(t,e,n){var i,o,r,s=this;if(o=n.length,n.forEach(function(e,n){e===-1&&s.mark(t.join(n),S_)}),this.set(t,e,{silent:!0}),(i=this.deps["default"][t.str])&&i.filter($r).forEach(function(t){return t.shuffle(n,e)}),o!==e.length){for(this.mark(t.join("length"),T_),r=n.touchedFrom;r<e.length;r+=1)this.mark(t.join(r));for(r=e.length;r<o;r+=1)this.mark(t.join(r),S_)}}function $r(t){return"function"==typeof t.shuffle}function Jr(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function Kr(t,e){var n,i,o,r=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,r);if(i=this.deps[r][t.str],o=i.indexOf(e),o===-1)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(o,1),t.isRoot||Qr(this,t,r)}}function Qr(t,e,n){for(var i,o;!e.isRoot;)i=t.depsMap[n],o=i[e.parent.str],o["_"+e.str]-=1,o["_"+e.str]||(z(o,e),o["_"+e.str]=void 0),e=e.parent}function Xr(t){this.hook=new nh(t),this.inProcess={},this.queue={}}function ts(t,e){return t[e._guid]||(t[e._guid]=[])}function es(t,e){var n=ts(t.queue,e);for(t.hook.fire(e);n.length;)es(t,n.shift());delete t.queue[e._guid]}function ns(t,e){var n,i={};for(n in e)i[n]=is(t,n,e[n]);return i}function is(t,e,n){var i,o;return"function"==typeof n&&(i=rs(n,t)),"string"==typeof n&&(i=os(t,n)),"object"==typeof n&&("string"==typeof n.get?i=os(t,n.get):"function"==typeof n.get?i=rs(n.get,t):c("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(o=rs(n.set,t))),{getter:i,setter:o}}function os(t,e){var n,i,o;return n="return ("+e.replace(U_,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),o=new Function(n),i?o.bind(t):o}function rs(t,e){return/this/.test(t.toString())?t.bind(e):t}function ss(e){var n,o,r=void 0===arguments[1]?{}:arguments[1],s=void 0===arguments[2]?{}:arguments[2];if(Vy.DEBUG&&Pa(),ls(e,s),ba(e,"data",{get:us}),B_.fire(e,r),Z_.forEach(function(t){e[t]=i(wa(e.constructor[t]||null),r[t])}),o=new I_({adapt:as(e,e.adapt,r),data:jl.init(e.constructor,e,r),computed:z_(e,i(wa(e.constructor.prototype.computed),r.computed)),mappings:s.mappings,ractive:e,onchange:function(){return mh.addRactive(e)}}),e.viewmodel=o,o.init(),_p.init(e.constructor,e,r),N_.fire(e),F_.begin(e),e.template){var a=void 0;(s.cssIds||e.cssId)&&(a=s.cssIds?s.cssIds.slice():[],e.cssId&&a.push(e.cssId)),e.fragment=new _y({template:e.template,root:e,owner:e,cssIds:a})}if(F_.end(e),n=t(e.el)){var h=e.render(n,e.append);Vy.DEBUG_PROMISES&&h["catch"](function(t){throw g("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:e}),t.stack&&d(t.stack),t})}}function as(t,e,n){function i(e){return"string"==typeof e&&(e=v("adaptors",t,e),e||c(Ra(e,"adaptor"))),e}var o,r,s;if(e=e.map(i),o=I(n.adapt).map(i),o=hs(e,o),r="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays,r){if(!na)throw new Error("Getters and setters (magic mode) are not supported in this browser");s&&o.push(e_),o.push(t_)}return s&&o.push($v),o}function hs(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function ls(t,e){t._guid="r-"+j_++,t._subs=wa(null),t._config={},t._twowayBindings=wa(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function us(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function cs(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new _y({template:e,root:t.root,owner:this}),this.update()}function ds(t,e,n){var i;return e.r?i=Gp(t,e.r,n):e.x?i=new $p(t,t.parentFragment,e.x,n):e.rx&&(i=new Xp(t,e.rx,n)),i}function ps(t){return 1===t.length&&t[0].t===Yl}function fs(t,e){var n;for(n in e)e.hasOwnProperty(n)&&ms(t.instance,t.root,n,e[n])}function ms(t,e,n,i){"string"!=typeof i&&c("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),jh(e,i,{event:t,args:n}),!1})}function gs(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,i=n.root,this.root=i,this.type=ru,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],G_(this,e,t.template.a,t.template.f,t.template.p),
V_(this,t.template.v),(t.template.t0||t.template.t1||t.template.t2||t.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),q_(this)}function vs(t,e){function n(n){n.rebind(t,e)}var i;this.resolvers.forEach(n);for(var o in this.yielders)this.yielders[o][0]&&n(this.yielders[o][0]);(i=this.root._liveComponentQueries["_"+this.name])&&i._makeDirty()}function _s(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function ys(){return this.instance.fragment.toString()}function ws(){var t=this.instance;this.resolvers.forEach(q),bs(this),t._observers.forEach($),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&z(t.el.__ractive_instances__,t),X_.fire(t)}function bs(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e.parent)}function Ls(t){this.shouldDestroy=t,this.instance.unrender()}function xs(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map(function(n,i){return ks({parentFragment:e,pElement:t.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function ks(t){if("string"==typeof t.template)return new Op(t);switch(t.template.t){case su:return new sy(t);case Yl:return new sf(t);case Jl:return new Mf(t);case $l:return new Hf(t);case Xl:var e=void 0;return(e=Dv(t.parentFragment.root,t.template.e))?new ny(t,e):new yv(t);case tu:return new Sv(t);case eu:return new oy(t);case hu:return new hy(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Es(t,e){this.owner&&!this.owner.hasContext||L(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function Ms(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Ps(t){return this.items?this.items.map(t?Ts:Cs).join(""):""}function Cs(t){return t.toString()}function Ts(t){return t.toString(!0)}function Ss(){this.bound&&(this.items.forEach(Ds),this.bound=!1)}function Ds(t){t.unbind&&t.unbind()}function As(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function Os(t){var e,n,i,o,r;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),i=_p.reset(this),o=i.length;o--;)if(wy.indexOf(i[o])>-1){r=!0;break}if(r){var s=void 0;this.viewmodel.mark(qa),(s=this.component)&&(s.shouldDestroy=!0),this.unrender(),s&&(s.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new _y({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=mh.start(this,!0),this.viewmodel.mark(qa),mh.end();return by.fire(this,t),e}function Is(t){var e,n;hp.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new _y({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Rs(t,e){var n,i;if(i=mh.start(this,!0),l(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],zs(this,t,e))}else zs(this,t,e);return mh.end(),i}function zs(t,e,n){e=k(P(e)),e.isPattern?E(t,e).forEach(function(e){t.viewmodel.set(e,n)}):t.viewmodel.set(e,n)}function Us(t,e){return Ya(this,t,void 0===e?-1:-e)}function Bs(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach($),this.fragment.rendered&&this.el.__ractive_instances__&&z(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():sh.resolve(),Dy.fire(this),this._boundFunctions.forEach(Ns),t}function Ns(t){delete t.fn[t.prop]}function Fs(t){var e=this;if("string"!=typeof t)throw new TypeError(Oa);var n=void 0;return/\*/.test(t)?(n={},E(this,k(P(t))).forEach(function(t){n[t.str]=!e.viewmodel.get(t)}),this.set(n)):this.set(t,!this.get(t))}function js(){return this.fragment.toString(!0)}function Zs(){var t,e;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),sh.resolve();for(t=mh.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),z(this.el.__ractive_instances__,this),Ry.fire(this),mh.end(),t}function Ws(t){var e;return t=k(t)||qa,e=mh.start(this,!0),this.viewmodel.mark(t),mh.end(),By.fire(this,t),e}function Hs(t,e){var n,i,o;if("string"!=typeof t||e){o=[];for(i in this._twowayBindings)t&&!k(i).equalsOrStartsWith(t)||o.push.apply(o,this._twowayBindings[i])}else o=this._twowayBindings[t];return n=Gs(this,o),this.set(n)}function Gs(t,e){var n={},i=[];return e.forEach(function(t){var e,o;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(i[t.keypath.str]||t.changed()||(i.push(t.keypath),i[t.keypath.str]=t));e=t.attribute.value,o=t.getValue(),O(e,o)||a(e,o)||(n[t.keypath.str]=o)}}),i.length&&i.forEach(function(t){var e,o,r;e=i[t.str],o=e.attribute.value,r=e.getValue(),O(o,r)||(n[t.str]=r)}),n}function Vs(t,e){return"function"==typeof e&&/_super/.test(t)}function qs(t){for(var e={};t;)Ys(t,e),Js(t,e),t=t._Parent!==Vy&&t._Parent;return e}function Ys(t,e){mp.forEach(function(n){$s(n.useDefaults?t.prototype:t,e,n.name)})}function $s(t,e,n){var i,o=Object.keys(t[n]);o.length&&((i=e[n])||(i=e[n]={}),o.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function Js(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var o=void 0,r=i._method;r&&(i=i._method),o=jy(e[n]._method,i),r&&(o._method=o),e[n]=o}}else e[n]=i._method?i._method:i}})}function Ks(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?e.reduce(Qs,this):Qs(this)}function Qs(t){var e,n,o=void 0===arguments[1]?{}:arguments[1];return o.prototype instanceof Vy&&(o=Zy(o)),e=function(t){return this instanceof e?void W_(this,t):new e(t)},n=wa(t.prototype),n.constructor=e,La(e,{defaults:{value:n},extend:{value:Ks,writable:!0,configurable:!0},_Parent:{value:t}}),_p.extend(t,n,o),jl.extend(t,n,o),o.computed&&(n.computed=i(wa(t.prototype.computed),o.computed)),e.prototype=n,e}var Xs,ta,ea,na,ia,oa,ra,sa=3,aa={el:void 0,append:!1,template:{v:sa,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ha=aa,la={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};Xs="object"==typeof document,ta="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ea="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),na=!0}catch(ua){na=!1}ia={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},oa="undefined"!=typeof document&&(document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),ra=["o","ms","moz","webkit"];var ca,da,pa,fa,ma,ga,va,_a,ya;if(ca=oa?function(t,e){return e&&e!==ia.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==ia.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},Xs){for(pa=ca("div"),fa=["matches","matchesSelector"],ya=function(t){return function(e,n){return e[t](n)}},va=fa.length;va--&&!da;)if(ma=fa[va],pa[ma])da=ya(ma);else for(_a=ra.length;_a--;)if(ga=ra[va]+ma.substr(0,1).toUpperCase()+ma.substring(1),pa[ga]){da=ya(ga);break}da||(da=function(t,e){var n,i,o;for(i=t.parentNode,i||(pa.innerHTML="",i=pa,t=t.cloneNode(),pa.appendChild(t)),n=i.querySelectorAll(e),o=n.length;o--;)if(n[o]===t)return!0;return!1})}else da=null;var wa,ba,La,xa=null;try{Object.defineProperty({},"test",{value:0}),Xs&&Object.defineProperty(document.createElement("div"),"test",{value:0}),ba=Object.defineProperty}catch(ka){ba=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(ka){throw ka}Xs&&Object.defineProperties(ca("div"),{test:{value:0}}),La=Object.defineProperties}catch(ka){La=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&ba(t,n,e[n])}}try{Object.create(null),wa=Object.create}catch(ka){wa=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var Ea,Ma,Pa,Ca=Object.prototype.hasOwnProperty,Ta=Object.prototype.toString,Sa=/^\[object (?:Array|FileList)\]$/,Da=function(){},Aa={};ea?!function(){var t=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Pa=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),Pa=Da},Ma=function(t,e){if(Pa(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var o=void 0;i.component&&(o=i.component.name)&&(t="<"+o+"> "+t);var r=void 0;(r=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(r)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Ea=function(){console.log.apply(console,arguments)}}():Ma=Ea=Pa=Da;var Oa="Bad arguments",Ia='A function was specified for "%s" %s, but no %s was returned',Ra=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},za=function(t,e,n,i){if(t===e)return y(e);if(i){var o=v("interpolators",n,i);if(o)return o(t,e)||y(e);c(Ra(i,"interpolator"))}return Na.number(t,e)||Na.array(t,e)||Na.object(t,e)||y(e)},Ua=za,Ba={number:function(t,e){var n;return h(t)&&h(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,i,o,s;if(!r(t)||!r(e))return null;for(n=[],i=[],s=o=Math.min(t.length,e.length);s--;)i[s]=Ua(t[s],e[s]);for(s=o;s<t.length;s+=1)n[s]=t[s];for(s=o;s<e.length;s+=1)n[s]=e[s];return function(t){for(var e=o;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,o,r,s;if(!l(t)||!l(e))return null;n=[],r={},o={};for(s in t)Ca.call(t,s)&&(Ca.call(e,s)?(n.push(s),o[s]=Ua(t[s],e[s])):r[s]=t[s]);for(s in e)Ca.call(e,s)&&!Ca.call(t,s)&&(r[s]=e[s]);return i=n.length,function(t){for(var e,s=i;s--;)e=n[s],r[e]=o[e](t);return r}}},Na=Ba,Fa=w,ja={},Za=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Wa=/\*/,Ha={},Ga=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=x(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.isPattern=Wa.test(t),this.parent=""===t?null:k(e.join(".")),this.isRoot=!t};Ga.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return k(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:k(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return!!t&&(t&&this.str.substr(0,t.str.length+1)===t.str+".")},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=Fa(this.str))}};var Va,qa=k(""),Ya=C,$a="Cannot add to a non-numeric value",Ja=T;"undefined"==typeof window?Va=null:(!function(t,e,n){var i,o;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(o=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,r;return n=Date.now(),i=Math.max(0,16-(n-e)),r=o(function(){t(n+i)},i),e=n+i,r})}}(ra,0,window),Va=window.requestAnimationFrame);var Ka,Qa=Va;Ka="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Xa=Ka,th={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};S.prototype.fire=function(t,e){function n(n){if(t[n])return e?t[n](e):t[n](),!0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var eh,nh=S,ih={},oh={},rh={};"function"==typeof Promise?eh=Promise:(eh=function(t){var e,n,i,o,r,s,a=[],h=[],l=ih;i=function(t){return function(i){l===ih&&(e=i,l=t,n=N(l===oh?a:h,e),B(n))}},o=i(oh),r=i(rh);try{t(o,r)}catch(u){r(u)}return s={then:function(t,e){var i=new eh(function(o,r){var s=function(t,e,n){"function"==typeof t?e.push(function(e){var n;try{n=t(e),F(i,n,o,r)}catch(s){r(s)}}):e.push(n)};s(t,a,o),s(e,h,r),l!==ih&&B(n)});return i}},s["catch"]=function(t){return this.then(null,t)},s},eh.all=function(t){return new eh(function(e,n){var i,o,r,s=[];if(!t.length)return void e(s);for(r=function(t,o){t&&"function"==typeof t.then?t.then(function(t){s[o]=t,--i||e(s)},n):(s[o]=t,--i||e(s))},i=o=t.length;o--;)r(t[o],o)})},eh.resolve=function(t){return new eh(function(e){e(t)})},eh.reject=function(t){return new eh(function(e,n){n(t)})});var sh=eh,ah=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return qa},hh=j,lh=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};lh.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Q(this)},decrementTotal:function(){this.totalChildren-=1,Q(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){var e=t.isIntro?this.intros:this.outros;z(e,t),Q(this)},init:function(){this.ready=!0,Q(this)},detachNodes:function(){this.decoratorQueue.forEach(V),this.detachQueue.forEach(J),this.children.forEach(K)}};var uh,ch,dh=lh,ph=[],fh=new nh("change");ch={start:function(t,e){var n,i;return e&&(n=new sh(function(t){return i=t})),uh={previousBatch:uh,transitionManager:new dh(i,uh&&uh.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&uh.ractives.push(t),n},end:function(){X(),uh.transitionManager.init(),!uh.previousBatch&&uh.instance&&(uh.instance.viewmodel.changes=[]),uh=uh.previousBatch},addRactive:function(t){uh&&D(uh.ractives,t)},registerTransition:function(t){t._manager=uh.transitionManager,uh.transitionManager.add(t)},registerDecorator:function(t){uh.transitionManager.addDecorator(t)},addView:function(t){uh.views.push(t)},addUnresolved:function(t){ph.push(t)},removeUnresolved:function(t){z(ph,t)},detachWhenReady:function(t){uh.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(uh){for(n=uh;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var mh=ch,gh=[],vh={tick:function(){var t,e,n;for(n=Xa(),mh.start(),t=0;t<gh.length;t+=1)e=gh[t],e.tick(n)||gh.splice(t--,1);mh.end(),gh.length?Qa(vh.tick):vh.running=!1},add:function(t){gh.push(t),vh.running||(vh.running=!0,Qa(vh.tick))},abort:function(t,e){for(var n,i=gh.length;i--;)n=gh[i],n.root===e&&n.keypath===t&&n.stop()}},_h=vh,yh=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Ua(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};yh.prototype={tick:function(){var t,e,n,i,o,r;return r=this.keypath,!!this.running&&(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==r&&(mh.start(this.root),this.root.viewmodel.set(r,this.to),mh.end()),this.step&&this.step(1,this.to),this.complete(this.to),o=this.root._animations.indexOf(this),o===-1&&m("Animation was not found"),this.root._animations.splice(o,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==r&&(n=this.interpolator(e),mh.start(this.root),this.root.viewmodel.set(r,n),mh.end()),this.step&&this.step(e,n),!0))},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&m("Animation was not found"),this.root._animations.splice(t,1)}};var wh=yh,bh=nt,Lh={stop:Da},xh=ot,kh=new nh("detach"),Eh=rt,Mh=st,Ph=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),n!==-1&&(t.splice(n,1),t[e]=null)},Ch=function(t,e){var n,i,o,r,s,a,h,l,u,c;for(n=ht(t.component||t._ractive.proxy),i=ht(e.component||e._ractive.proxy),o=R(n),r=R(i);o&&o===r;)n.pop(),i.pop(),s=o,o=R(n),r=R(i);if(o=o.component||o,r=r.component||r,u=o.parentFragment,c=r.parentFragment,u===c)return a=u.items.indexOf(o),h=c.items.indexOf(r),a-h||n.length-i.length;if(l=s.fragments)return a=l.indexOf(u),h=l.indexOf(c),a-h||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Th=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):Ch(t,e)},Sh=function(){this.sort(this._isComponentQuery?Ch:Th),this._dirty=!1},Dh=function(){var t=this;this._dirty||(this._dirty=!0,mh.scheduleTask(function(){t._sort()}))},Ah=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);e!==-1&&this.splice(e,1)},Oh=lt,Ih=ut,Rh=ct,zh=dt,Uh=pt,Bh=ft,Nh={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},Fh=Nh,jh=mt,Zh=_t,Wh=yt,Hh={capture:!0,noUnwrap:!0,fullRootGet:!0},Gh=wt,Vh=new nh("insert"),qh=Lt,Yh=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};Yh.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?mh.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var $h,Jh=Yh,Kh=xt,Qh=Array.prototype.slice;$h=function(t,e,n,i){this.root=t,this.callback=n,this.defer=i.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:t},$h.prototype={init:function(t){var e,n;if(e=Kh(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(k(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern){e=Kh(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(k(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void mh.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,i,o;return e=t.str,n=this.root.viewmodel.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,a(n,this.values[e])&&this.ready||(i=Qh.call(this.regex.exec(e),1),o=[n,this.values[e],e].concat(i),this.values[e]=n,this.callback.apply(this.context,o)),void(this.updating=!1))},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var Xh,tl,el,nl,il,ol,rl=$h,sl=kt,al={},hl=Et,ll=Mt,ul=function(t){return t.trim()},cl=function(t){return""!==t},dl=Pt,pl=Ct,fl=Tt,ml=St,gl=Array.prototype,vl=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var s,a,h,l,u=[];if(e=k(P(e)),s=this.viewmodel.get(e),a=s.length,!r(s))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return u=ml(s,t,i),l=gl[t].apply(s,i),h=mh.start(this,!0).then(function(){return l}),u?this.viewmodel.smartUpdate(e,s,u):this.viewmodel.mark(e),mh.end(),h}},_l=vl("pop"),yl=vl("push"),wl="/* Ractive.js component styles */\n",bl=[],Ll=!1;Xs?(el=document.createElement("style"),el.type="text/css",nl=document.getElementsByTagName("head")[0],ol=!1,il=el.styleSheet,tl=function(){var t=wl+bl.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");il?il.cssText=t:el.innerHTML=t,ol||(nl.appendChild(el),ol=!0)},Xh={add:function(t){bl.push(t),Ll=!0},apply:function(){Ll&&(tl(),Ll=!1)}}):Xh={add:Da,apply:Da};var xl,kl,El=Xh,Ml=At,Pl=new nh("render"),Cl=new nh("complete"),Tl={extend:function(t,e,n){e.adapt=It(e.adapt,I(n.adapt))},init:function(){}},Sl=Tl,Dl=Rt,Al=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Ol=/\/\*.*?\*\//g,Il=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Rl=/^@media/,zl=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Ul=1,Bl={name:"css",extend:function(t,e,n){if(n.css){var i=Ul++,o=n.noCssTransform?n.css:Dl(n.css,i);e.cssId=i,El.add({id:i,styles:o})}},init:function(){}},Nl=Bl,Fl={name:"data",extend:function(t,e,n){var i=void 0,o=void 0;if(n.data&&l(n.data))for(i in n.data)o=n.data[i],o&&"object"==typeof o&&(l(o)||r(o))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Nt(e.data,n.data)},init:function(t,e,n){var i=Nt(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}},jl=Fl,Zl=/^\s+/;kl=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},kl.prototype=Error.prototype,xl=function(t,e){var n,i,o=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=o+t.length+1;return o=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},xl.prototype={read:function(t){var e,n,i,o;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;n<i;n+=1)if(this.pos=e,o=t[n](this))return o;return null},getLinePos:function(t){for(var e,n=0,i=0;t>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],o=this.lines[e[0]-1],r=0,s=o.replace(/\t/g,function(t,n){return n<e[1]&&(r+=1),"  "})+"\n"+new Array(e[1]+r).join(" ")+"^----",a=new kl(""+t+" at line "+n+" character "+i+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){if(this.str.substr(this.pos,t.length)===t)return this.pos+=t.length,t},matchPattern:function(t){var e;if(e=t.exec(this.remaining()))return this.pos+=e[0].length,e[1]||e[0]},allowWhitespace:function(){this.matchPattern(Zl)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},xl.extend=function(t){var e,n,i=this;e=function(t,e){xl.call(this,t,e)},e.prototype=wa(i.prototype);for(n in t)Ca.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=xl.extend,e};var Wl,Hl,Gl,Vl=xl,ql=1,Yl=2,$l=3,Jl=4,Kl=5,Ql=6,Xl=7,tu=8,eu=9,nu=10,iu=13,ou=14,ru=15,su=16,au=17,hu=18,lu=20,uu=21,cu=22,du=23,pu=24,fu=25,mu=26,gu=27,vu=30,_u=31,yu=32,wu=33,bu=34,Lu=35,xu=36,ku=40,Eu=50,Mu=51,Pu=52,Cu=53,Tu=54,Su=60,Du=61,Au=Zt,Ou=/^[^\s=]+/,Iu=/^\s+/,Ru=Wt,zu=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Uu=Ht,Bu={t:nu,exclude:!0},Nu="Expected a JavaScript expression",Fu="Expected closing paren",ju=Vt,Zu=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Wu=qt;Wl=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Hl=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Gl=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Hu,Gu,Vu=function(t){return function(e){var n,i,o,r;for(n=e.pos,i='"',o=!1;!o;)r=e.matchPattern(Wl)||e.matchPattern(Hl)||e.matchString(t),r?i+='"'===r?'\\"':"\\'"===r?"'":r:(r=e.matchPattern(Gl),r?i+="\\u"+("000"+r.charCodeAt(1).toString(16)).slice(-4):o=!0);return i+='"',JSON.parse(i)}},qu=Vu('"'),Yu=Vu("'"),$u=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=Yu(t),t.matchString('"')?{t:uu,v:n}:(t.pos=e,null)):t.matchString("'")?(n=qu(t),t.matchString("'")?{t:uu,v:n}:(t.pos=e,null)):null},Ju=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Ku=Yt,Qu=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Xu=$t,tc=Jt,ec=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=tc(t),t.allowWhitespace(),t.matchString("}")?{t:du,m:n}:(t.pos=e,null)):(t.pos=e,null)},nc=Kt,ic=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=nc(t),t.matchString("]")?{t:cu,m:n}:(t.pos=e,null)):(t.pos=e,null)},oc=Qt,rc=Xt,sc=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;Hu=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,Gu=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var ac,hc,lc=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,uc=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,cc=te,dc=function(t){return oc(t)||rc(t)||cc(t)},pc=ee,fc=function(t){var e,n,i,o;if(n=dc(t),!n)return null;for(;n;)if(e=t.pos,i=pc(t))n={t:yu,x:n,r:i};else{if(!t.matchString("("))break;t.allowWhitespace(),o=nc(t),t.allowWhitespace(),t.matchString(")")||t.error(Fu),n={t:ku,x:n},o&&(n.o=o)}return n};hc=function(t,e){return function(n){var i;return(i=e(n))?i:n.matchString(t)?(n.allowWhitespace(),i=Cc(n),i||n.error(Nu),{s:t,o:i,t:wu}):null}},function(){var t,e,n,i,o;for(i="! ~ + - typeof".split(" "),o=fc,t=0,e=i.length;t<e;t+=1)n=hc(i[t],o),o=n;ac=o}();var mc,gc,vc=ac;gc=function(t,e){return function(n){var i,o,r;if(o=e(n),!o)return null;for(;;){if(i=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=i,o;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,o;if(n.allowWhitespace(),r=e(n),!r)return n.pos=i,o;o={t:xu,s:t,o:[o,r]}}}},function(){var t,e,n,i,o;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),o=vc,t=0,e=i.length;t<e;t+=1)n=gc(i[t],o),o=n;mc=o}();var _c,yc,wc,bc,Lc,xc,kc,Ec,Mc=mc,Pc=ne,Cc=ie,Tc=oe,Sc=se,Dc=/^[0-9][1-9]*$/,Ac=he,Oc=le,Ic=ue,Rc=ce,zc=de,Uc=pe,Bc=fe,Nc=/^yield\s*/,Fc=me,jc=ge,Zc=/^\s*else\s*/,Wc=ve,Hc=/^\s*elseif\s+/,Gc={each:Pu,"if":Eu,"if-with":Tu,"with":Cu,unless:Mu},Vc=_e,qc=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Yc=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,$c=new RegExp("^("+Object.keys(Gc).join("|")+")\\b"),Jc=xe,Kc="<!--",Qc="-->";_c=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,yc=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,wc={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},bc=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Lc=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(wc).join("|")+"));?","g"),xc=/</g,kc=/>/g,Ec=/&/g;var Xc,td,ed,nd,id,od,rd,sd=/^\s*\r?\n/,ad=/\r?\n\s*$/,hd=function(t){var e,n,i,o,r;for(e=1;e<t.length;e+=1)n=t[e],i=t[e-1],o=t[e-2],Pe(n)&&Ce(i)&&Pe(o)&&ad.test(o)&&sd.test(n)&&(t[e-2]=o.replace(ad,"\n"),t[e]=n.replace(sd,"")),Te(n)&&Pe(i)&&ad.test(i)&&Pe(n.f[0])&&sd.test(n.f[0])&&(t[e-1]=i.replace(ad,"\n"),n.f[0]=n.f[0].replace(sd,"")),Pe(n)&&Te(i)&&(r=R(i.f),Pe(r)&&ad.test(r)&&sd.test(n)&&(i.f[i.f.length-1]=r.replace(ad,"\n"),t[e]=n.replace(sd,"")));return t},ld=function(t,e,n){var i;e&&(i=t[0],"string"==typeof i&&(i=i.replace(e,""),i?t[0]=i:t.shift())),n&&(i=R(t),"string"==typeof i&&(i=i.replace(n,""),i?t[t.length-1]=i:t.pop()))},ud=Se,cd=/[ \t\f\r\n]+/g,dd=/^(?:pre|script|style|textarea)$/i,pd=/^[ \t\f\r\n]+/,fd=/[ \t\f\r\n]+$/,md=/^(?:\r\n|\r|\n)/,gd=/(?:\r\n|\r|\n)$/,vd=De,_d=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,yd=function(t,e){var n,i,o;for(n=e.length;n--;){if(i=t.indexOf(e[n]),!i)return 0;i!==-1&&(!o||i<o)&&(o=i)}return o||-1},wd=Ae,bd=/^[^\s"'>\/=]+/,Ld=/^[^\s"'=<>`]+/;td={"true":!0,"false":!1,undefined:void 0,"null":null},ed=new RegExp("^(?:"+Object.keys(td).join("|")+")"),nd=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,id=/\$\{([^\}]+)\}/g,od=/^\$\{([^\}]+)\}/,rd=/^\s*$/,Xc=Vl.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&rd.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(od),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;if(e=t.matchPattern(ed))return{v:td[e]}},function(t){var e;if(e=t.matchPattern(nd))return{v:+e}},function(t){var e,n=$u(t);return n&&(e=t.values)?{v:n.v.replace(id,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=Be(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var xd,kd=function(t,e){var n=new Xc(t,{values:e});return n.result},Ed=Ne,Md=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,Pd=/\)\s*$/;xd=Vl.extend({converters:[Cc]});var Cd,Td=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Sd=/^[\s\n\/>]/,Dd=/^on/,Ad=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Od=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Id={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Rd={exclude:!0};Cd={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var zd,Ud=Fe,Bd=Ze,Nd=We,Fd=/[-\/\\^$*+?.()|[\]{}]/g,jd=He,Zd=/^<!--\s*/,Wd=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Hd=/\s*-->/,Gd=Ge,Vd=/^#\s*partial\s+/,qd=Ve,Yd=qe,$d=[Ic,Oc,Vc,Bc,Uc,Rc],Jd=[Ac],Kd=[Oc,Vc,Uc],Qd=void 0,Xd=[Uu,Jc,Ud,Bd],tp=[jd,Gd];Qd=Vl.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],i=e.staticDelimiters||["[[","]]"],o=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:$d},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Jd},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Kd},{isStatic:!0,isTriple:!0,open:o[0],close:o[1],readers:Jd}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=e.stripComments!==!1,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t){return t.length?(this.sectionDepth>0&&this.error("A section was left open"),ud(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),t[0]):{t:[],v:sa}},converters:[qd],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var ep,np,ip,op=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],rp={fromId:Je,isHashedId:Ke,isParsed:Qe,getParseOptions:Xe,createHelper:Ye,parse:$e},sp=rp,ap={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,"function"==typeof i?e.template=i:e.template=on(i,e))},init:function(t,e,n){var i,o;i="template"in n?n.template:t.prototype.template,"function"==typeof i&&(o=i,i=en(e,o),e._config.template={fn:o,result:i}),i=on(i,e),e.template=i.t,i.p&&rn(e.partials,i.p)},reset:function(t){var e,n=tn(t);if(n)return e=on(n,t),t.template=e.t,rn(t.partials,e.p,!0),!0}},hp=ap;ep=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],np=function(t,e){this.name=t,this.useDefaults=e},np.prototype={constructor:np,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,o=this.name,r=n[o];i=wa(t[o]);for(var s in r)i[s]=r[s];e[o]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n}},ip=ep.map(function(t){return new np(t,"computed"===t)});var lp,up,cp,dp,pp,fp,mp=ip,gp=sn,vp=un;dp={adapt:Sl,css:Nl,data:jl,template:hp},cp=Object.keys(ha),fp=pn(cp.filter(function(t){return!dp[t]})),pp=pn(cp.concat(mp.map(function(t){return t.name}))),up=[].concat(cp.filter(function(t){return!mp[t]&&!dp[t]}),mp,dp.data,dp.template,dp.css),lp={extend:function(t,e,n){return cn("extend",t,e,n)},init:function(t,e,n){return cn("init",t,e,n)},reset:function(t){return up.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:up};var _p=lp,yp=fn,wp=mn,bp=gn,Lp=vn,xp=_n,kp=yn,Ep=wn,Mp=bn,Pp=Ln,Cp=xn,Tp=kn,Sp=En,Dp=function(){return e(this.node)},Ap=function(t){this.type=ql,this.text=t.template};Ap.prototype={detach:Dp,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?Me(this.text):this.text},unrender:function(t){if(t)return this.detach()}};var Op=Ap,Ip=Mn,Rp=Pn,zp=function(t,e,n){var i;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,i=hh(t.root,e,t.parentFragment),void 0!=i?this.resolve(i):mh.addUnresolved(this)};zp.prototype={resolve:function(t){this.keypath&&!t&&mh.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(k(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&(n=this.keypath.replace(t,e),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||mh.removeUnresolved(this)}};var Up=zp,Bp=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},Np={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Bp.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,i=Np[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(k("@"+i.prefix+Cn(this.cached,i)));if(i.prop.indexOf("index")!==-1||i.prop.indexOf("key")!==-1)for(;n;){if(n.owner.currentSubtype===Pu&&void 0!==(t=Cn(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(k("@"+i.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=Cn(n,i)))return this.callback(k("@"+i.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Fp=Bp,jp=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};jp.prototype={rebind:function(){var t,e=this.ref.ref;t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index,void 0!==t&&this.callback(k("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Zp=jp,Wp=Tn;Tn.resolve=function(t){var e,n,i={};for(e in t.refs)n=t.refs[e],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var Hp,Gp=Sn,Vp=Dn,qp={},Yp=Function.prototype.bind;Hp=function(t,e,n,i){var o,r=this;o=t.root,this.root=o,this.parentFragment=e,this.callback=i,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return Gp(r,t,function(t){r.resolve(e,t)})}),this.ready=!0,this.bubble()},Hp.prototype={bubble:function(){this.ready&&(this.uniqueString=On(this.str,this.keypaths),this.keypath=In(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,i,o,r=this;i=this.keypath,t=this.root.viewmodel.computations[i.str],t?this.root.viewmodel.mark(i):(o=Vp(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=r.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=zn(e,r.root)),e}}),n={deps:this.keypaths.filter(Rn),getter:function(){var t=e.map(An);return o.apply(null,t)}},t=this.root.viewmodel.compute(i,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var $p=Hp,Jp=function(t,e,n){var i=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===vu?this.refResolver=Gp(this,t.n,function(t){i.resolve(t)}):new $p(e,n,t,function(t){i.resolve(t)})};Jp.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Kp=Jp,Qp=function(t,e,n){var i,o,r,s,a=this;this.parentFragment=s=t.parentFragment,this.root=i=t.root,this.mustache=t,this.ref=o=e.r,this.callback=n,this.unresolved=[],(r=hh(i,o,s))?this.base=r:this.baseResolver=new Up(this,o,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new Kp(t,a,s)}),this.ready=!0,this.bubble()};Qp.prototype={getKeypath:function(){var t=this.members.map(Un);return!t.every(Bn)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(q)},rebind:function(t,e){var n;if(this.base){var i=this.base.replace(t,e);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach(function(i){i.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=k(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Nn),this.bubble()}};var Xp=Qp,tf=Fn,ef=jn,nf=Zn,of={getValue:Rp,init:tf,resolve:ef,rebind:nf},rf=function(t){this.type=Yl,of.init(this,t)};rf.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:of.resolve,rebind:of.rebind,detach:Dp,unbind:Ip,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(t){t&&e(this.node)},getValue:of.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&mh.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+n(this.value);return t?Me(e):e}};var sf=rf,af=Wn,hf=Hn,lf=Gn,uf=Vn,cf=qn,df=Yn,pf=$n,ff=Jn,mf=Kn,gf=function(t,e){of.rebind.call(this,t,e)},vf=Xn,_f=ti,yf=ci,wf=di,bf=pi,Lf=gi,xf=function(t){this.type=Jl,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===Mu,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,of.init(this,t)};xf.prototype={bubble:af,detach:hf,find:lf,findAll:uf,findAllComponents:cf,findComponent:df,findNextNode:pf,firstNode:ff,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:of.getValue,shuffle:mf,rebind:gf,render:vf,resolve:of.resolve,setValue:_f,toString:yf,unbind:wf,unrender:bf,update:Lf};var kf,Ef,Mf=xf,Pf=vi,Cf=_i,Tf=yi,Sf=wi,Df={};try{ca("table").innerHTML="foo"}catch(ka){kf=!0,Ef={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Af=function(t,e,n){var i,o,r,s,a,h=[];if(null!=t&&""!==t){for(kf&&(o=Ef[e.tagName])?(i=bi("DIV"),i.innerHTML=o[0]+t+o[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(r=i.options[i.selectedIndex])):e.namespaceURI===ia.svg?(i=bi("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=bi(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(r=i.options[i.selectedIndex]));s=i.firstChild;)h.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=h.length;a--;)h[a]!==r&&(h[a].selected=!1)}return h},Of=Li,If=ki,Rf=Ei,zf=Mi,Uf=Pi,Bf=Ci,Nf=function(t){this.type=$l,of.init(this,t)};Nf.prototype={detach:Pf,find:Cf,findAll:Tf,firstNode:Sf,getValue:of.getValue,rebind:of.rebind,render:If,resolve:of.resolve,setValue:Rf,toString:zf,unbind:Ip,unrender:Uf,update:Bf};var Ff,jf,Zf,Wf,Hf=Nf,Gf=function(){this.parentFragment.bubble()},Vf=Ti,qf=function(t){return this.node?da(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},Yf=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},$f=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Jf=function(t){if(this.fragment)return this.fragment.findComponent(t)},Kf=Si,Qf=Di,Xf=Ai,tm=/^true|on|yes|1$/i,em=/^[0-9]+$/,nm=function(t,e){var n,i,o;return o=e.a||{},i={},n=o.twoway,void 0!==n&&(i.twoway=0===n||tm.test(n)),n=o.lazy,void 0!==n&&(0!==n&&em.test(n)?i.lazy=parseInt(n):i.lazy=0===n||tm.test(n)),i},im=Oi;Ff="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),jf="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Zf=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Wf=Zf(Ff.concat(jf));var om=function(t){var e=t.toLowerCase();return Wf[e]||e},rm=function(t,e){var n,i;if(n=e.indexOf(":"),n===-1||(i=e.substr(0,n),"xmlns"===i))t.name=t.element.namespace!==ia.html?om(e):e;else if(e=e.substring(n+1),t.name=om(e),t.namespace=ia[i.toLowerCase()],t.namespacePrefix=i,!t.namespace)throw'Unknown namespace ("'+i+'")'},sm=Ii,am=Ri,hm=zi,lm=Ui,um={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},cm=Bi,dm=Fi,pm=ji,fm=Zi,mm=Wi,gm=Hi,vm=Gi,_m=Vi,ym=qi,wm=Yi,bm=$i,Lm=Ji,xm=Ki,km=Qi,Em=Xi,Mm=function(t){this.init(t)};Mm.prototype={bubble:im,init:am,rebind:hm,render:lm,toString:cm,unbind:dm,update:Em};var Pm,Cm=Mm,Tm=function(t,e){var n,i,o=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new Cm({element:t,name:n,value:e[n],root:t.root}),o[n]=i,"value"!==n&&o.push(i));return(i=o.value)&&o.push(i),o};"undefined"!=typeof document&&(Pm=ca("div"));var Sm=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new _y({root:t.root,owner:this,template:[e]})};Sm.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===ia.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=to(t,this.isSvg),this.attributes.filter(function(t){return eo(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var Dm=Sm,Am=function(t,e){return e?e.map(function(e){return new Dm(t,e)}):[]},Om=function(t){var e,n,i,o;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return g("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return g("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{var r=e.template.r?"'"+e.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",r,{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue&&(i=this.getInitialValue(),void 0!==i&&this.root.viewmodel.set(n,i)),(o=no(t))&&(this.resetValue=i,o.formBindings.push(this))};Om.prototype={handleChange:function(){var t=this;mh.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),mh.scheduleTask(function(){return t.attribute.locked=!1}),mh.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(z(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},Om.extend=function(t){var e,n=this;return e=function(t){Om.call(this,t),this.init&&this.init()},e.prototype=wa(n.prototype),i(e.prototype,t),e.extend=Om.extend,e};var Im,Rm=Om,zm=io;Im=Rm.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:h(this.element.lazy)?(t=!1,n=+this.element.lazy):h(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?ro:zm,e.addEventListener("change",zm,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",oo,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",zm,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",oo,!1)}});var Um=Im,Bm=Um.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Nm=Bm,Fm=so,jm={},Zm=Rm.extend({name:"checked",init:function(){this.siblings=Fm(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",zm,!1),t.attachEvent&&t.addEventListener("click",zm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",zm,!1),t.removeEventListener("click",zm,!1)},handleChange:function(){mh.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),mh.end()},getValue:function(){return this.element.node.checked},unbind:function(){z(this.siblings,this)}}),Wm=Zm,Hm=Rm.extend({name:"name",init:function(){this.siblings=Fm(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",zm,!1),t.attachEvent&&t.addEventListener("click",zm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",zm,!1),t.removeEventListener("click",zm,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&Rm.prototype.handleChange.call(this)},rebound:function(t,e){var n;Rm.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){z(this.siblings,this)}}),Gm=Hm,Vm=Rm.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=Fm(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){z(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),r(t)?this.isChecked=A(t,e):this.isChecked=t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",zm,!1),n.attachEvent&&n.addEventListener("click",zm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",zm,!1),t.removeEventListener("click",zm,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,Rm.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ao).map(ho)}}),qm=Vm,Ym=Rm.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",zm,!1),t.attachEvent&&t.addEventListener("click",zm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",zm,!1),t.removeEventListener("click",zm,!1)},getValue:function(){return this.element.node.checked}}),$m=Ym,Jm=Rm.extend({getInitialValue:function(){var t,e,n,i,o=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=o.length,t)){for(;e--;)if(o[e].getAttribute("selected")){n=o[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!o[e].getAttribute("disabled")){n=o[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",zm,!1)},unrender:function(){this.element.node.removeEventListener("change",zm,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,i,o;for(t=this.element.node.options,n=t.length,e=0;e<n;e+=1)if(i=t[e],t[e].selected)return o=i._ractive?i._ractive.value:i.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,mh.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),Km=Jm,Qm=Km.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",zm,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",zm,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,i,o,r;for(t=[],e=this.element.node.options,i=e.length,n=0;n<i;n+=1)o=e[n],o.selected&&(r=o._ractive?o._ractive.value:o.value,t.push(r));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&O(n,e)||Km.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,mh.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Xm=Qm,tg=Rm.extend({render:function(){this.element.node.addEventListener("change",zm,!1)},unrender:function(){this.element.node.removeEventListener("change",zm,!1)},getValue:function(){return this.element.node.files}}),eg=tg,ng=Um.extend({getInitialValue:function(){},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),ig=lo,og=co,rg=po,sg=fo,ag=mo,hg=/^event(?:\.(.+))?/,lg=yo,ug=wo,cg={},dg={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},pg=Lo,fg=xo,mg=ko,gg=Eo,vg=Mo,_g=function(t,e,n){this.init(t,e,n)};_g.prototype={bubble:og,fire:rg,getAction:sg,init:ag,listen:ug,rebind:pg,render:fg,resolve:mg,unbind:gg,unrender:vg};var yg=_g,wg=function(t,e){var n,i,o,r,s=[];for(i in e)if(e.hasOwnProperty(i))for(o=i.split("-"),n=o.length;n--;)r=new yg(t,o[n],e[i]),s.push(r);return s},bg=function(t,e){var n,i,o,r=this;this.element=t,this.root=n=t.root,i=e.n||e,"string"!=typeof i&&(o=new _y({template:i,root:n,owner:t}),i=o.toString(),o.unbind(),""===i)||(e.a?this.params=e.a:e.d&&(this.fragment=new _y({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,r.params=this.getArgsList(),r.ready&&r.update()}),this.fn=v("decorators",n,i),this.fn||c(Ra(i,"decorator")))};bg.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var Lg,xg,kg,Eg=bg,Mg=Oo,Pg=Io,Cg=Fo,Tg=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Xs?(xg={},kg=ca("div").style,Lg=function(t){var e,n,i;if(t=Tg(t),!xg[t])if(void 0!==kg[t])xg[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=ra.length;e--;)if(n=ra[e],void 0!==kg[n+i]){xg[t]=n+i;break}return xg[t]}):Lg=null;var Sg,Dg,Ag=Lg;Xs?(Dg=window.getComputedStyle||xa.getComputedStyle,Sg=function(t){var e,n,i,o,s;if(e=Dg(this.node),"string"==typeof t)return s=e[Ag(t)],"0px"===s&&(s=0),s;if(!r(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)o=t[i],s=e[Ag(o)],"0px"===s&&(s=0),n[o]=s;return n}):Sg=null;var Og=Sg,Ig=function(t,e){var n;if("string"==typeof t)this.node.style[Ag(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[Ag(n)]=t[n]);return this},Rg=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(g(Ra(t.easing,"easing")),e=jo)):e="function"==typeof t.easing?t.easing:jo,this.easing=e,this.start=Xa(),this.end=this.start+this.duration,this.running=!0,_h.add(this)};Rg.prototype={tick:function(t){var e,n;return!!this.running&&(t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0))},stop:function(){this.abort&&this.abort(),this.running=!1}};var zg,Ug,Bg,Ng,Fg,jg,Zg,Wg,Hg=Rg,Gg=new RegExp("^-(?:"+ra.join("|")+")-"),Vg=function(t){return t.replace(Gg,"")},qg=new RegExp("^(?:"+ra.join("|")+")([A-Z])"),Yg=function(t){var e;return t?(qg.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},$g={},Jg={};Xs?(Ug=ca("div").style,function(){void 0!==Ug.transition?(Bg="transition",Ng="transitionend",Fg=!0):void 0!==Ug.webkitTransition?(Bg="webkitTransition",Ng="webkitTransitionEnd",Fg=!0):Fg=!1}(),Bg&&(jg=Bg+"Duration",Zg=Bg+"Property",Wg=Bg+"TimingFunction"),zg=function(t,e,n,i,o){setTimeout(function(){var r,s,a,h,l;h=function(){s&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),o())},r=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[Zg]=i.map(Ag).map(Yg).join(","),t.node.style[Wg]=Yg(n.easing||"linear"),t.node.style[jg]=n.duration/1e3+"s",
l=function(e){var n;n=i.indexOf(Tg(Vg(e.propertyName))),n!==-1&&i.splice(n,1),i.length||(t.node.removeEventListener(Ng,l,!1),a=!0,h())},t.node.addEventListener(Ng,l,!1),setTimeout(function(){for(var o,u,c,d,p,f=i.length,g=[];f--;)d=i[f],o=r+d,Fg&&!Jg[o]&&(t.node.style[Ag(d)]=e[d],$g[o]||(u=t.getStyle(d),$g[o]=t.getStyle(d)!=e[d],Jg[o]=!$g[o],Jg[o]&&(t.node.style[Ag(d)]=u))),Fg&&!Jg[o]||(void 0===u&&(u=t.getStyle(d)),c=i.indexOf(d),c===-1?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(c,1),p=/[^\d]*$/.exec(e[d])[0],g.push({name:Ag(d),interpolator:Ua(parseFloat(u),parseFloat(e[d])),suffix:p}));g.length?new Hg({root:t.root,duration:n.duration,easing:Tg(n.easing||""),step:function(e){var n,i;for(i=g.length;i--;)n=g[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){s=!0,h()}}):s=!0,i.length||(t.node.removeEventListener(Ng,l,!1),a=!0,h())},0)},n.delay||0)}):zg=null;var Kg,Qg,Xg,tv,ev,nv=zg;if("undefined"!=typeof document){if(Kg="hidden",ev={},Kg in document)Xg="";else for(tv=ra.length;tv--;)Qg=ra[tv],Kg=Qg+"Hidden",Kg in document&&(Xg=Qg);void 0!==Xg?(document.addEventListener(Xg+"visibilitychange",Zo),Zo()):("onfocusout"in document?(document.addEventListener("focusout",Wo),document.addEventListener("focusin",Ho)):(window.addEventListener("pagehide",Wo),window.addEventListener("blur",Wo),window.addEventListener("pageshow",Ho),window.addEventListener("focus",Ho)),ev.hidden=!1)}var iv,ov,rv,sv=ev;Xs?(ov=window.getComputedStyle||xa.getComputedStyle,iv=function(t,e,n){var i,o=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(sv.hidden)return this.setStyle(t,e),rv||(rv=sh.resolve());"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(g('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var r=new sh(function(t){var e,r,s,a,h,l,u;if(!n.duration)return o.setStyle(i),void t();for(e=Object.keys(i),r=[],s=ov(o.node),h={},l=e.length;l--;)u=e[l],a=s[Ag(u)],"0px"===a&&(a=0),a!=i[u]&&(r.push(u),o.node.style[Ag(u)]=a);return r.length?void nv(o,i,n,r,t):void t()});return r}):iv=null;var av=iv,hv=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),o({},t,e)},lv=Go,uv=function(t,e,n){this.init(t,e,n)};uv.prototype={init:Cg,start:lv,getStyle:Og,setStyle:Ig,animateStyle:av,processParams:hv};var cv,dv,pv=uv,fv=qo;cv=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},dv=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var mv=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Xo).join("")+this.conditionalAttributes.map(Xo).join(""),"option"===this.name&&Ko(this)&&(t+=" selected"),"input"===this.name&&Qo(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=Me(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),yc.test(this.template.e)||(t+="</"+this.template.e+">"),t)},gv=tr,vv=er,_v=function(t){this.init(t)};_v.prototype={bubble:Gf,detach:Vf,find:qf,findAll:Yf,findAllComponents:$f,findComponent:Jf,findNextNode:Kf,firstNode:Qf,getAttribute:Xf,init:Mg,rebind:Pg,render:fv,toString:mv,unbind:gv,unrender:vv};var yv=_v,wv=/^\s*$/,bv=/^\s*/,Lv=function(t){var e,n,i,o;return e=t.split("\n"),n=e[0],void 0!==n&&wv.test(n)&&e.shift(),i=R(e),void 0!==i&&wv.test(i)&&e.pop(),o=e.reduce(ir,null),o&&(t=e.map(function(t){return t.replace(o,"")}).join("\n")),t},xv=or,kv=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},Ev='Could not find template for partial "%s"',Mv=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=tu,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,of.init(this,t),this.keypath||((n=xv(this.root,this.name,e))?(Ip.call(this),this.isNamed=!0,this.setTemplate(n)):g(Ev,this.name))};Mv.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||nf.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:of.resolve,setValue:function(t){var e;void 0!==t&&t===this.value||(void 0!==t&&(e=xv(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=xv(this.root,this.name,this.parentFragment))&&(Ip.call(this),this.isNamed=!0),e||g(Ev,this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&mh.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new _y({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,i,o;return e=this.fragment.toString(t),n=this.parentFragment.items[this.index-1],n&&n.type===ql?(i=n.text.split("\n").pop(),(o=/^\s+$/.exec(i))?kv(e,o[0]):e):e},unbind:function(){this.isNamed||Ip.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var Pv,Cv,Tv,Sv=Mv,Dv=lr,Av=ur,Ov=new nh("detach"),Iv=cr,Rv=dr,zv=pr,Uv=fr,Bv=mr,Nv=gr,Fv=function(t,e,n,i){var o=t.root,r=t.keypath;i?o.viewmodel.smartUpdate(r,e,i):o.viewmodel.mark(r)},jv=[],Zv=["pop","push","reverse","shift","sort","splice","unshift"];Zv.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o,r,s,a;for(o=ml(this,t,n),r=Array.prototype[t].apply(this,arguments),mh.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)s=this._ractive.wrappers[a],mh.addRactive(s.root),Fv(s,this,t,o);return mh.end(),this._ractive.setting=!1,r};ba(jv,t,{value:e})}),Pv={},Pv.__proto__?(Cv=function(t){t.__proto__=jv},Tv=function(t){t.__proto__=Array.prototype}):(Cv=function(t){var e,n;for(e=Zv.length;e--;)n=Zv[e],ba(t,n,{value:jv[n],configurable:!0})},Tv=function(t){var e;for(e=Zv.length;e--;)delete t[Zv[e]]}),Cv.unpatch=Tv;var Wv,Hv,Gv,Vv=Cv;Wv={filter:function(t){return r(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Hv(t,e,n)}},Hv=function(t,e,n){this.root=t,this.value=e,this.keypath=k(n),e._ractive||(ba(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Vv(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},Hv.prototype={get:function(){return this.value},teardown:function(){var t,e,n,i,o;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if(o=n.indexOf(this),o===-1)throw new Error(Gv);if(n.splice(o,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(o=i.indexOf(this.root),o===-1)throw new Error(Gv);i.splice(o,1)}}else delete t._ractive,Vv.unpatch(this.value)}},Gv="Something went wrong in a rather interesting way";var qv,Yv,$v=Wv,Jv=/^\s*[0-9]+\s*$/,Kv=function(t){return Jv.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),qv={filter:function(t,e,n){var i,o;return!!e&&(e=k(e),!((i=n.viewmodel.wrapped[e.parent.str])&&!i.magic)&&(o=n.viewmodel.get(e.parent),(!r(o)||!/^[0-9]+$/.test(e.lastKey))&&(o&&("object"==typeof o||"function"==typeof o))))},wrap:function(t,e,n){return new Yv(t,e,n)}},Yv=function(t,e,n){var i,o,r;return n=k(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?t.viewmodel.data:t.viewmodel.get(i),o=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),o&&o.set&&(r=o.set._ractiveWrappers)?void(r.indexOf(this)===-1&&r.push(this)):void vr(this,e,o)},Yv.prototype={get:function(){return this.value},reset:function(t){if(!this.updating)return this.updating=!0,this.obj[this.prop]=t,mh.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Kv(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,i,o;return!this.updating&&(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(i=e._ractiveWrappers,o=i.indexOf(this),o!==-1&&i.splice(o,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(ka){qv=!1}var Qv,Xv,t_=qv;t_&&(Qv={filter:function(t,e,n){return t_.filter(t,e,n)&&$v.filter(t)},wrap:function(t,e,n){return new Xv(t,e,n)}},Xv=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=t_.wrap(t,e,n),this.arrayWrapper=$v.wrap(t,e,n)},Xv.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var e_=Qv,n_=_r,i_={},o_=br,r_=Lr,s_=Er,a_=Sr,h_=Dr,l_=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};l_.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var u_=l_,c_=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};c_.prototype={constructor:c_,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach(function(e){return t.register(e,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var t,e,n=this,i=!1;if(this.getting){var o="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return f(o),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(t){var e,o,r;if(!i)for(r=t.length;r--;)if(e=t[r],o=n.viewmodel.get(e),!a(o,n.depValues[e.str]))return n.depValues[e.str]=o,void(i=!0)}),i){this.viewmodel.capture();try{this.value=this.getter()}catch(r){m('Failed to compute "%s"',this.key.str),d(r.stack||r),this.value=void 0}t=this.viewmodel.release(),e=this.updateDependencies(t),e&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)},updateDependencies:function(t){var e,n,i,o,r;for(n=this.softDeps,e=n.length;e--;)i=n[e],t.indexOf(i)===-1&&(o=!0,this.viewmodel.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],n.indexOf(i)!==-1||this.hardDeps&&this.hardDeps.indexOf(i)!==-1||(o=!0,Ar(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(r=new u_(this,i.str),t.splice(e,1),this.unresolvedDeps[i.str]=r,mh.addUnresolved(r)):this.viewmodel.register(i,this,"computed"));return o&&(this.softDeps=t.slice()),o}};var d_=c_,p_=Or,f_={FAILED_LOOKUP:!0},m_=Ir,g_={},v_=zr,__=Ur,y_=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};y_.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){if(this.resolved)return this.origin.get(this.map(t),e)},getValue:function(){if(this.keypath)return this.origin.get(this.keypath)},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var i,o;if(this.resolved){for(i=this.deps,o=i.length;o--;)if(i[o].dep===e){i.splice(o,1);break}this.origin.unregister(this.map(t),e,n)}}};var w_=Br,b_=function(t,e){var n,i,o,r;return n={},i=0,o=t.map(function(t,o){var s,a,h;a=i,h=e.length;do{if(s=e.indexOf(t,a),s===-1)return r=!0,-1;a=s+1}while(n[s]&&a<h);return s===i&&(i+=1),s!==o&&(r=!0),n[s]=!0,s})},L_=Nr,x_={},k_=Zr,E_=Hr,M_=Gr,P_=Vr,C_=Yr,T_={implicit:!0},S_={noCascade:!0},D_=Jr,A_=Kr,O_=function(t){var e,n,i=t.adapt,o=t.data,r=t.ractive,s=t.computed,a=t.mappings;this.ractive=r,this.adaptors=i,this.onchange=t.onchange,this.cache={},this.cacheMap=wa(null),this.deps={computed:wa(null),"default":wa(null)},this.depsMap={computed:wa(null),"default":wa(null)},this.patternObservers=[],this.specials=wa(null),this.wrapped=wa(null),this.computations=wa(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=o,this.mappings=wa(null);for(e in a)this.map(k(e),a[e]);if(o)for(e in o)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(o[e]);for(e in s)a&&e in a&&c("Cannot map to a computed property ('%s')",e),this.compute(k(e),s[e]);this.ready=!0};O_.prototype={adapt:n_,applyChanges:s_,capture:a_,clearCache:h_,compute:p_,get:m_,init:v_,map:__,mark:w_,merge:L_,register:k_,release:E_,reset:M_,set:P_,smartUpdate:C_,teardown:D_,unregister:A_};var I_=O_;Xr.prototype={constructor:Xr,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?ts(this.queue,e).push(t):es(this,t),delete this.inProcess[t._guid]}};var R_=Xr,z_=ns,U_=/\$\{([^\}]+)\}/g,B_=new nh("construct"),N_=new nh("config"),F_=new R_("init"),j_=0,Z_=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],W_=ss,H_=cs;cs.prototype={bubble:function(){this.dirty||(this.dirty=!0,mh.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var G_=function(t,e,n,o,s){var a,h,l,u,c,d,p={},f={},g={},v=[];for(h=t.parentFragment,l=t.root,s=s||{},i(p,s),s.content=o||[],p[""]=s.content,e.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",t.name),u=h;u;){if(u.owner.type===su){c=u.owner.container;break}u=u.parent}return n&&Object.keys(n).forEach(function(e){var i,o,s=n[e];if("string"==typeof s)i=kd(s),f[e]=i?i.value:s;else if(0===s)f[e]=!0;else{if(!r(s))throw new Error("erm wut");ps(s)?(g[e]={origin:t.root.viewmodel,keypath:void 0},o=ds(t,s[0],function(t){t.isSpecial?d?a.set(e,t.value):(f[e]=t.value,delete g[e]):d?a.viewmodel.mappings[e].resolve(t):g[e].keypath=t})):o=new H_(t,s,function(t){d?a.set(e,t):f[e]=t}),v.push(o)}}),a=wa(e.prototype),W_(a,{el:null,append:!0,data:f,partials:s,magic:l.magic||e.defaults.magic,modifyArrays:l.modifyArrays,adapt:l.adapt},{parent:l,component:t,container:c,mappings:g,inlinePartials:p,cssIds:h.cssIds}),d=!0,t.resolvers=v,a},V_=fs,q_=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},Y_=gs,$_=vs,J_=_s,K_=ys,Q_=ws,X_=new nh("teardown"),ty=Ls,ey=function(t,e){this.init(t,e)};ey.prototype={detach:Av,find:Iv,findAll:Rv,findAllComponents:zv,findComponent:Uv,findNextNode:Bv,firstNode:Nv,init:Y_,rebind:$_,render:J_,toString:K_,unbind:Q_,unrender:ty};var ny=ey,iy=function(t){this.type=eu,this.value=t.template.c};iy.prototype={detach:Dp,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var oy=iy,ry=function(t){var e,n;this.type=su,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=t.template.n||"",o=e._inlinePartials[i];o||(m('Could not find template for partial "'+i+'"',{ractive:t.root}),o=[]),this.fragment=new _y({owner:this,root:e.parent,template:o,pElement:this.containerFragment.pElement}),r(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],mh.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};ry.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),z(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var sy=ry,ay=function(t){this.declaration=t.template.a};ay.prototype={init:Da,render:Da,unrender:Da,teardown:Da,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var hy=ay,ly=xs,uy=Es,cy=Ms,dy=Ps,py=Ss,fy=As,my=function(t){this.init(t)};my.prototype={bubble:yp,detach:wp,find:bp,findAll:Lp,findAllComponents:xp,findComponent:kp,findNextNode:Ep,firstNode:Mp,getArgsList:Cp,getNode:Tp,getValue:Sp,init:ly,rebind:uy,registerIndexRef:function(t){var e=this.registeredIndexRefs;e.indexOf(t)===-1&&e.push(t)},render:cy,toString:dy,unbind:py,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:fy};var gy,vy,_y=my,yy=Os,wy=["template","partials","components","decorators","events"],by=new nh("reset"),Ly=function(t,e){function n(e,i,o){o&&o.partials[t]||e.forEach(function(e){e.type===tu&&e.getPartialName()===t&&i.push(e),e.fragment&&n(e.fragment.items,i,o),r(e.fragments)?n(e.fragments,i,o):r(e.items)?n(e.items,i,o):e.type===ru&&e.instance&&n(e.instance.fragment.items,i,e.instance),e.type===Xl&&(r(e.attributes)&&n(e.attributes,i,o),r(e.conditionalAttributes)&&n(e.conditionalAttributes,i,o))})}var i,o=[];return n(this.fragment.items,o),this.partials[t]=e,i=mh.start(this,!0),o.forEach(function(e){e.value=void 0,e.setValue(t)}),mh.end(),i},xy=Is,ky=vl("reverse"),Ey=Rs,My=vl("shift"),Py=vl("sort"),Cy=vl("splice"),Ty=Us,Sy=Bs,Dy=new nh("teardown"),Ay=Fs,Oy=js,Iy=Zs,Ry=new nh("unrender"),zy=vl("unshift"),Uy=Ws,By=new nh("update"),Ny=Hs,Fy={add:Ja,animate:bh,detach:xh,find:Eh,findAll:Ih,findAllComponents:Rh,findComponent:zh,findContainer:Uh,findParent:Bh,fire:Zh,get:Wh,insert:Gh,merge:qh,observe:hl,observeOnce:ll,off:dl,on:pl,once:fl,pop:_l,push:yl,render:Ml,reset:yy,resetPartial:Ly,resetTemplate:xy,reverse:ky,set:Ey,shift:My,sort:Py,splice:Cy,subtract:Ty,teardown:Sy,toggle:Ay,toHTML:Oy,toHtml:Oy,unrender:Iy,unshift:zy,update:Uy,updateModel:Ny},jy=function(t,e,n){return n||Vs(t,e)?function(){var n,i="_super"in this,o=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=o),n}:t},Zy=qs,Wy=Ks,Hy=function(t){var e,n,i={};return t&&(e=t._ractive)?(i.ractive=e.root,i.keypath=e.keypath.str,i.index={},(n=Wp(e.proxy.parentFragment))&&(i.index=Wp.resolve(n)),i):i};gy=function(t){return this instanceof gy?void W_(this,t):new gy(t)},vy={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Wy},getNodeInfo:{value:Hy},parse:{value:Yd},Promise:{value:sh},svg:{value:oa},magic:{value:na},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:la},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Na},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},La(gy,vy),gy.prototype=i(Fy,ha),gy.prototype.constructor=gy,gy.defaults=gy.prototype;var Gy="function";if(typeof Date.now!==Gy||typeof String.prototype.trim!==Gy||typeof Object.keys!==Gy||typeof Array.prototype.indexOf!==Gy||typeof Array.prototype.forEach!==Gy||typeof Array.prototype.map!==Gy||typeof Array.prototype.filter!==Gy||"undefined"!=typeof window&&typeof window.addEventListener!==Gy)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Vy=gy;return Vy})},{}],11:[function(t,e,n){"use strict";var i=t("leaflet");i.BingLayer=t("../libs/leaflet-plugins.bing.js").BingLayer;var o=t("../libs/html2canvas.js"),r=t("lodash"),s=t("ractive"),a=t("ractive-events-tap");t("../libs/ractive-transitions-slide.js"),t("leaflet-draw"),t("leaflet-minimap");var h=t("./js/utils.js"),l=t("./js/dom.js"),u=t("./js/geocode.js"),c=function(t){this.options=r.extend({template:' <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">  <div class="locator {{ (noGenerate.controlsOpen) ? \'controls-open\' : \'controls-closed\' }} {{ options.superClass }}">  <section class="locator-display">  <div class="locator-map-wrapper">  <div class="locator-display-inner">  <div class="locator-map">  <div class="locator-map-attribution {{#options.embedAttribution}}enabled{{/}}">  {{#options.overrideAttribution}}  {{{ options.overrideAttribution }}}  {{/}}  {{^options.overrideAttribution}}  {{{ options.tilesets[options.tileset].attribution }}}  {{/}}  </div>  </div>   <div class="locator-map-help">  Move the marker by dragging the base.   {{#options.drawing}}  Use the buttons to draw shapes on the map.  {{/drawing}}   {{#(options.tilesets[options.tileset] && options.tilesets[options.tileset].attribution)}}  Required attribution for this map: <br>  <span class="attribution">{{{ options.tilesets[options.tileset].attribution }}}</span>  {{/()}}  </div>  </div>  </div>  </section>    <section class="locator-controls">  <div class="minor-controls">  <div class="toggle-controls" on-tap="toggle:\'noGenerate.controlsOpen\'" title="{{#noGenerate.controlsOpen}}Hide controls and preview{{ else }}Show controls{{/noGenerate.controlsOpen}}"></div>   <button class="minor-button minor-generate" on-tap="generate" title="Generate"><i class="fa fa-download"></i></button>  </div>   <div class="locator-controls-wrapper">  <header>{{{ options.title }}}</header>   <div class="locator-input">  <div class="locator-history">  <button class="small inline action undo" disabled="{{ !canUndo }}" title="Undo" on-tap="undo"><i class="fa fa-rotate-left"></i></button>  <button class="small inline action redo" disabled="{{ !canRedo }}" title="Redo" on-tap="redo"><i class="fa fa-rotate-right"></i></button>  <button class="small inline destructive reset" title="Reset all options" on-tap="resetOptions"><i class="fa fa-refresh"></i></button>  </div>   {{^options.geocoder}}  <div class="config-option">  <label>Latitude and longitude location</label>   <br><input type="number" placeholder="Latitude" value="{{ options.lat }}" lazy>  <br><input type="number" placeholder="Longitude" value="{{ options.lng }}" lazy>  </div>  {{/options.geocoder}}   {{#options.geocoder}}  <div class="config-option">  <label>Search</label>  <input type="text" placeholder="Address or lat,lng" value="{{ geocodeInput }}" lazy disabled="{{ isGeocoding }}">  </div>  {{/options.geocoder}}   <div class="markers {{^options.markers}}no-markers{{/}}">  <label class="no-markers-label">Markers</label>  <button class="add-marker action small inline" on-tap="add-marker" title="Add marker at center of map"><i class="fa fa-plus"></i></button>   <label class="markers-label">Markers</label>  <div class="help">Use <code>&lt;br&gt;</code> to make line breaks.</div>   {{#options.markers:mi}}  <div class="marker" intro-outro="slide">  <div class="config-option">  <input type="text" placeholder="Marker label" value="{{ this.text }}" lazy>  </div>   <div class="marker-actions">  {{#(_.size(options.markerBackgrounds) > 1)}}  <div class="color-picker color-picker-backgrounds" title="Set marker background color">  {{#options.markerBackgrounds:bi}}  <div class="color-picker-item {{#(options.markers[mi] && options.markers[mi].background === this)}}active{{ else }}inactive{{/()}} {{#(this.indexOf(\'255, 255, 255\') !== -1 || this.indexOf(\'FFFFFF\') !== -1)}}is-white{{/()}}"  style="background-color: {{ this }}"  on-tap="setMarker:{{ mi }},\'background\',{{ this }}">  {{/}}  </div>&nbsp;  {{/}}   {{#(_.size(options.markerForegrounds) > 1)}}  <div class="color-picker color-picker-foregrounds" title="Set marker foreground color">  {{#options.markerForegrounds:bi}}  <div class="color-picker-item {{#(options.markers[mi] && options.markers[mi].foreground === this)}}active{{ else }}inactive{{/()}} {{#(this.indexOf(\'255, 255, 255\') !== -1 || this.indexOf(\'FFFFFF\') !== -1)}}is-white{{/()}}"  style="background-color: {{ this }}"  on-tap="setMarker:{{ mi }},\'foreground\',{{ this }}">  {{/}}  </div>  {{/}}   {{#options.markerToCenter}}  <button class="action small" on-tap="marker-to-center:{{ mi }}" title="Move marker to center of map"><i class="fa fa-compass"></i></button>&nbsp;  {{/}}   {{#options.centerToMarker}}  <button class="action small" on-tap="center-to-marker:{{ mi }}" title="Center map on marker"><i class="fa fa-plus-square-o"></i></button>&nbsp;  {{/}}   <button class="destructive small" on-tap="remove-marker:{{ mi }}" title="Remove marker"><i class="fa fa-close"></i></button>  </div>  </div>  {{/}}  </div>   {{#options.drawing}}  <div class="drawing">  <label class="markers-label">Shapes</label>  <div class="help">Use the buttons on the map to draw shapes.</div>   <div class="drawing-section">  <div class="drawing-option">  <input type="checkbox" checked="{{ options.drawingStyles.stroke }}" id="drawing-styles-stroke" lazy>  <label for="drawing-styles-stroke">Stroke</label>  </div>   {{#(_.size(options.drawingStrokes) > 1 && options.drawingStyles.stroke)}}  <div class="color-picker" title="Set drawing stroke color">  {{#options.drawingStrokes:di}}  <div class="color-picker-item {{#(options.drawingStyles.color === this)}}active{{ else }}inactive{{/()}} {{#(this.indexOf(\'255, 255, 255\') !== -1 || this.indexOf(\'FFFFFF\') !== -1)}}is-white{{/()}}"  style="background-color: {{ this }}"  on-tap="setDrawing:\'color\',{{ this }}"></div>  {{/}}  </div>  {{/}}  </div>   <div class="drawing-section">  <div class="drawing-option">  <input type="checkbox" checked="{{ options.drawingStyles.fill }}" id="drawing-styles-fill" lazy>  <label for="drawing-styles-fill">Fill</label>  </div>   {{#(_.size(options.drawingStrokes) > 1 && options.drawingStyles.fill)}}  <div class="color-picker" title="Set drawing fill color">  {{#options.drawingFills:di}}  <div class="color-picker-item {{#(options.drawingStyles.fillColor === this)}}active{{ else }}inactive{{/()}} {{#(this.indexOf(\'255, 255, 255\') !== -1 || this.indexOf(\'FFFFFF\') !== -1)}}is-white{{/()}}"  style="background-color: {{ this }}"  on-tap="setDrawing:\'fillColor\',{{ this }}"></div>  {{/}}  </div>  {{/}}  </div>  </div>  {{/options.drawing}}   {{#(_.size(options.tilesets) > 1)}}  <div class="config-option">  <label>Background</label>   <div class="image-picker images-{{ _.size(options.tilesets) }}">  {{#options.tilesets:i}}  <div class="image-picker-item {{ (options.tileset === i) ? \'active\' : \'inactive\' }}" style="background-image: url({{= preview }});" title="{{ i }}" on-tap="set:\'options.tileset\',{{ i }}"></div>  {{/options.tilesets}}  </div>  </div>  {{/()}}   {{#(_.size(options.widths) > 1)}}  <div class="config-option config-select">  <label>Map width</label>   <select value="{{ options.width }}">  {{#options.widths:i}}  <option value="{{ i }}">{{ i }}</option>  {{/options.widths}}  </select>  </div>  {{/()}}   {{#(_.size(options.ratios) > 1)}}  <div class="config-option config-select">  <label>Map aspect ratio</label>   <select value="{{ options.ratio }}">  {{#options.ratios:i}}  <option value="{{ i }}">{{ i }}</option>  {{/options.ratios}}  </select>  </div>  {{/()}}   {{#options.miniControl}}  <div class="config-option">  <input type="checkbox" checked="{{ options.mini }}" id="config-mini" lazy>  <label for="config-mini">Mini-map</label>   {{#options.mini}}  <label>Mini-map zoom level</label>  <input type="range" min="-20" max="1" value="{{ options.miniZoomOffset }}" title="Adjust zoom level for map">  {{/options.mini}}  </div>  {{/options.miniControl}}   <div class="config-option">  <input type="checkbox" checked="{{ options.embedAttribution }}" id="config-embed-attribution" lazy>  <label for="config-embed-attribution">Embed attribution</label>   <input type="text" placeholder="Override attribution" value="{{ options.overrideAttribution }}" lazy>  </div>   <div class="config-action">  <button class="large additive generate-image" on-tap="generate">Generate <i class="fa fa-download"></i></button>  </div>   <div class="preview">  <h1>Preview</h1>  <img src="" /><br>  <a href="" class="download-link">Download</a>  </div>  </div>   <footer>  {{{ options.footer }}}  </footer>  </div>  </section> </div> ',
title:"McClatchy Locator",footer:'Made by the <a href="//datanews.tumblr.com/" target="_blank">WNYC DataNews</a> team.  Locator only works in <a href="//google.com/chrome" target="_blank">Google Chrome</a> at the moment.  See how to <a href="//github.com/datanews/locator/" target="_blank">deploy Locator</a> for yourself or your organization.',tilesets:{"CartoDB Positron":{url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a target="_blank" href="http://cartodb.com/attributions">CartoDB</a>'},"CartoDB Positron Dark":{url:"http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a target="_blank" href="http://cartodb.com/attributions">CartoDB</a>'},"Stamen Toner":{url:"http://tile.stamen.com/toner/{z}/{x}/{y}.png",attribution:'Map tiles by <a target="_blank" href="http://stamen.com">Stamen Design</a>, under <a  target="_blank" href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a  target="_blank" href="http://openstreetmap.org">OpenStreetMap</a>, under <a target="_blank" href="http://www.openstreetmap.org/copyright">ODbL</a>'},"Mapbox Streets (via WNYC)":{url:"https://api.mapbox.com/v4/jkeefe.np44bm6o/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamtlZWZlIiwiYSI6ImVCXzdvUGsifQ.5tFwEhRfLmH36EUxuvUQLA",attribution:"&copy; <a target='_blank' href='https://www.mapbox.com/about/maps/'>Mapbox</a> &copy; <a target='_blank' href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>"},"Mapbox Run, Bike, Hike (via WNYC)":{url:"https://api.mapbox.com/v4/jkeefe.oee1c53c/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamtlZWZlIiwiYSI6ImVCXzdvUGsifQ.5tFwEhRfLmH36EUxuvUQLA",attribution:"&copy; <a target='_blank' href='https://www.mapbox.com/about/maps/'>Mapbox</a> &copy; <a target='_blank' href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>"},"Mapbox Satellite (via WNYC)":{url:"https://api.mapbox.com/v4/jkeefe.oee0fah0/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamtlZWZlIiwiYSI6ImVCXzdvUGsifQ.5tFwEhRfLmH36EUxuvUQLA",attribution:"&copy; <a target='_blank' href='https://www.mapbox.com/about/maps/'>Mapbox</a> &copy; <a target='_blank' href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>; &copy; <a target='_blank' href='https://www.digitalglobe.com/'>DigitalGlobe</a>"},"Bing Maps Ariel (via WNYC)":{type:"BingLayer",key:"Aj4s_S9wMF1L8vcqCP7_ZWxtllCsUhD-LB8LY4KIOrkzHuMguY8NoZ_Gk4_lf4oD",options:{type:"Aerial"},attribution:"&copy; Bing",preview:"https://ecn.t2.tiles.virtualearth.net/tiles/a0320101103.jpeg?g=5306"},"Bing Maps Aerial w/ Labels (via WNYC)":{type:"BingLayer",key:"Aj4s_S9wMF1L8vcqCP7_ZWxtllCsUhD-LB8LY4KIOrkzHuMguY8NoZ_Gk4_lf4oD",options:{type:"AerialWithLabels"},attribution:"&copy; Bing",preview:"https://ecn.t2.tiles.virtualearth.net/tiles/h0320101103.jpeg?g=5306&mkt="}},tileset:"CartoDB Positron",zoom:17,minZoom:1,maxZoom:20,lat:40.74844,lng:-73.98566,embedAttribution:!1,overrideAttribution:"First Last / Newsroom |  Mapbox  OpenStreetMap",mini:!0,miniControl:!0,miniWidth:"15w",miniHeight:"15w",miniZoomOffset:-6,miniExtentStyles:{fill:!1,stroke:!0,color:"#000000",opacity:.9,weight:1.5},miniStyles:{backgroundColor:"#FFFFFF",padding:3,shadow:!0,shadowColor:"rgba(0, 0, 0, 0.65)",shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1},miniAimingMinWidth:8,miniAimingMinHeight:6,markers:[{text:"Empire State Building",lat:40.74844,lng:-73.98566}],markerDefaults:{text:"",background:"rgba(0, 0, 0, 0.9)",foreground:"rgba(255, 255, 255, 0.9)",radius:5,fontSize:16,font:'"Open Sans", Helvetica, Arial, sans-serif',labelDistance:20,labelWidth:3,padding:10},markerBackgrounds:["rgba(0, 0, 0, 0.9)","rgba(255, 255, 255, 0.9)","rgba(88, 88, 88, 0.9)","rgba(200, 200, 200, 0.9)","rgba(51, 102, 255, 0.9)","rgba(255, 51, 204, 0.9)","rgba(0, 245, 61, 0.9)","rgba(245, 0, 61, 0.9)","rgba(184, 0, 245, 0.9)"],markerForegrounds:["rgba(0, 0, 0, 0.9)","rgba(255, 255, 255, 0.9)"],draggableMarker:i.icon({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wwLFSU1meAbBQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACOUlEQVR42u3bP0sjQRjH8W8S/wYVFEFR1LOxMaSxsrKQlPcaBH1bCvcSvMrCQhAsbE5FwcZ/hVUQQcQ7CLheMSPYqjOzzyS/DyzpdnZ/u5k8s/sERERERERERERERERERERERERERERExJCKkeOoA7PAFDANjABjQD/QAZ791vbbPfDS6wH2AfPAug/rsx6AI+AWeO2lAKtAA2gF3Oc+cAEU3R7gOLAZad9vwC/gsVsDbAHNBONcA7vdFuAGMJnwYj0B2ykGqiUYYwuYSDxVDPl59iT3ADdKCO/dIPADOM81wBawWHKZNuqDvItZUsT6tW1iwwowl1OA1Yilylf9zCnAhsEl6zCwlkOAfYFXGCE1cwhwHrsGYoQYOsB1bFu1HGCdrz1VSaluOcBZ7KsCC1YDnCIPy1YDnM4kwCWrAY7Qg0IGONaD5xx0Z/2ZBFixGmAnkwDfrAb4nEmAhQLs0juwnUmAVwrwey6tBnifyfx3YzXAF1y7hWV/TReVuF4Vy46tB3hrOLwOcGo9wFdco49FZ+bXhd5F6ForgH/AYS4BFrguKUv2Yu041ov1R1yXlAV/Ys7N1YgHvovrkipTGziIOUAtwdVv4PpTypj3dmIPkqK97QTXJTWa+M7bSTFQLdEJnfu7cCbRnPc71ZVK3SM9h2v0GY70ld1LXcyX9TeHNVybxUCgFcZZrDrPaoDvmrh2i/onK4LCPxg4jrE8yynAjxZwL72XPpRYFb+qKfznFe553g0iAvwHgeJXccwK1poAAAAASUVORK5CYII=",iconSize:[80,80],iconAnchor:[40,55],popupAnchor:[-75,0]}),drawing:!0,drawingStyles:{fill:!1,stroke:!0,color:"#00B8F5",opacity:.9,weight:5,fillOpacity:.3},geojson:!1,drawingStrokes:["#00B8F5","#F5003D","#F500B8","#F5B800","#00F53D","#FFFFFF","#000000"],drawingFills:["#00B8F5","#F5003D","#F500B8","#F5B800","#00F53D","#FFFFFF","#000000"],widths:{Small:400,Medium:600,Large:800},width:"Medium",ratios:{"1:1":1,"4:3":4/3,"16:9":16/9},ratio:"4:3",controlsOpen:!0,centerToMarker:!0,markerToCenter:!0,geocoder:u.google,superClass:void 0},t),this.id=r.uniqueId("locator-"),this.el=this.options.el,this.updateOptions(),this.originalOptions=h.clone(this.options),this.options=this.load(this.options),this.history=[],this.historyIndex=0,this.save(!0),this.throttledDrawMaps=r.throttle(r.bind(this.drawMaps,this),500),r.isFunction(this.options.geocoder)&&(this.throttledGeocoder=r.throttle(r.bind(this.options.geocoder,this),500)),this.drawInterface()};r.extend(c.prototype,{drawInterface:function(){var t={controlsOpen:this.options.controlsOpen};this["interface"]=new s({el:this.options.el,template:this.options.template,data:{options:this.options,noGenerate:t,isGeocoding:!1,geocodeInput:"",_:r},events:{tap:a}}),this["interface"].observe("options",r.bind(function(){this.ignoreObservers||(this.updateOptions(),this["interface"].update(),this.save(!this.ignoreHistory),this.ignoreHistory=!1,this.throttledDrawMaps())},this),{init:!1}),this["interface"].observe("geocodeInput",r.bind(function(t){r.isFunction(this.throttledGeocoder)&&this.throttledGeocoder(t,r.bind(function(t,e){t&&e&&(this.set("options.lat",t),this.set("options.lng",e))},this))},this),{init:!1}),this["interface"].on("undo",r.bind(function(){this.ignoreHistory=!0,this.undo(),this.set("options",this.options)},this)),this["interface"].on("redo",r.bind(function(){this.ignoreHistory=!0,this.redo(),this.set("options",this.options)},this)),this["interface"].on("generate",r.bind(this.generate,this)),this["interface"].on("resetOptions",r.bind(function(){this.reset(),this.set("options",this.options)},this)),this["interface"].on("toggle",r.bind(function(t,e){this.set(e,!this.get(e))},this)),this["interface"].on("set",r.bind(function(t,e,n){this.set(e,n)},this)),this["interface"].on("setMarker",r.bind(function(t,e,n,i){var o=this.get("options.markers."+e);o&&this.set("options.markers."+e+"."+n,i)},this)),this["interface"].on("setDrawing",r.bind(function(t,e,n){this.set("options.drawingStyles."+e,n)},this)),this["interface"].on("marker-to-center",r.bind(function(t,e){var n=this.map.getCenter(),i={};i["options.markers."+e+".lat"]=n.lat,i["options.markers."+e+".lng"]=n.lng,this.set(i)},this)),this["interface"].on("center-to-marker",r.bind(function(t,e){var n=this.get("options.markers."+e);n&&this.set({"options.lat":n.lat,"options.lng":n.lng})},this)),this["interface"].on("remove-marker",r.bind(function(t,e){this.options.markers.splice(e,1)},this)),this["interface"].on("add-marker",r.bind(function(){var t=this.map.getCenter(),e={lat:t.lat,lng:t.lng};this.get("options.markers").push(this.updateMarker(e))},this)),this.drawMaps()},set:function(t,e){this["interface"]&&this["interface"].set(t,e)},get:function(t){if(this["interface"])return this["interface"].get(t)},drawMaps:function(){this.drawMap(),this.drawGeoJSON(),this.drawMarkers(),this.drawMinimap(),this.drawDrawingLayer(),this.fixMapVerticalAlign()},updateOptions:function(){var t=this.options;return t=this.alterOptions("preDraw",this.options),r.each(t.markers,r.bind(function(e,n){t.markers[n]=this.updateMarker(t.markers[n])},this)),t.tilesets=this.parseTilesets(t.tilesets),t.drawingStylesInvisible=r.clone(t.drawingStyles),t.drawingStylesInvisible.opacity=0,t.drawingStylesInvisible.fillOpacity=0,t},alterOptions:function(t,e){return r.isFunction(this.options[t])?r.bind(this.options[t],this)(e):e},drawMap:function(t){t=!!r.isUndefined(t)||t;var e,n,o,s=this.getEl(".locator-map");s.id=this.id+"-map",o=[this.options.lat,this.options.lng,this.options.zoom],this.map&&!t?(o[0]=this.map.getCenter().lat,o[1]=this.map.getCenter().lng,o[2]=this.map.getZoom(),this.map.remove()):this.map&&this.map.remove(),e=r.size(this.options.widths)?this.options.widths[this.options.width]:r.isNumber(this.options.width)?this.options.width:s.getBoundingClientRect().width,n=r.size(this.options.ratios)?e/this.options.ratios[this.options.ratio]:r.isNumber(this.options.ratio)?e/this.options.ratio:s.getBoundingClientRect().height,s.style.width=e+"px",s.style.height=n+"px",this.map=new i.Map(s.id,{minZoom:this.options.minZoom,maxZoom:this.options.maxZoom,attributionControl:!1,trackResize:!1}),this.map.setView([o[0],o[1]],o[2]),this.mapLayer=this.makeTileLayer(this.options.tilesets[this.options.tileset],-100),this.map.addLayer(this.mapLayer),this.map.on("moveend",r.bind(function(){var t=this.map.getCenter();this.isDrawing||this.set({"options.lat":t.lat,"options.lng":t.lng,"options.zoom":this.map.getZoom()})},this))},getGeoJSON:function(){var t=[];return this.drawLayer.eachLayer(function(e){e&&e.toGeoJSON&&t.push(e.toGeoJSON())}),this.options.geojson={type:"FeatureCollection",features:t},this.geojsonCanvasLayer&&this["interface"].update(),this.options.geojson},setGeoJSON:function(){this.drawLayer&&this.options.geojson&&(this.drawLayer.clearLayers(),i.geoJson(this.options.geojson,{style:r.clone(this.options.drawingStylesInvisible)}).eachLayer(r.bind(function(t){t.addTo(this.drawLayer)},this)))},drawDrawingLayer:function(){this.options.drawing&&(this.drawLayer=new i.FeatureGroup,this.map.addLayer(this.drawLayer),this.mapDraw=new i.Control.Draw({draw:{marker:!1,circle:!1,polyline:{metric:"en-us"!==navigator.language&&"en-US"!==navigator.language,shapeOptions:r.clone(this.options.drawingStyles)},polygon:{metric:"en-us"!==navigator.language&&"en-US"!==navigator.language,shapeOptions:r.clone(this.options.drawingStyles)},rectangle:{metric:"en-us"!==navigator.language&&"en-US"!==navigator.language,shapeOptions:r.clone(this.options.drawingStyles)}},edit:{featureGroup:this.drawLayer,edit:{selectedPathOptions:r.clone(this.options.drawingStyles)}}}),this.map.addControl(this.mapDraw),this.setGeoJSON(),this.map.on("draw:created",r.bind(function(t){t.layer.setStyle(r.clone(this.options.drawingStylesInvisible)),this.drawLayer.addLayer(t.layer),this.getGeoJSON()},this)),this.map.on("draw:edited",r.bind(this.getGeoJSON,this)),this.map.on("draw:deleted",r.bind(this.getGeoJSON,this)),this.map.on("draw:drawstart",r.bind(function(){this.isDrawing=!0},this)),this.map.on("draw:drawstop",r.bind(function(){this.isDrawing=!1},this)),this.map.on("draw:editstart",r.bind(function(){this.isDrawing=!0},this)),this.map.on("draw:editstop",r.bind(function(){this.isDrawing=!1},this)),this.map.on("draw:deletestart",r.bind(function(){this.isDrawing=!0},this)),this.map.on("draw:deletestop",r.bind(function(){this.isDrawing=!1},this)))},drawGeoJSON:function(){return this.geojsonCanvasLayer=i.tileLayer.canvas(),this.options.geojson?(this.geojsonCanvasLayer.drawTile=r.bind(this.drawGeoJSONTile,this),void this.map.addLayer(this.geojsonCanvasLayer)):this.geojsonCanvasLayer},drawMinimap:function(){var t;if(this.options.mini){var e=this.getEl(".locator-map").getBoundingClientRect().width,n=this.getEl(".locator-map").getBoundingClientRect().height,o=r.isNumber(this.options.miniWidth)?this.options.miniWidth:this.options.miniWidth.indexOf("w")!==-1?+this.options.miniWidth.replace("w","")/100*e:+this.options.miniWidth.replace("h","")/100*n,s=r.isNumber(this.options.miniHeight)?this.options.miniHeight:this.options.miniHeight.indexOf("w")!==-1?+this.options.miniHeight.replace("w","")/100*e:+this.options.miniHeight.replace("h","")/100*n;this.minimapLayer=this.makeTileLayer(this.options.tilesets[this.options.tileset]),this.miniMap=new i.Control.MiniMap(this.minimapLayer,{width:o,height:s,zoomLevelOffset:this.options.miniZoomOffset,aimingRectOptions:{fill:!1,stroke:!1}}),this.map.addControl(this.miniMap),this.miniMap._miniMap.addLayer(this.drawMiniCanvasLayer(this.options.miniExtentStyles)),t=this.getEl(".locator-map .leaflet-control-minimap"),r.each(this.miniStylesToCSS(this.options.miniStyles),function(e,n){t.style[n]=e})}},makeTileLayer:function(t,e){var n=t.options?r.clone(t.options):{};n=e?r.extend(n,{zIndex:e}):n;var o;return o="BingLayer"===t.type?new i.BingLayer(t.key,n):new i.TileLayer(t.url,n)},drawMiniCanvasLayer:function(t){return this.miniCanvasLayer=i.tileLayer.canvas(),this.miniCanvasLayer.drawTile=r.bind(function(e,n,o){var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);var s={};s.nwPoint=n.multiplyBy(256),s.sePoint=s.nwPoint.add(new i.Point(256,256)),s.nwCoord=this.map.unproject(s.nwPoint,o,!0),s.seCoord=this.map.unproject(s.sePoint,o,!0),s.bCoord=i.latLngBounds([[s.nwCoord.lat,s.seCoord.lng],[s.seCoord.lat,s.nwCoord.lng]]),s.bPoint=[s.nwPoint,s.sePoint];var a=this.map.getBounds(),h=this.map.project(a.getNorthWest(),o,!0),l=this.map.project(a.getSouthEast(),o,!0),u=this.options.miniAimingMinWidth?Math.max(this.options.miniAimingMinWidth,l.x-h.x):l.x-h.x,c=this.options.miniAimingMinHeight?Math.max(this.options.miniAimingMinHeight,l.y-h.y):l.y-h.y,d=this.options.miniAimingMinWidth&&u>l.x-h.x?(l.x-h.x-u)/2:0,p=this.options.miniAimingMinHeight&&c>l.y-h.y?(l.y-h.y-c)/2:0;r.beginPath(),r.rect(h.x-s.nwPoint.x+d,h.y-s.nwPoint.y+p,u,c),r=this.leafletStylesToCanvas(t,r),r.closePath()},this),this.map.on("moveend",r.bind(function(){this.miniCanvasLayer.redraw()},this)),this.miniCanvasLayer},updateMarker:function(t){return r.extend(r.clone(this.options.markerDefaults),t)},drawMarkers:function(){this.markerCanvas&&this.map&&this.markerCanvas._map&&this.map.removeLayer(this.markerCanvas),this.markerCanvas=i.tileLayer.canvas(),this.markerCanvas.drawTile=r.bind(this.drawMarkerTile,this),this.markerCanvas.addTo(this.map),r.each(this.options.markers,r.bind(function(t,e){this.draggableMarker(this.options.markers[e],e)},this))},draggableMarker:function(t,e){this.draggableMarkers=this.draggableMarkers||{};var n=this.draggableMarkers[e];n&&this.map&&n._map&&(n.clearAllEventListeners(),this.map.removeLayer(n)),this.draggableMarkers[e]=n=i.marker(i.latLng(t.lat,t.lng),{icon:this.options.draggableMarker,draggable:!0,opacity:0,title:"Drag marker here"}).addTo(this.map),n.on("mouseover",function(t){n.isDragging||t.target.setOpacity(.3)}),n.on("mouseout",function(t){n.isDragging||t.target.setOpacity(0)}),n.on("dragstart",function(t){n.isDragging=!0,t.target.setOpacity(1)}),n.on("dragend",r.bind(function(e){n.isDragging=!1,e.target.setOpacity(0);var i=e.target.getLatLng();t.lat=i.lat,t.lng=i.lng,this["interface"].update("options.markers")},this))},drawMarkerTile:function(t,e,n){var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),r.each(this.options.markers,r.bind(function(i){this.drawMarker(i,t,e,n)},this))},drawMarker:function(t,e,n,o){var s,a,h,l=e.getContext("2d"),u=t.text.split("<br>");u=r.map(u,function(t){return t.trim()});var c=u.length,d=1.25,p=t.fontSize*d*c+2*t.padding,f={};f.nwPoint=n.multiplyBy(256),f.sePoint=f.nwPoint.add(new i.Point(256,256)),f.nwCoord=this.map.unproject(f.nwPoint,o,!0),f.seCoord=this.map.unproject(f.sePoint,o,!0),f.bCoord=i.latLngBounds([[f.nwCoord.lat,f.seCoord.lng],[f.seCoord.lat,f.nwCoord.lng]]),f.bPoint=[f.nwPoint,f.sePoint],f.locCoord=i.latLng(t.lat,t.lng),f.locPoint=this.map.project(f.locCoord,o,!0),s={x:f.locPoint.x-f.nwPoint.x,y:f.locPoint.y-f.nwPoint.y},l.beginPath(),l.translate(s.x-t.radius,s.y-t.radius),l.fillStyle=t.background,l.fillRect(0,0,2*t.radius,2*t.radius),l.setTransform(1,0,0,1,0,0),l.closePath(),l.beginPath(),l.translate(s.x-t.labelWidth/2,s.y-t.radius-t.labelDistance),l.fillStyle=t.background,l.fillRect(0,0,t.labelWidth,t.labelDistance),l.setTransform(1,0,0,1,0,0),l.closePath(),l.beginPath(),l.font=t.fontSize+"px "+t.font,l.fillStyle=t.foreground,l.textAlign="center",a=r.max(u,function(t){return l.measureText(t).width}),a=l.measureText(a).width,h=a+2*t.padding,l.closePath(),l.beginPath(),l.translate(s.x-h/2,s.y-t.radius-t.labelDistance-p),l.fillStyle=t.background,l.fillRect(0,0,h,p),l.setTransform(1,0,0,1,0,0),l.closePath(),r.each(u,r.bind(function(e,n){var i=1;l.beginPath(),l.translate(s.x,s.y-t.radius-t.labelDistance-p+t.padding+i+t.fontSize*d*n),l.font=t.fontSize+"px "+t.font,l.fillStyle=t.foreground,l.textAlign="center",l.textBaseline="top",l.fillText(e,0,0),l.setTransform(1,0,0,1,0,0),l.closePath()},this))},drawGeoJSONTile:function(t,e,n){var o=t.getContext("2d");o.clearRect(0,0,t.width,t.height);var s={};s.nwPoint=e.multiplyBy(256),s.sePoint=s.nwPoint.add(new i.Point(256,256)),s.nwCoord=this.map.unproject(s.nwPoint,n,!0),s.seCoord=this.map.unproject(s.sePoint,n,!0),s.bCoord=i.latLngBounds([[s.nwCoord.lat,s.seCoord.lng],[s.seCoord.lat,s.nwCoord.lng]]),s.bPoint=[s.nwPoint,s.sePoint],r.each(this.options.geojson.features,r.bind(function(t){var e=r.clone(this.options.drawingStyles);"Polygon"===t.geometry.type?(o.beginPath(),r.each(t.geometry.coordinates,r.bind(function(t){r.each(t,r.bind(function(t,e){var i=this.map.project([t[1],t[0]],n,!0);0===e?o.moveTo(i.x-s.nwPoint.x,i.y-s.nwPoint.y):o.lineTo(i.x-s.nwPoint.x,i.y-s.nwPoint.y)},this)),o.closePath(),o=this.leafletStylesToCanvas(e,o)},this))):"LineString"===t.geometry.type&&(e.fill=!1,o.beginPath(),r.each(t.geometry.coordinates,r.bind(function(t,i){var r=this.map.project([t[1],t[0]],n,!0);0===i?o.moveTo(r.x-s.nwPoint.x,r.y-s.nwPoint.y):o.lineTo(r.x-s.nwPoint.x,r.y-s.nwPoint.y),o=this.leafletStylesToCanvas(e,o)},this)))},this))},generate:function(){this.getEl(".locator-map .leaflet-control-zoom").style.display="none",this.options.mini&&(this.getEl(".locator-map .leaflet-control-minimap").style.display="none"),this.options.drawing&&(this.getEl(".locator-map .leaflet-draw").style.display="none"),r.delay(r.bind(function(){o(this.getEl(".locator-map"),{useCORS:!0,onrendered:r.bind(function(t){return this.getEl(".locator-map .leaflet-control-zoom").style.display="block",this.options.mini&&(this.getEl(".locator-map .leaflet-control-minimap").style.display="block"),this.options.drawing&&(this.getEl(".locator-map .leaflet-draw").style.display="block"),this.options.mini?void o(this.getEl(".locator-map .leaflet-control-minimap"),{useCORS:!0,onrendered:r.bind(function(e){var n=this.drawCanvasMiniMap(t,e);this.preview(n),this["export"](n)},this)}):(this.preview(t.getContext("2d")),void this["export"](t.getContext("2d")))},this)})},this),300)},drawCanvasMiniMap:function(t,e){var n=t.getContext("2d"),i=this.getEl(".locator-map .leaflet-control-minimap"),o=i.getBoundingClientRect().width,r=i.getBoundingClientRect().height,s=this.options.miniStyles,a=10,h=10;return n.beginPath(),n.fillStyle=s.backgroundColor,s.shadow&&(n.shadowColor=s.shadowColor,n.shadowBlur=s.shadowBlur,n.shadowOffsetX=s.shadowOffsetX,n.shadowOffsetY=s.shadowOffsetY),n.fillRect(n.canvas.width-a-o-2*s.padding,n.canvas.height-h-r-2*s.padding,o+2*s.padding,r+2*s.padding),n.closePath(),n.beginPath(),n.shadowColor=0,n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0,n.drawImage(e,n.canvas.width-a-o-s.padding,n.canvas.height-h-r-s.padding,o,r),n.closePath(),n},preview:function(t){this.getEl(".preview img").src=t.canvas.toDataURL()},"export":function(t){var e=this.options.markers&&this.options.markers[0]?this.options.markers[0].text:"",n=this.getEl(".download-link");n.href=t.canvas.toDataURL(),n.download=h.makeID(e)+".png",n.click()},getEl:function(t){return document.querySelector(this.el+" "+t)},miniStylesToCSS:function(t){var e={"background-color":t.backgroundColor,border:t.padding+"px solid "+t.backgroundColor};return t.shadow&&(e["box-shadow"]=t.shadowOffsetX+"px "+t.shadowOffsetY+"px "+t.shadowBlur+"px "+t.shadowColor),e},leafletStylesToCanvas:function(t,e){return t.fill&&(e.globalAlpha=r.isUndefined(t.fillOpacity)?1:t.fillOpacity,e.fillStyle=t.fillColor||t.color,e.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(e.globalAlpha=r.isUndefined(t.opacity)?1:t.opacity,e.strokeStyle=t.color,e.lineCap=t.lineCap||"round",e.lineJoin=t.lineJoin||"round",e.lineWidth=t.weight,e.stroke()),e},save:function(t){var e=h.clone(this.options);delete e.draggableMarker,delete e.template,r.each(e,function(t,n){r.isFunction(t)&&delete e[n]}),window.localStorage.setItem("options",JSON.stringify(e)),t&&(this.historyIndex>=0&&this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.push(h.clone(e)),this.historyIndex=this.history.length-1,this.canDo())},load:function(t){var e=window.localStorage.getItem("options");return e?(e=JSON.parse(e),r.extend(t,e)):t},reset:function(){this.options=r.extend(this.options,h.clone(this.originalOptions))},undo:function(){this.historyIndex>0&&(this.historyIndex=this.historyIndex-1,this.options=r.extend(this.options,h.clone(this.history[this.historyIndex]))),this.canDo()},redo:function(){this.historyIndex<this.history.length-1&&(this.historyIndex=this.historyIndex+1,this.options=r.extend(this.options,h.clone(this.history[this.historyIndex]))),this.canDo()},canDo:function(){this.set({canUndo:this.historyIndex>0,canRedo:this.historyIndex<this.history.length-1})},parseTilesets:function(t){return r.each(t,function(e,n){r.isString(e)&&(t[n]={url:e}),!t[n].preview&&t[n].url&&(t[n].preview=t[n].url.replace("{s}","a").replace("{x}","301").replace("{y}","385").replace("{z}","10"))}),t},fixMapVerticalAlign:function(){var t=this.getEl(".locator-display");l.isOverflowed(t,"y")?t.classList.add("overflowed-y"):t.classList.remove("overflowed-y")}}),e.exports=c},{"../libs/html2canvas.js":"UzntfK","../libs/leaflet-plugins.bing.js":3,"../libs/ractive-transitions-slide.js":4,"./js/dom.js":12,"./js/geocode.js":13,"./js/utils.js":14,leaflet:7,"leaflet-draw":5,"leaflet-minimap":6,lodash:8,ractive:10,"ractive-events-tap":9}],12:[function(t,e,n){"use strict";function i(t,e){return e?"y"===e?t.scrollHeight>t.clientHeight:"x"===e&&t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}e.exports={isOverflowed:i}},{}],13:[function(t,e,n){"use strict";function i(t,e){var n=new XMLHttpRequest,i="https://maps.googleapis.com/maps/api/geocode/json?address="+encodeURIComponent(t),r=o.once(e);n.onreadystatechange=function(){var t;200===n.status&&n.responseText&&(t=JSON.parse(n.responseText),t&&t.results&&t.results.length&&r(t.results[0].geometry.location.lat,t.results[0].geometry.location.lng))},n.open("GET",i),n.send()}var o=t("lodash");e.exports={google:i}},{lodash:8}],14:[function(t,e,n){"use strict";function i(t){function e(t){return r.isElement(t)?t.cloneNode(!0):r.isDate(t)?new Date(t):r.cloneDeep(t)}return r.cloneDeepWith(t,e)}function o(t){return t=t?t.toString():"",t=t.toLowerCase().trim().replace(/\W+/g,"-"),t=t?t:"locator",r.uniqueId(t+"-")}var r=t("lodash");e.exports={clone:i,makeID:o}},{lodash:8}]},{},[11])(11)});